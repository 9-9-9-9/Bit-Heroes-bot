/*
 2008 PersonalGrid Corporation <http://personalgrid.com/>
 @package LivePipe UI
 @url http://livepipe.net/core
 @require prototype.js
 2008 PersonalGrid Corporation <http://personalgrid.com/>
 @package LivePipe UI
 @url http://livepipe.net/control/window
 @require prototype.js, effects.js, draggable.js, resizable.js, livepipe.js
 Sizzle CSS Selector Engine - v1.0
  Copyright 2009, The Dojo Foundation
  Released under the MIT, BSD, and GPL Licenses.
  More information: http://sizzlejs.com/
 jQuery JavaScript Library v1.9.1
 http://jquery.com/

 Includes Sizzle.js
 http://sizzlejs.com/

 Copyright 2005, 2012 jQuery Foundation, Inc. and other contributors
 Released under the MIT license
 http://jquery.org/license

 Date: 2013-2-4
 Sizzle CSS Selector Engine
 Copyright 2012 jQuery Foundation and other contributors
 Released under the MIT license
 http://sizzlejs.com/
 jQuery UI Widget 1.10.4
 http://jqueryui.com

 Copyright 2014 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/jQuery.widget/
 jQuery UI Position 1.10.4
 http://jqueryui.com

 Copyright 2014 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/position/
 jQuery UI Tooltip 1.10.3
 http://jqueryui.com

 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/tooltip/

 Depends:
 jquery.ui.core.js
 jquery.ui.widget.js
 jquery.ui.position.js
 jQuery UI Menu 1.10.4
 http://jqueryui.com

 Copyright 2014 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/menu/

 Depends:
 jquery.ui.core.js
 jquery.ui.widget.js
 jquery.ui.position.js
 jQuery UI Core 1.10.4
 http://jqueryui.com

 Copyright 2014 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/category/ui-core/
 jQuery UI Mouse 1.10.3
 http://jqueryui.com

 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/mouse/

 Depends:
 jquery.ui.widget.js
 jQuery UI Autocomplete 1.10.4
 http://jqueryui.com

 Copyright 2014 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/autocomplete/

 Depends:
 jquery.ui.core.js
 jquery.ui.widget.js
 jquery.ui.position.js
 jquery.ui.menu.js
 SWFObject v2.2 <http://code.google.com/p/swfobject/> 
 is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
var Kongregate=Kongregate||{};Kongregate.Utils=Kongregate.Utils||{};Kongregate.Utils.isKlient=function(){return/klient|kartridge\//.test(navigator.userAgent.toLowerCase())};Kongregate.Utils.findKongregateWindow=function(){if(!Kongregate.Utils.isKlient())return top;for(var a=window,b=window.parent;b!==top;)a=b,b=a.parent;return a};
Kongregate.Utils.catchErrors=function(a,b,c){return function(){try{return a.apply(b,arguments)}catch(d){return Kongregate.Log.error("catchErrors caught unhandled exception",d),c}}};
var Prototype={Version:"1.7_rc3",Browser:function(){var a=navigator.userAgent,b="[object Opera]"==Object.prototype.toString.call(window.opera);return{IE:!!window.attachEvent&&!b,Opera:b,WebKit:-1<a.indexOf("AppleWebKit/"),Gecko:-1<a.indexOf("Gecko")&&-1===a.indexOf("KHTML"),MobileSafari:/Apple.*Mobile/.test(a)}}(),BrowserFeatures:{XPath:!!document.evaluate,SelectorsAPI:!!document.querySelector,ElementExtensions:function(){var a=window.Element||window.HTMLElement;return!(!a||!a.prototype)}(),SpecificElementExtensions:function(){if("undefined"!==
typeof window.HTMLDivElement)return!0;var a=document.createElement("div"),b=document.createElement("form"),c=!1;a.__proto__&&a.__proto__!==b.__proto__&&(c=!0);return c}()},ScriptFragment:"<script[^>]*>([\\S\\s]*?)\x3c/script>",JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,emptyFunction:function(){},K:function(a){return a}};Prototype.Browser.MobileSafari&&(Prototype.BrowserFeatures.SpecificElementExtensions=!1);
var Abstract={},Try={these:function(){for(var a,b=0,c=arguments.length;b<c;b++){var d=arguments[b];try{a=d();break}catch(e){}}return a}},Class=function(){function a(){}var b=function(){for(var a in{toString:1})if("toString"===a)return!1;return!0}();return{create:function(){function b(){this.initialize.apply(this,arguments)}var d=null,e=$A(arguments);Object.isFunction(e[0])&&(d=e.shift());Object.extend(b,Class.Methods);b.superclass=d;b.subclasses=[];d&&(a.prototype=d.prototype,b.prototype=new a,d.subclasses.push(b));
d=0;for(var f=e.length;d<f;d++)b.addMethods(e[d]);b.prototype.initialize||(b.prototype.initialize=Prototype.emptyFunction);return b.prototype.constructor=b},Methods:{addMethods:function(a){var c=this.superclass&&this.superclass.prototype,e=Object.keys(a);b&&(a.toString!=Object.prototype.toString&&e.push("toString"),a.valueOf!=Object.prototype.valueOf&&e.push("valueOf"));for(var f=0,h=e.length;f<h;f++){var l=e[f],m=a[l];if(c&&Object.isFunction(m)&&"$super"==m.argumentNames()[0]){var n=m;m=function(a){return function(){return c[a].apply(this,
arguments)}}(l).wrap(n);m.valueOf=n.valueOf.bind(n);m.toString=n.toString.bind(n)}this.prototype[l]=m}return this}}}}();
(function(){function a(a){switch(a){case null:return"Null";case void 0:return"Undefined"}switch(typeof a){case "boolean":return"Boolean";case "number":return"Number";case "string":return"String"}return"Object"}function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a){return d("",{"":a},[])}function d(b,c,h){c=c[b];"Object"===a(c)&&"function"===typeof c.toJSON&&(c=c.toJSON(b));b=m.call(c);switch(b){case "[object Number]":case "[object Boolean]":case "[object String]":c=c.valueOf()}switch(c){case null:return"null";
case !0:return"true";case !1:return"false"}switch(typeof c){case "string":return c.inspect(!0);case "number":return isFinite(c)?String(c):"null";case "object":for(var e=0,f=h.length;e<f;e++)if(h[e]===c)throw new TypeError;h.push(c);var l=[];if("[object Array]"===b){e=0;for(f=c.length;e<f;e++){var n=d(e,c,h);l.push("undefined"===typeof n?"null":n)}l="["+l.join(",")+"]"}else{var z=Object.keys(c);e=0;for(f=z.length;e<f;e++)b=z[e],n=d(b,c,h),"undefined"!==typeof n&&l.push(b.inspect(!0)+":"+n);l="{"+l.join(",")+
"}"}h.pop();return l}}function e(a){return JSON.stringify(a)}function f(b){if("Object"!==a(b))throw new TypeError;var c=[],d;for(d in b)b.hasOwnProperty(d)&&c.push(d);return c}function h(a){return"[object Array]"===m.call(a)}function l(a){return"undefined"===typeof a}var m=Object.prototype.toString,n=window.JSON&&"function"===typeof JSON.stringify&&"0"===JSON.stringify(0)&&"undefined"===typeof JSON.stringify(Prototype.K);"function"==typeof Array.isArray&&Array.isArray([])&&!Array.isArray({})&&(h=
Array.isArray);b(Object,{extend:b,inspect:function(a){try{return l(a)?"undefined":null===a?"null":a.inspect?a.inspect():String(a)}catch(C){if(C instanceof RangeError)return"...";throw C;}},toJSON:n?e:c,toQueryString:function(a){return $H(a).toQueryString()},toHTML:function(a){return a&&a.toHTML?a.toHTML():String.interpret(a)},keys:Object.keys||f,values:function(a){var b=[],c;for(c in a)b.push(a[c]);return b},clone:function(a){return b({},a)},isElement:function(a){return!(!a||1!=a.nodeType)},isArray:h,
isHash:function(a){return a instanceof Hash},isFunction:function(a){return"function"===typeof a},isString:function(a){return"[object String]"===m.call(a)},isNumber:function(a){return"[object Number]"===m.call(a)},isUndefined:l})})();
Object.extend(Function.prototype,function(){function a(a,b){for(var c=a.length,d=b.length;d--;)a[c+d]=b[d];return a}function b(b,e){b=c.call(b,0);return a(b,e)}var c=Array.prototype.slice;return{argumentNames:function(){var a=this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!=a.length||a[0]?a:[]},bind:function(a){if(2>arguments.length&&Object.isUndefined(arguments[0]))return this;var d=this,f=c.call(arguments,
1);return function(){var c=b(f,arguments);return d.apply(a,c)}},bindAsEventListener:function(b){var d=this,f=c.call(arguments,1);return function(c){c=a([c||window.event],f);return d.apply(b,c)}},curry:function(){if(!arguments.length)return this;var a=this,e=c.call(arguments,0);return function(){var c=b(e,arguments);return a.apply(this,c)}},delay:function(a){var b=this,d=c.call(arguments,1);return window.setTimeout(function(){return b.apply(b,d)},1E3*a)},defer:function(){var b=a([.01],arguments);return this.delay.apply(this,
b)},wrap:function(b){var c=this;return function(){var d=a([c.bind(this)],arguments);return b.apply(this,d)}},methodize:function(){if(this._methodized)return this._methodized;var b=this;return this._methodized=function(){var c=a([this],arguments);return b.apply(null,c)}}}}());
(function(a){function b(){return this.getUTCFullYear()+"-"+(this.getUTCMonth()+1).toPaddedString(2)+"-"+this.getUTCDate().toPaddedString(2)+"T"+this.getUTCHours().toPaddedString(2)+":"+this.getUTCMinutes().toPaddedString(2)+":"+this.getUTCSeconds().toPaddedString(2)+"Z"}function c(){return this.toISOString()}a.toISOString||(a.toISOString=b);a.toJSON||(a.toJSON=c)})(Date.prototype);RegExp.prototype.match=RegExp.prototype.test;
RegExp.escape=function(a){return String(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")};
var PeriodicalExecuter=Class.create({initialize:function(a,b){this.callback=a;this.frequency=b;this.currentlyExecuting=!1;this.registerCallback()},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),1E3*this.frequency)},execute:function(){this.callback(this)},stop:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},onTimerEvent:function(){if(!this.currentlyExecuting)try{this.currentlyExecuting=!0,this.execute(),this.currentlyExecuting=!1}catch(a){throw this.currentlyExecuting=
!1,a;}}});Object.extend(String,{interpret:function(a){return null==a?"":String(a)},specialChar:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"}});
Object.extend(String.prototype,function(){function a(a){if(Object.isFunction(a))return a;var b=new Template(a);return function(a){return b.evaluate(a)}}function b(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}function c(a){var b=this.strip().match(/([^?#]*)(#.*)?$/);return b?b[1].split(a||"&").inject({},function(a,b){if((b=b.split("="))[0]){var c=decodeURIComponent(b.shift());b=1<b.length?b.join("="):b[0];void 0!=b&&(b=decodeURIComponent(b));c in a?(Object.isArray(a[c])||(a[c]=[a[c]]),a[c].push(b)):
a[c]=b}return a}):{}}function d(a){var b=this.unfilterJSON(),c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;c.test(b)&&(b=b.replace(c,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));try{if(!a||b.isJSON())return eval("("+b+")")}catch(n){}throw new SyntaxError("Badly formed JSON string: "+this.inspect());}function e(){var a=this.unfilterJSON();return JSON.parse(a)}var f=window.JSON&&"function"===typeof JSON.parse&&
JSON.parse('{"test": true}').test;return{gsub:function(b,c){var d="",h=this,e;c=a(c);Object.isString(b)&&(b=RegExp.escape(b));if(!b.length&&!b.source)return c=c(""),c+h.split("").join(c)+c;for(;0<h.length;)(e=h.match(b))?(d+=h.slice(0,e.index),d+=String.interpret(c(e)),h=h.slice(e.index+e[0].length)):(d+=h,h="");return d},sub:function(b,c,d){c=a(c);d=Object.isUndefined(d)?1:d;return this.gsub(b,function(a){return 0>--d?a[0]:c(a)})},scan:function(a,b){this.gsub(a,b);return String(this)},truncate:function(a,
b){a=a||30;b=Object.isUndefined(b)?"...":b;return this.length>a?this.slice(0,a-b.length)+b:String(this)},strip:String.prototype.trim||b,stripTags:function(){return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")},stripScripts:function(){return this.replace(new RegExp(Prototype.ScriptFragment,"img"),"")},extractScripts:function(){var a=new RegExp(Prototype.ScriptFragment,"im");return(this.match(new RegExp(Prototype.ScriptFragment,"img"))||[]).map(function(b){return(b.match(a)||["",
""])[1]})},evalScripts:function(){return this.extractScripts().map(function(a){return eval(a)})},escapeHTML:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescapeHTML:function(){return this.stripTags().replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},toQueryParams:c,parseQuery:c,toArray:function(){return this.split("")},succ:function(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1)},times:function(a){return 1>
a?"":Array(a+1).join(this)},camelize:function(){return this.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},capitalize:function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()},underscore:function(){return this.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/-/g,"_").toLowerCase()},dasherize:function(){return this.replace(/_/g,"-")},inspect:function(a){var b=this.replace(/[\x00-\x1f\\]/g,function(a){return a in
String.specialChar?String.specialChar[a]:"\\u00"+a.charCodeAt().toPaddedString(2,16)});return a?'"'+b.replace(/"/g,'\\"')+'"':"'"+b.replace(/'/g,"\\'")+"'"},unfilterJSON:function(a){return this.replace(a||Prototype.JSONFilter,"$1")},isJSON:function(){var a=this;if(a.blank())return!1;a=a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@");a=a.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");a=a.replace(/(?:^|:|,)(?:\s*\[)+/g,"");return/^[\],:{}\s]*$/.test(a)},evalJSON:f?
e:d,include:function(a){return-1<this.indexOf(a)},startsWith:function(a){return 0===this.lastIndexOf(a,0)},endsWith:function(a){var b=this.length-a.length;return 0<=b&&this.indexOf(a,b)===b},empty:function(){return""==this},blank:function(){return/^\s*$/.test(this)},interpolate:function(a,b){return(new Template(this,b)).evaluate(a)}}}());
var Template=Class.create({initialize:function(a,b){this.template=a.toString();this.pattern=b||Template.Pattern},evaluate:function(a){a&&Object.isFunction(a.toTemplateReplacements)&&(a=a.toTemplateReplacements());return this.template.gsub(this.pattern,function(b){if(null==a)return b[1]+"";var c=b[1]||"";if("\\"==c)return b[2];var d=a,e=b[3],f=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;b=f.exec(e);if(null==b)return c;for(;null!=b;){var h=b[1].startsWith("[")?b[2].replace(/\\\\]/g,"]"):b[1];d=d[h];if(null==
d||""==b[3])break;e=e.substring("["==b[3]?b[1].length:b[0].length);b=f.exec(e)}return c+String.interpret(d)})}});Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;
var $break={},Enumerable=function(){function a(a,b){a=a||Prototype.K;var c=!0;this.each(function(d,e){c=c&&!!a.call(b,d,e);if(!c)throw $break;});return c}function b(a,b){a=a||Prototype.K;var c=!1;this.each(function(d,e){if(c=!!a.call(b,d,e))throw $break;});return c}function c(a,b){a=a||Prototype.K;var c=[];this.each(function(d,e){c.push(a.call(b,d,e,this))},this);return c}function d(a,b){var c;this.each(function(d,e){if(a.call(b,d,e))throw c=d,$break;});return c}function e(a,b){var c=[];this.each(function(d,
e){a.call(b,d,e)&&c.push(d)});return c}function f(a){if(Object.isFunction(this.indexOf)&&-1!=this.indexOf(a))return!0;var b=!1;this.each(function(c){if(c==a)throw b=!0,$break;});return b}function h(){return this.map()}return{each:function(a,b){var c=0;try{this._each(function(d){a.call(b,d,c++)})}catch(z){if(z!=$break)throw z;}return this},eachSlice:function(a,b,c){var d=-a,e=[],h=this.toArray();if(1>a)return h;for(;(d+=a)<h.length;)e.push(h.slice(d,d+a));return e.collect(b,c)},all:a,every:a,any:b,
some:b,collect:c,map:c,detect:d,findAll:e,select:e,filter:e,grep:function(a,b,c){b=b||Prototype.K;var d=[];Object.isString(a)&&(a=new RegExp(RegExp.escape(a)));this.each(function(e,h){a.match(e)&&d.push(b.call(c,e,h))});return d},include:f,member:f,inGroupsOf:function(a,b){b=Object.isUndefined(b)?null:b;return this.eachSlice(a,function(c){for(;c.length<a;)c.push(b);return c})},inject:function(a,b,c){this.each(function(d,e){a=b.call(c,a,d,e)});return a},invoke:function(a){var b=$A(arguments).slice(1);
return this.map(function(c){return c[a].apply(c,b)})},max:function(a,b){a=a||Prototype.K;var c;this.each(function(d,e){d=a.call(b,d,e);if(null==c||d>=c)c=d});return c},min:function(a,b){a=a||Prototype.K;var c;this.each(function(d,e){d=a.call(b,d,e);if(null==c||d<c)c=d});return c},partition:function(a,b){a=a||Prototype.K;var c=[],d=[];this.each(function(e,h){(a.call(b,e,h)?c:d).push(e)});return[c,d]},pluck:function(a){var b=[];this.each(function(c){b.push(c[a])});return b},reject:function(a,b){var c=
[];this.each(function(d,e){a.call(b,d,e)||c.push(d)});return c},sortBy:function(a,b){return this.map(function(c,d){return{value:c,criteria:a.call(b,c,d)}}).sort(function(a,b){a=a.criteria;b=b.criteria;return a<b?-1:a>b?1:0}).pluck("value")},toArray:h,entries:h,zip:function(){var a=Prototype.K,b=$A(arguments);Object.isFunction(b.last())&&(a=b.pop());var c=[this].concat(b).map($A);return this.map(function(b,d){return a(c.pluck(d))})},size:function(){return this.toArray().length},inspect:function(){return"#<Enumerable:"+
this.toArray().inspect()+">"},find:d}}();function $A(a){if(!a)return[];if("toArray"in Object(a))return a.toArray();for(var b=a.length||0,c=Array(b);b--;)c[b]=a[b];return c}function $w(a){return Object.isString(a)?(a=a.strip())?a.split(/\s+/):[]:[]}Array.from=$A;
(function(){function a(a){for(var b=0,c=this.length;b<c;b++)a(this[b])}function b(){return h.call(this,0)}function c(a,b){b||(b=0);var c=this.length;for(0>b&&(b=c+b);b<c;b++)if(this[b]===a)return b;return-1}function d(a,b){b=isNaN(b)?this.length:(0>b?this.length+b:b)+1;a=this.slice(0,b).reverse().indexOf(a);return 0>a?a:b-a-1}function e(){for(var a=h.call(this,0),b,c=0,d=arguments.length;c<d;c++)if(b=arguments[c],!Object.isArray(b)||"callee"in b)a.push(b);else for(var e=0,f=b.length;e<f;e++)a.push(b[e]);
return a}var f=Array.prototype,h=f.slice,l=f.forEach;l||(l=a);Object.extend(f,Enumerable);f._reverse||(f._reverse=f.reverse);Object.extend(f,{_each:l,clear:function(){this.length=0;return this},first:function(){return this[0]},last:function(){return this[this.length-1]},compact:function(){return this.select(function(a){return null!=a})},flatten:function(){return this.inject([],function(a,b){if(Object.isArray(b))return a.concat(b.flatten());a.push(b);return a})},without:function(){var a=h.call(arguments,
0);return this.select(function(b){return!a.include(b)})},reverse:function(a){return(!1===a?this.toArray():this)._reverse()},uniq:function(a){return this.inject([],function(b,c,d){0!=d&&(a?b.last()==c:b.include(c))||b.push(c);return b})},intersect:function(a){return this.uniq().findAll(function(b){return a.detect(function(a){return b===a})})},clone:b,toArray:b,size:function(){return this.length},inspect:function(){return"["+this.map(Object.inspect).join(", ")+"]"}});(function(){return 1!==[].concat(arguments)[0][0]})(1,
2)&&(f.concat=e);f.indexOf||(f.indexOf=c);f.lastIndexOf||(f.lastIndexOf=d)})();function $H(a){return new Hash(a)}
var Hash=Class.create(Enumerable,function(){function a(){return Object.clone(this._object)}function b(a,b){return Object.isUndefined(b)?a:a+"="+encodeURIComponent(String.interpret(b))}return{initialize:function(a){this._object=Object.isHash(a)?a.toObject():Object.clone(a)},_each:function(a){for(var b in this._object){var c=this._object[b],f=[b,c];f.key=b;f.value=c;a(f)}},set:function(a,b){return this._object[a]=b},get:function(a){if(this._object[a]!==Object.prototype[a])return this._object[a]},unset:function(a){var b=
this._object[a];delete this._object[a];return b},toObject:a,toTemplateReplacements:a,keys:function(){return this.pluck("key")},values:function(){return this.pluck("value")},index:function(a){var b=this.detect(function(b){return b.value===a});return b&&b.key},merge:function(a){return this.clone().update(a)},update:function(a){return(new Hash(a)).inject(this,function(a,b){a.set(b.key,b.value);return a})},toQueryString:function(){return this.inject([],function(a,d){var c=encodeURIComponent(d.key);if((d=
d.value)&&"object"==typeof d){if(Object.isArray(d))return a.concat(d.map(b.curry(c)))}else a.push(b(c,d));return a}).join("&")},inspect:function(){return"#<Hash:{"+this.map(function(a){return a.map(Object.inspect).join(": ")}).join(", ")+"}>"},toJSON:a,clone:function(){return new Hash(this)}}}());Hash.from=$H;
Object.extend(Number.prototype,function(){return{toColorPart:function(){return this.toPaddedString(2,16)},succ:function(){return this+1},times:function(a,b){$R(0,this,!0).each(a,b);return this},toPaddedString:function(a,b){b=this.toString(b||10);return"0".times(a-b.length)+b},abs:function(){return Math.abs(this)},round:function(){return Math.round(this)},ceil:function(){return Math.ceil(this)},floor:function(){return Math.floor(this)}}}());function $R(a,b,c){return new ObjectRange(a,b,c)}
var ObjectRange=Class.create(Enumerable,function(){return{initialize:function(a,b,c){this.start=a;this.end=b;this.exclusive=c},_each:function(a){for(var b=this.start;this.include(b);)a(b),b=b.succ()},include:function(a){return a<this.start?!1:this.exclusive?a<this.end:a<=this.end}}}()),Ajax={getTransport:function(){return Try.these(function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")})||!1},activeRequestCount:0,
Responders:{responders:[],_each:function(a){this.responders._each(a)},register:function(a){this.include(a)||this.responders.push(a)},unregister:function(a){this.responders=this.responders.without(a)},dispatch:function(a,b,c,d){this.each(function(e){if(Object.isFunction(e[a]))try{e[a].apply(e,[b,c,d])}catch(f){}})}}};Object.extend(Ajax.Responders,Enumerable);Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++},onComplete:function(){Ajax.activeRequestCount--}});
Ajax.Base=Class.create({initialize:function(a){this.options={method:"post",asynchronous:!0,contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:"",evalJSON:!0,evalJS:!0};Object.extend(this.options,a||{});this.options.method=this.options.method.toLowerCase();Object.isHash(this.options.parameters)&&(this.options.parameters=this.options.parameters.toObject())}});
Ajax.Request=Class.create(Ajax.Base,{_complete:!1,initialize:function($super,b,c){$super(c);this.transport=Ajax.getTransport();this.request(b)},request:function(a){this.url=a;this.method=this.options.method;a=Object.isString(this.options.parameters)?this.options.parameters:Object.toQueryString(this.options.parameters);["get","post"].include(this.method)||(a+=(a?"&":"")+"_method="+this.method,this.method="post");a&&("get"==this.method?this.url+=(this.url.include("?")?"&":"?")+a:/Konqueror|Safari|KHTML/.test(navigator.userAgent)&&
(a+="&_="));this.parameters=a.toQueryParams();try{var b=new Ajax.Response(this);if(this.options.onCreate)this.options.onCreate(b);Ajax.Responders.dispatch("onCreate",this,b);this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous);this.options.asynchronous&&this.respondToReadyState.bind(this).defer(1);this.transport.onreadystatechange=this.onStateChange.bind(this);this.setRequestHeaders();this.body="post"==this.method?this.options.postBody||a:null;this.transport.send(this.body);
if(!this.options.asynchronous&&this.transport.overrideMimeType)this.onStateChange()}catch(c){this.dispatchException(c)}},onStateChange:function(){var a=this.transport.readyState;1<a&&(4!=a||!this._complete)&&this.respondToReadyState(this.transport.readyState)},setRequestHeaders:function(){var a={"X-Requested-With":"XMLHttpRequest","X-Prototype-Version":Prototype.Version,Accept:"text/javascript, text/html, application/xml, text/xml, */*"};"post"==this.method&&(a["Content-type"]=this.options.contentType+
(this.options.encoding?"; charset="+this.options.encoding:""),this.transport.overrideMimeType&&2005>(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]&&(a.Connection="close"));if("object"==typeof this.options.requestHeaders){var b=this.options.requestHeaders;if(Object.isFunction(b.push))for(var c=0,d=b.length;c<d;c+=2)a[b[c]]=b[c+1];else $H(b).each(function(b){a[b.key]=b.value})}for(var e in a)this.transport.setRequestHeader(e,a[e])},success:function(){var a=this.getStatus();return!a||200<=
a&&300>a},getStatus:function(){try{return this.transport.status||0}catch(a){return 0}},respondToReadyState:function(a){a=Ajax.Request.Events[a];var b=new Ajax.Response(this);if("Complete"==a){try{this._complete=!0,(this.options["on"+b.status]||this.options["on"+(this.success()?"Success":"Failure")]||Prototype.emptyFunction)(b,b.headerJSON)}catch(d){this.dispatchException(d)}var c=b.getHeader("Content-type");("force"==this.options.evalJS||this.options.evalJS&&this.isSameOrigin()&&c&&c.match(/^\s*(text|application)\/(x-)?(java|ecma)script(;.*)?\s*$/i))&&
this.evalResponse()}try{(this.options["on"+a]||Prototype.emptyFunction)(b,b.headerJSON),Ajax.Responders.dispatch("on"+a,this,b,b.headerJSON)}catch(d){this.dispatchException(d)}"Complete"==a&&(this.transport.onreadystatechange=Prototype.emptyFunction)},isSameOrigin:function(){var a=this.url.match(/^\s*https?:\/\/[^\/]*/);return!a||a[0]=="#{protocol}//#{domain}#{port}".interpolate({protocol:location.protocol,domain:document.domain,port:location.port?":"+location.port:""})},getHeader:function(a){try{return this.transport.getResponseHeader(a)||
null}catch(b){return null}},evalResponse:function(){try{return eval((this.transport.responseText||"").unfilterJSON())}catch(a){this.dispatchException(a)}},dispatchException:function(a){(this.options.onException||Prototype.emptyFunction)(this,a);Ajax.Responders.dispatch("onException",this,a)}});Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"];
Ajax.Response=Class.create({initialize:function(a){this.request=a;a=this.transport=a.transport;var b=this.readyState=a.readyState;if(2<b&&!Prototype.Browser.IE||4==b)this.status=this.getStatus(),this.statusText=this.getStatusText(),this.responseText=String.interpret(a.responseText),this.headerJSON=this._getHeaderJSON();4==b&&(a=a.responseXML,this.responseXML=Object.isUndefined(a)?null:a,this.responseJSON=this._getResponseJSON())},status:0,statusText:"",getStatus:Ajax.Request.prototype.getStatus,getStatusText:function(){try{return this.transport.statusText||
""}catch(a){return""}},getHeader:Ajax.Request.prototype.getHeader,getAllHeaders:function(){try{return this.getAllResponseHeaders()}catch(a){return null}},getResponseHeader:function(a){return this.transport.getResponseHeader(a)},getAllResponseHeaders:function(){return this.transport.getAllResponseHeaders()},_getHeaderJSON:function(){var a=this.getHeader("X-JSON");if(!a)return null;a=decodeURIComponent(escape(a));try{return a.evalJSON(this.request.options.sanitizeJSON||!this.request.isSameOrigin())}catch(b){this.request.dispatchException(b)}},
_getResponseJSON:function(){var a=this.request.options;if(!a.evalJSON||"force"!=a.evalJSON&&!(this.getHeader("Content-type")||"").include("application/json")||this.responseText.blank())return null;try{return this.responseText.evalJSON(a.sanitizeJSON||!this.request.isSameOrigin())}catch(b){this.request.dispatchException(b)}}});
Ajax.Updater=Class.create(Ajax.Request,{initialize:function($super,b,c,d){this.container={success:b.success||b,failure:b.failure||(b.success?null:b)};d=Object.clone(d);var e=d.onComplete;d.onComplete=function(b,c){this.updateContent(b.responseText);Object.isFunction(e)&&e(b,c)}.bind(this);$super(c,d)},updateContent:function(a){var b=this.container[this.success()?"success":"failure"],c=this.options;c.evalScripts||(a=a.stripScripts());if(b=$(b))if(c.insertion)if(Object.isString(c.insertion)){var d=
{};d[c.insertion]=a;b.insert(d)}else c.insertion(b,a);else b.update(a)}});
Ajax.PeriodicalUpdater=Class.create(Ajax.Base,{initialize:function($super,b,c,d){$super(d);this.onComplete=this.options.onComplete;this.frequency=this.options.frequency||2;this.decay=this.options.decay||1;this.updater={};this.container=b;this.url=c;this.start()},start:function(){this.options.onComplete=this.updateComplete.bind(this);this.onTimerEvent()},stop:function(){this.updater.options.onComplete=void 0;clearTimeout(this.timer);(this.onComplete||Prototype.emptyFunction).apply(this,arguments)},
updateComplete:function(a){this.options.decay&&(this.decay=a.responseText==this.lastText?this.decay*this.options.decay:1,this.lastText=a.responseText);this.timer=this.onTimerEvent.bind(this).delay(this.decay*this.frequency)},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options)}});
function $(a){if(1<arguments.length){for(var b=0,c=[],d=arguments.length;b<d;b++)c.push($(arguments[b]));return c}Object.isString(a)&&(a=document.getElementById(a));return Element.extend(a)}Prototype.BrowserFeatures.XPath&&(document._getElementsByXPath=function(a,b){var c=[];a=document.evaluate(a,$(b)||document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);b=0;for(var d=a.snapshotLength;b<d;b++)c.push(Element.extend(a.snapshotItem(b)));return c});if(!Node)var Node={};
Node.ELEMENT_NODE||Object.extend(Node,{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12});
(function(a){var b=function(){try{var a=document.createElement('<input name="x">');return"input"===a.tagName.toLowerCase()&&"x"===a.name}catch(e){return!1}}(),c=a.Element;a.Element=function(a,c){c=c||{};a=a.toLowerCase();var d=Element.cache;if(b&&c.name)return a="<"+a+' name="'+c.name+'">',delete c.name,Element.writeAttribute(document.createElement(a),c);d[a]||(d[a]=Element.extend(document.createElement(a)));a="type"in c?document.createElement(a):d[a].cloneNode(!1);return Element.writeAttribute(a,
c)};Object.extend(a.Element,c||{});c&&(a.Element.prototype=c.prototype)})(this);Element.idCounter=1;Element.cache={};Element._purgeElement=function(a){var b=a._prototypeUID;b&&(Element.stopObserving(a),a._prototypeUID=void 0,delete Element.Storage[b])};
Element.Methods={visible:function(a){return"none"!=$(a).style.display},toggle:function(a){a=$(a);Element[Element.visible(a)?"hide":"show"](a);return a},hide:function(a){a=$(a);a.style.display="none";return a},show:function(a){a=$(a);a.style.display="";return a},remove:function(a){a=$(a);a.parentNode.removeChild(a);return a},update:function(){var a=function(){var a=document.createElement("select"),b=!0;a.innerHTML='<option value="test">test</option>';a.options&&a.options[0]&&(b="OPTION"!==a.options[0].nodeName.toUpperCase());
return b}(),b=function(){try{var a=document.createElement("table");if(a&&a.tBodies)return a.innerHTML="<tbody><tr><td>test</td></tr></tbody>","undefined"==typeof a.tBodies[0]}catch(e){return!0}}(),c=function(){var a=document.createElement("script"),b=!1;try{a.appendChild(document.createTextNode("")),b=!a.firstChild||a.firstChild&&3!==a.firstChild.nodeType}catch(f){b=!0}return b}();return function(d,e){d=$(d);for(var f=Element._purgeElement,h=d.getElementsByTagName("*"),l=h.length;l--;)f(h[l]);e&&
e.toElement&&(e=e.toElement());if(Object.isElement(e))return d.update().insert(e);e=Object.toHTML(e);f=d.tagName.toUpperCase();if("SCRIPT"===f&&c)return d.text=e,d;if(a||b)if(f in Element._insertionTranslations.tags){for(;d.firstChild;)d.removeChild(d.firstChild);Element._getContentFromAnonymousElement(f,e.stripScripts()).each(function(a){d.appendChild(a)})}else d.innerHTML=e.stripScripts();else d.innerHTML=e.stripScripts();e.evalScripts.bind(e).defer();return d}}(),replace:function(a,b){a=$(a);if(b&&
b.toElement)b=b.toElement();else if(!Object.isElement(b)){b=Object.toHTML(b);var c=a.ownerDocument.createRange();c.selectNode(a);b.evalScripts.bind(b).defer();b=c.createContextualFragment(b.stripScripts())}a.parentNode.replaceChild(b,a);return a},insert:function(a,b){a=$(a);if(Object.isString(b)||Object.isNumber(b)||Object.isElement(b)||b&&(b.toElement||b.toHTML))b={bottom:b};for(d in b){var c=b[d];var d=d.toLowerCase();var e=Element._insertionTranslations[d];c&&c.toElement&&(c=c.toElement());if(Object.isElement(c))e(a,
c);else{c=Object.toHTML(c);var f=("before"==d||"after"==d?a.parentNode:a).tagName.toUpperCase();f=Element._getContentFromAnonymousElement(f,c.stripScripts());"top"!=d&&"after"!=d||f.reverse();f.each(e.curry(a));c.evalScripts.bind(c).defer()}}return a},wrap:function(a,b,c){a=$(a);Object.isElement(b)?$(b).writeAttribute(c||{}):b=Object.isString(b)?new Element(b,c):new Element("div",b);a.parentNode&&a.parentNode.replaceChild(b,a);b.appendChild(a);return b},inspect:function(a){a=$(a);var b="<"+a.tagName.toLowerCase();
$H({id:"id",className:"class"}).each(function(c){var d=c.first();c=c.last();(d=(a[d]||"").toString())&&(b+=" "+c+"="+d.inspect(!0))});return b+">"},recursivelyCollect:function(a,b,c){a=$(a);c=c||-1;for(var d=[];(a=a[b])&&(1==a.nodeType&&d.push(Element.extend(a)),d.length!=c););return d},ancestors:function(a){return Element.recursivelyCollect(a,"parentNode")},descendants:function(a){return Element.select(a,"*")},firstDescendant:function(a){for(a=$(a).firstChild;a&&1!=a.nodeType;)a=a.nextSibling;return $(a)},
immediateDescendants:function(a){var b=[];for(a=$(a).firstChild;a;)1===a.nodeType&&b.push(Element.extend(a)),a=a.nextSibling;return b},previousSiblings:function(a,b){return Element.recursivelyCollect(a,"previousSibling")},nextSiblings:function(a){return Element.recursivelyCollect(a,"nextSibling")},siblings:function(a){a=$(a);return Element.previousSiblings(a).reverse().concat(Element.nextSiblings(a))},match:function(a,b){a=$(a);return Object.isString(b)?Prototype.Selector.match(a,b):b.match(a)},up:function(a,
b,c){a=$(a);if(1==arguments.length)return $(a.parentNode);var d=Element.ancestors(a);return Object.isNumber(b)?d[b]:Prototype.Selector.find(d,b,c)},down:function(a,b,c){a=$(a);return 1==arguments.length?Element.firstDescendant(a):Object.isNumber(b)?Element.descendants(a)[b]:Element.select(a,b)[c||0]},previous:function(a,b,c){a=$(a);Object.isNumber(b)&&(c=b,b=!1);Object.isNumber(c)||(c=0);return b?Prototype.Selector.find(a.previousSiblings(),b,c):a.recursivelyCollect("previousSibling",c+1)[c]},next:function(a,
b,c){a=$(a);Object.isNumber(b)&&(c=b,b=!1);Object.isNumber(c)||(c=0);if(b)return Prototype.Selector.find(a.nextSiblings(),b,c);Object.isNumber(c);return a.recursivelyCollect("nextSibling",c+1)[c]},select:function(a){a=$(a);var b=Array.prototype.slice.call(arguments,1).join(", ");return Prototype.Selector.select(b,a)},adjacent:function(a){a=$(a);var b=Array.prototype.slice.call(arguments,1).join(", ");return Prototype.Selector.select(b,a.parentNode).without(a)},identify:function(a){a=$(a);var b=Element.readAttribute(a,
"id");if(b)return b;do b="anonymous_element_"+Element.idCounter++;while($(b));Element.writeAttribute(a,"id",b);return b},readAttribute:function(a,b){a=$(a);if(Prototype.Browser.IE){var c=Element._attributeTranslations.read;if(c.values[b])return c.values[b](a,b);c.names[b]&&(b=c.names[b]);if(b.include(":"))return a.attributes&&a.attributes[b]?a.attributes[b].value:null}return a.getAttribute(b)},writeAttribute:function(a,b,c){a=$(a);var d={},e=Element._attributeTranslations.write;"object"==typeof b?
d=b:d[b]=Object.isUndefined(c)?!0:c;for(var f in d)b=e.names[f]||f,c=d[f],e.values[f]&&(b=e.values[f](a,c)),!1===c||null===c?a.removeAttribute(b):!0===c?a.setAttribute(b,b):a.setAttribute(b,c);return a},getHeight:function(a){return Element.getDimensions(a).height},getWidth:function(a){return Element.getDimensions(a).width},classNames:function(a){return new Element.ClassNames(a)},hasClassName:function(a,b){if(a=$(a))return a=a.className,0<a.length&&(a==b||(new RegExp("(^|\\s)"+b+"(\\s|$)")).test(a))},
addClassName:function(a,b){if(a=$(a))return Element.hasClassName(a,b)||(a.className+=(a.className?" ":"")+b),a},removeClassName:function(a,b){if(a=$(a))return a.className=a.className.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)")," ").strip(),a},toggleClassName:function(a,b){if(a=$(a))return Element[Element.hasClassName(a,b)?"removeClassName":"addClassName"](a,b)},cleanWhitespace:function(a){a=$(a);for(var b=a.firstChild;b;){var c=b.nextSibling;3!=b.nodeType||/\S/.test(b.nodeValue)||a.removeChild(b);
b=c}return a},empty:function(a){return $(a).innerHTML.blank()},descendantOf:function(a,b){a=$(a);b=$(b);if(a.compareDocumentPosition)return 8===(a.compareDocumentPosition(b)&8);if(b.contains)return b.contains(a)&&b!==a;for(;a=a.parentNode;)if(a==b)return!0;return!1},scrollTo:function(a){a=$(a);var b=Element.cumulativeOffset(a);window.scrollTo(b[0],b[1]);return a},getStyle:function(a,b){a=$(a);b="float"==b?"cssFloat":b.camelize();var c=a.style[b];c&&"auto"!=c||(c=(a=document.defaultView.getComputedStyle(a,
null))?a[b]:null);return"opacity"==b?c?parseFloat(c):1:"auto"==c?null:c},getOpacity:function(a){return $(a).getStyle("opacity")},setStyle:function(a,b){a=$(a);var c=a.style;if(Object.isString(b))return a.style.cssText+=";"+b,b.include("opacity")?a.setOpacity(b.match(/opacity:\s*(\d?\.?\d*)/)[1]):a;for(var d in b)"opacity"==d?a.setOpacity(b[d]):c["float"==d||"cssFloat"==d?Object.isUndefined(c.styleFloat)?"cssFloat":"styleFloat":d]=b[d];return a},setOpacity:function(a,b){a=$(a);a.style.opacity=1==b||
""===b?"":1E-5>b?0:b;return a},makePositioned:function(a){a=$(a);var b=Element.getStyle(a,"position");"static"!=b&&b||(a._madePositioned=!0,a.style.position="relative",Prototype.Browser.Opera&&(a.style.top=0,a.style.left=0));return a},undoPositioned:function(a){a=$(a);a._madePositioned&&(a._madePositioned=void 0,a.style.position=a.style.top=a.style.left=a.style.bottom=a.style.right="");return a},makeClipping:function(a){a=$(a);if(a._overflow)return a;a._overflow=Element.getStyle(a,"overflow")||"auto";
"hidden"!==a._overflow&&(a.style.overflow="hidden");return a},undoClipping:function(a){a=$(a);if(!a._overflow)return a;a.style.overflow="auto"==a._overflow?"":a._overflow;a._overflow=null;return a},clonePosition:function(a,b,c){c=Object.extend({setLeft:!0,setTop:!0,setWidth:!0,setHeight:!0,offsetTop:0,offsetLeft:0},c||{});b=$(b);var d=Element.viewportOffset(b),e=[0,0],f=null;a=$(a);"absolute"==Element.getStyle(a,"position")&&(f=Element.getOffsetParent(a),e=Element.viewportOffset(f));f==document.body&&
(e[0]-=document.body.offsetLeft,e[1]-=document.body.offsetTop);c.setLeft&&(a.style.left=d[0]-e[0]+c.offsetLeft+"px");c.setTop&&(a.style.top=d[1]-e[1]+c.offsetTop+"px");c.setWidth&&(a.style.width=b.offsetWidth+"px");c.setHeight&&(a.style.height=b.offsetHeight+"px");return a}};Object.extend(Element.Methods,{getElementsBySelector:Element.Methods.select,childElements:Element.Methods.immediateDescendants});Element._attributeTranslations={write:{names:{className:"class",htmlFor:"for"},values:{}}};
Prototype.Browser.Opera?(Element.Methods.getStyle=Element.Methods.getStyle.wrap(function(a,b,c){switch(c){case "left":case "top":case "right":case "bottom":if("static"===a(b,"position"))return null;case "height":case "width":if(!Element.visible(b))return null;var d=parseInt(a(b,c),10);return d!==b["offset"+c.capitalize()]?d+"px":("height"===c?["border-top-width","padding-top","padding-bottom","border-bottom-width"]:["border-left-width","padding-left","padding-right","border-right-width"]).inject(d,
function(c,d){d=a(b,d);return null===d?c:c-parseInt(d,10)})+"px";default:return a(b,c)}}),Element.Methods.readAttribute=Element.Methods.readAttribute.wrap(function(a,b,c){return"title"===c?b.title:a(b,c)})):Prototype.Browser.IE?(Element.Methods.getStyle=function(a,b){a=$(a);b="float"==b||"cssFloat"==b?"styleFloat":b.camelize();var c=a.style[b];!c&&a.currentStyle&&(c=a.currentStyle[b]);return"opacity"==b?(c=(a.getStyle("filter")||"").match(/alpha\(opacity=(.*)\)/))&&c[1]?parseFloat(c[1])/100:1:"auto"==
c?"width"!=b&&"height"!=b||"none"==a.getStyle("display")?null:a["offset"+b.capitalize()]+"px":c},Element.Methods.setOpacity=function(a,b){a=$(a);var c=a.currentStyle;if(c&&!c.hasLayout||!c&&"normal"==a.style.zoom)a.style.zoom=1;c=a.getStyle("filter");var d=a.style;if(1==b||""===b)return(c=c.replace(/alpha\([^\)]*\)/gi,""))?d.filter=c:d.removeAttribute("filter"),a;1E-5>b&&(b=0);d.filter=c.replace(/alpha\([^\)]*\)/gi,"")+"alpha(opacity="+100*b+")";return a},Element._attributeTranslations=function(){var a=
"className",b="for",c=document.createElement("div");c.setAttribute(a,"x");"x"!==c.className&&(c.setAttribute("class","x"),"x"===c.className&&(a="class"));c=null;c=document.createElement("label");c.setAttribute(b,"x");"x"!==c.htmlFor&&(c.setAttribute("htmlFor","x"),"x"===c.htmlFor&&(b="htmlFor"));c=null;return{read:{names:{"class":a,className:a,"for":b,htmlFor:b},values:{_getAttr:function(a,b){return a.getAttribute(b)},_getAttr2:function(a,b){return a.getAttribute(b,2)},_getAttrNode:function(a,b){return(a=
a.getAttributeNode(b))?a.value:""},_getEv:function(){var a=document.createElement("div"),b;a.onclick=Prototype.emptyFunction;a=a.getAttribute("onclick");-1<String(a).indexOf("{")?b=function(a,b){b=a.getAttribute(b);if(!b)return null;b=b.toString();b=b.split("{")[1];b=b.split("}")[0];return b.strip()}:""===a&&(b=function(a,b){return(b=a.getAttribute(b))?b.strip():null});a=null;return b}(),_flag:function(a,b){return $(a).hasAttribute(b)?b:null},style:function(a){return a.style.cssText.toLowerCase()},
title:function(a){return a.title}}}}}(),Element._attributeTranslations.write={names:Object.extend({cellpadding:"cellPadding",cellspacing:"cellSpacing"},Element._attributeTranslations.read.names),values:{checked:function(a,b){a.checked=!!b},style:function(a,b){a.style.cssText=b?b:""}}},Element._attributeTranslations.has={},$w("colSpan rowSpan vAlign dateTime accessKey tabIndex encType maxLength readOnly longDesc frameBorder").each(function(a){Element._attributeTranslations.write.names[a.toLowerCase()]=
a;Element._attributeTranslations.has[a.toLowerCase()]=a}),function(a){Object.extend(a,{href:a._getAttr2,src:a._getAttr2,type:a._getAttr,action:a._getAttrNode,disabled:a._flag,checked:a._flag,readonly:a._flag,multiple:a._flag,onload:a._getEv,onunload:a._getEv,onclick:a._getEv,ondblclick:a._getEv,onmousedown:a._getEv,onmouseup:a._getEv,onmouseover:a._getEv,onmousemove:a._getEv,onmouseout:a._getEv,onfocus:a._getEv,onblur:a._getEv,onkeypress:a._getEv,onkeydown:a._getEv,onkeyup:a._getEv,onsubmit:a._getEv,
onreset:a._getEv,onselect:a._getEv,onchange:a._getEv})}(Element._attributeTranslations.read.values),Prototype.BrowserFeatures.ElementExtensions&&function(){Element.Methods.down=function(a,b,c){a=$(a);if(1==arguments.length)return a.firstDescendant();if(Object.isNumber(b)){var d=a.getElementsByTagName("*");for(var e=[],f=0,h;h=d[f];f++)"!"!==h.tagName&&e.push(h);d=e[b]}else d=Element.select(a,b)[c||0];return d}}()):Prototype.Browser.Gecko&&/rv:1\.8\.0/.test(navigator.userAgent)?Element.Methods.setOpacity=
function(a,b){a=$(a);a.style.opacity=1==b?.999999:""===b?"":1E-5>b?0:b;return a}:Prototype.Browser.WebKit&&(Element.Methods.setOpacity=function(a,b){a=$(a);a.style.opacity=1==b||""===b?"":1E-5>b?0:b;if(1==b)if("IMG"==a.tagName.toUpperCase()&&a.width)a.width++,a.width--;else try{var c=document.createTextNode(" ");a.appendChild(c);a.removeChild(c)}catch(d){}return a});
"outerHTML"in document.documentElement&&(Element.Methods.replace=function(a,b){a=$(a);b&&b.toElement&&(b=b.toElement());if(Object.isElement(b))return a.parentNode.replaceChild(b,a),a;b=Object.toHTML(b);var c=a.parentNode,d=c.tagName.toUpperCase();if(Element._insertionTranslations.tags[d]){var e=a.next();d=Element._getContentFromAnonymousElement(d,b.stripScripts());c.removeChild(a);e?d.each(function(a){c.insertBefore(a,e)}):d.each(function(a){c.appendChild(a)})}else a.outerHTML=b.stripScripts();b.evalScripts.bind(b).defer();
return a});Element._returnOffset=function(a,b){var c=[a,b];c.left=a;c.top=b;return c};Element._getContentFromAnonymousElement=function(a,b){var c=new Element("div");if(a=Element._insertionTranslations.tags[a])for(c.innerHTML=a[0]+b+a[1],b=a[2];b--;)c=c.firstChild;else c.innerHTML=b;return $A(c.childNodes)};
Element._insertionTranslations={before:function(a,b){a.parentNode.insertBefore(b,a)},top:function(a,b){a.insertBefore(b,a.firstChild)},bottom:function(a,b){a.appendChild(b)},after:function(a,b){a.parentNode.insertBefore(b,a.nextSibling)},tags:{TABLE:["<table>","</table>",1],TBODY:["<table><tbody>","</tbody></table>",2],TR:["<table><tbody><tr>","</tr></tbody></table>",3],TD:["<table><tbody><tr><td>","</td></tr></tbody></table>",4],SELECT:["<select>","</select>",1]}};
(function(){var a=Element._insertionTranslations.tags;Object.extend(a,{THEAD:a.TBODY,TFOOT:a.TBODY,TH:a.TD})})();Element.Methods.Simulated={hasAttribute:function(a,b){b=Element._attributeTranslations.has[b]||b;a=$(a).getAttributeNode(b);return!(!a||!a.specified)}};Element.Methods.ByTag={};Object.extend(Element,Element.Methods);
(function(a){!Prototype.BrowserFeatures.ElementExtensions&&a.__proto__&&(window.HTMLElement={},window.HTMLElement.prototype=a.__proto__,Prototype.BrowserFeatures.ElementExtensions=!0)})(document.createElement("div"));
Element.extend=function(){function a(a,b){for(var c in b){var d=b[c];!Object.isFunction(d)||c in a||(a[c]=d.methodize())}}var b=function(a){if("undefined"!=typeof window.Element){var b=window.Element.prototype;if(b){var c="_"+(Math.random()+"").slice(2);a=document.createElement(a);b[c]="x";a="x"!==a[c];delete b[c];return a}}return!1}("object");if(Prototype.BrowserFeatures.SpecificElementExtensions)return b?function(b){if(b&&"undefined"==typeof b._extendedByPrototype){var c=b.tagName;c&&/^(?:object|applet|embed)$/i.test(c)&&
(a(b,Element.Methods),a(b,Element.Methods.Simulated),a(b,Element.Methods.ByTag[c.toUpperCase()]))}return b}:Prototype.K;var c={},d=Element.Methods.ByTag;b=Object.extend(function(b){if(!b||"undefined"!=typeof b._extendedByPrototype||1!=b.nodeType||b==window)return b;var e=Object.clone(c),h=b.tagName.toUpperCase();d[h]&&Object.extend(e,d[h]);a(b,e);b._extendedByPrototype=Prototype.emptyFunction;return b},{refresh:function(){Prototype.BrowserFeatures.ElementExtensions||(Object.extend(c,Element.Methods),
Object.extend(c,Element.Methods.Simulated))}});b.refresh();return b}();Element.hasAttribute=document.documentElement.hasAttribute?function(a,b){return a.hasAttribute(b)}:Element.Methods.Simulated.hasAttribute;
Element.addMethods=function(a){function b(b){b=b.toUpperCase();Element.Methods.ByTag[b]||(Element.Methods.ByTag[b]={});Object.extend(Element.Methods.ByTag[b],a)}function c(a,b,c){c=c||!1;for(var d in a){var e=a[d];Object.isFunction(e)&&(c&&d in b||(b[d]=e.methodize()))}}function d(a){var b,c={OPTGROUP:"OptGroup",TEXTAREA:"TextArea",P:"Paragraph",FIELDSET:"FieldSet",UL:"UList",OL:"OList",DL:"DList",DIR:"Directory",H1:"Heading",H2:"Heading",H3:"Heading",H4:"Heading",H5:"Heading",H6:"Heading",Q:"Quote",
INS:"Mod",DEL:"Mod",A:"Anchor",IMG:"Image",CAPTION:"TableCaption",COL:"TableCol",COLGROUP:"TableCol",THEAD:"TableSection",TFOOT:"TableSection",TBODY:"TableSection",TR:"TableRow",TH:"TableCell",TD:"TableCell",FRAMESET:"FrameSet",IFRAME:"IFrame"};c[a]&&(b="HTML"+c[a]+"Element");if(window[b])return window[b];b="HTML"+a+"Element";if(window[b])return window[b];b="HTML"+a.capitalize()+"Element";if(window[b])return window[b];a=document.createElement(a);return a.__proto__||a.constructor.prototype}var e=Prototype.BrowserFeatures,
f=Element.Methods.ByTag;a||(Object.extend(Form,Form.Methods),Object.extend(Form.Element,Form.Element.Methods),Object.extend(Element.Methods.ByTag,{FORM:Object.clone(Form.Methods),INPUT:Object.clone(Form.Element.Methods),SELECT:Object.clone(Form.Element.Methods),TEXTAREA:Object.clone(Form.Element.Methods)}));if(2==arguments.length){var h=a;a=arguments[1]}h?Object.isArray(h)?h.each(b):b(h):Object.extend(Element.Methods,a||{});h=window.HTMLElement?HTMLElement.prototype:Element.prototype;e.ElementExtensions&&
(c(Element.Methods,h),c(Element.Methods.Simulated,h,!0));if(e.SpecificElementExtensions)for(var l in Element.Methods.ByTag)e=d(l),Object.isUndefined(e)||c(f[l],e.prototype);Object.extend(Element,Element.Methods);delete Element.ByTag;Element.extend.refresh&&Element.extend.refresh();Element.cache={}};
document.viewport={getDimensions:function(){return{width:this.getWidth(),height:this.getHeight()}},getScrollOffsets:function(){return Element._returnOffset(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)}};
(function(a){function b(b){e||(e=c.WebKit&&!d.evaluate?document:c.Opera&&9.5>window.parseFloat(window.opera.version())?document.body:document.documentElement);f[b]="client"+b;a["get"+b]=function(){return e[f[b]]};return a["get"+b]()}var c=Prototype.Browser,d=document,e,f={};a.getWidth=b.curry("Width");a.getHeight=b.curry("Height")})(document.viewport);Element.Storage={UID:1};
Element.addMethods({getStorage:function(a){if(a=$(a))return a===window?a=0:("undefined"===typeof a._prototypeUID&&(a._prototypeUID=Element.Storage.UID++),a=a._prototypeUID),Element.Storage[a]||(Element.Storage[a]=$H()),Element.Storage[a]},store:function(a,b,c){if(a=$(a))return 2===arguments.length?Element.getStorage(a).update(b):Element.getStorage(a).set(b,c),a},retrieve:function(a,b,c){if(a=$(a)){a=Element.getStorage(a);var d=a.get(b);Object.isUndefined(d)&&(a.set(b,c),d=c);return d}},clone:function(a,
b){if(a=$(a)){a=a.cloneNode(b);a._prototypeUID=void 0;if(b){b=Element.select(a,"*");for(var c=b.length;c--;)b[c]._prototypeUID=void 0}return Element.extend(a)}},purge:function(a){if(a=$(a)){var b=Element._purgeElement;b(a);a=a.getElementsByTagName("*");for(var c=a.length;c--;)b(a[c]);return null}}});
(function(){function a(a,b,c){var d=null;Object.isElement(a)&&(d=a,a=d.getStyle(b));if(null===a)return null;if(/^(?:-)?\d+(\.\d+)?(px)?$/i.test(a))return window.parseFloat(a);var e=a.include("%"),h=c===document.viewport;return!(/\d/.test(a)&&d&&d.runtimeStyle)||e&&h?d&&e?(c=c||d.parentNode,a=(a=a.match(/^(\d+)%?$/i))?Number(a[1])/100:null,e=null,d.getStyle("position"),d=b.include("left")||b.include("right")||b.include("width"),b=b.include("top")||b.include("bottom")||b.include("height"),c===document.viewport?
d?e=document.viewport.getWidth():b&&(e=document.viewport.getHeight()):d?e=$(c).measure("width"):b&&(e=$(c).measure("height")),null===e?0:e*a):0:(c=d.style.left,b=d.runtimeStyle.left,d.runtimeStyle.left=d.currentStyle.left,d.style.left=a||0,a=d.style.pixelLeft,d.style.left=c,d.runtimeStyle.left=b,a)}function b(a){if(e(a))return $(document.body);if("inline"!==Element.getStyle(a,"display")&&a.offsetParent)return $(a.offsetParent);if(a===document.body)return $(a);for(;(a=a.parentNode)&&a!==document.body;)if("static"!==
Element.getStyle(a,"position"))return"HTML"===a.nodeName?$(document.body):$(a);return $(document.body)}function c(a){var b=0,c=0;if(a.parentNode){do b+=a.offsetTop||0,c+=a.offsetLeft||0,a=a.offsetParent;while(a)}return new Element.Offset(c,b)}function d(a){var b=a.getLayout(),c=0,d=0;do if(c+=a.offsetTop||0,d+=a.offsetLeft||0,a=a.offsetParent){if("BODY"===a.nodeName.toUpperCase())break;if("static"!==Element.getStyle(a,"position"))break}while(a);d-=b.get("margin-top");c-=b.get("margin-left");return new Element.Offset(d,
c)}function e(a){return a!==document.body&&!Element.descendantOf(a,document.body)}var f=Prototype.K;"currentStyle"in document.documentElement&&(f=function(a){a.currentStyle.hasLayout||(a.style.zoom=1);return a});Element.Layout=Class.create(Hash,{initialize:function($super,a,b){$super();this.element=$(a);Element.Layout.PROPERTIES.each(function(a){this._set(a,null)},this);b&&(this._preComputing=!0,this._begin(),Element.Layout.PROPERTIES.each(this._compute,this),this._end(),this._preComputing=!1)},_set:function(a,
b){return Hash.prototype.set.call(this,a,b)},set:function(a,b){throw"Properties of Element.Layout are read-only.";},get:function($super,a){var b=$super(a);return null===b?this._compute(a):b},_begin:function(){if(!this._prepared){var b=this.element,c;a:{for(c=b;c&&c.parentNode;){if("none"===c.getStyle("display")){c=!1;break a}c=$(c.parentNode)}c=!0}if(!c){b.store("prototype_original_styles",{position:b.style.position||"",width:b.style.width||"",visibility:b.style.visibility||"",display:b.style.display||
""});c=b.getStyle("position");var d=b.getStyle("width"),e="fixed"===c?document.viewport:b.parentNode;b.setStyle({position:"absolute",visibility:"hidden",display:"block"});var f=b.getStyle("width");c=d&&f===d?a(b,"width",e):"absolute"===c||"fixed"===c?a(b,"width",e):$(b.parentNode).getLayout().get("width")-this.get("margin-left")-this.get("border-left")-this.get("padding-left")-this.get("padding-right")-this.get("border-right")-this.get("margin-right");b.setStyle({width:c+"px"})}this._prepared=!0}},
_end:function(){var a=this.element,b=a.retrieve("prototype_original_styles");a.store("prototype_original_styles",null);a.setStyle(b);this._prepared=!1},_compute:function(a){var b=Element.Layout.COMPUTATIONS;if(!(a in b))throw"Property not found.";return this._set(a,b[a].call(this,this.element))},toObject:function(){var a=$A(arguments),b={};(0===a.length?Element.Layout.PROPERTIES:a.join(" ").split(" ")).each(function(a){if(Element.Layout.PROPERTIES.include(a)){var c=this.get(a);null!=c&&(b[a]=c)}},
this);return b},toHash:function(){var a=this.toObject.apply(this,arguments);return new Hash(a)},toCSS:function(){var a=$A(arguments),b={};(0===a.length?Element.Layout.PROPERTIES:a.join(" ").split(" ")).each(function(a){if(Element.Layout.PROPERTIES.include(a)&&!Element.Layout.COMPOSITE_PROPERTIES.include(a)){var c=this.get(a);null!=c&&(a.include("border")&&(a+="-width"),a=a.camelize(),b[a]=c+"px")}},this);return b},inspect:function(){return"#<Element.Layout>"}});Object.extend(Element.Layout,{PROPERTIES:$w("height width top left right bottom border-left border-right border-top border-bottom padding-left padding-right padding-top padding-bottom margin-top margin-bottom margin-left margin-right padding-box-width padding-box-height border-box-width border-box-height margin-box-width margin-box-height"),
COMPOSITE_PROPERTIES:$w("padding-box-width padding-box-height margin-box-width margin-box-height border-box-width border-box-height"),COMPUTATIONS:{height:function(a){this._preComputing||this._begin();a=this.get("border-box-height");if(0>=a)return this._preComputing||this._end(),0;var b=this.get("border-top"),c=this.get("border-bottom"),d=this.get("padding-top"),e=this.get("padding-bottom");this._preComputing||this._end();return a-b-c-d-e},width:function(a){this._preComputing||this._begin();a=this.get("border-box-width");
if(0>=a)return this._preComputing||this._end(),0;var b=this.get("border-left"),c=this.get("border-right"),d=this.get("padding-left"),e=this.get("padding-right");this._preComputing||this._end();return a-b-c-d-e},"padding-box-height":function(a){a=this.get("height");var b=this.get("padding-top"),c=this.get("padding-bottom");return a+b+c},"padding-box-width":function(a){a=this.get("width");var b=this.get("padding-left"),c=this.get("padding-right");return a+b+c},"border-box-height":function(a){this._preComputing||
this._begin();a=a.offsetHeight;this._preComputing||this._end();return a},"border-box-width":function(a){this._preComputing||this._begin();a=a.offsetWidth;this._preComputing||this._end();return a},"margin-box-height":function(a){a=this.get("border-box-height");var b=this.get("margin-top"),c=this.get("margin-bottom");return 0>=a?0:a+b+c},"margin-box-width":function(a){a=this.get("border-box-width");var b=this.get("margin-left"),c=this.get("margin-right");return 0>=a?0:a+b+c},top:function(a){return a.positionedOffset().top},
bottom:function(a){var b=a.positionedOffset();a=a.getOffsetParent().measure("height");var c=this.get("border-box-height");return a-c-b.top},left:function(a){return a.positionedOffset().left},right:function(a){var b=a.positionedOffset();a=a.getOffsetParent().measure("width");var c=this.get("border-box-width");return a-c-b.left},"padding-top":function(b){return a(b,"paddingTop")},"padding-bottom":function(b){return a(b,"paddingBottom")},"padding-left":function(b){return a(b,"paddingLeft")},"padding-right":function(b){return a(b,
"paddingRight")},"border-top":function(b){return a(b,"borderTopWidth")},"border-bottom":function(b){return a(b,"borderBottomWidth")},"border-left":function(b){return a(b,"borderLeftWidth")},"border-right":function(b){return a(b,"borderRightWidth")},"margin-top":function(b){return a(b,"marginTop")},"margin-bottom":function(b){return a(b,"marginBottom")},"margin-left":function(b){return a(b,"marginLeft")},"margin-right":function(b){return a(b,"marginRight")}}});"getBoundingClientRect"in document.documentElement&&
Object.extend(Element.Layout.COMPUTATIONS,{right:function(a){var b=f(a.getOffsetParent());a=a.getBoundingClientRect();return(b.getBoundingClientRect().right-a.right).round()},bottom:function(a){var b=f(a.getOffsetParent());a=a.getBoundingClientRect();return(b.getBoundingClientRect().bottom-a.bottom).round()}});Element.Offset=Class.create({initialize:function(a,b){this.left=a.round();this.top=b.round();this[0]=this.left;this[1]=this.top},relativeTo:function(a){return new Element.Offset(this.left-a.left,
this.top-a.top)},inspect:function(){return"#<Element.Offset left: #{left} top: #{top}>".interpolate(this)},toString:function(){return"[#{left}, #{top}]".interpolate(this)},toArray:function(){return[this.left,this.top]}});Prototype.Browser.IE?(b=b.wrap(function(a,b){b=$(b);if(e(b))return $(document.body);var c=b.getStyle("position");if("static"!==c)return a(b);b.setStyle({position:"relative"});a=a(b);b.setStyle({position:c});return a}),d=d.wrap(function(a,b){b=$(b);if(!b.parentNode)return new Element.Offset(0,
0);var c=b.getStyle("position");if("static"!==c)return a(b);var d=b.getOffsetParent();d&&"fixed"===d.getStyle("position")&&f(d);b.setStyle({position:"relative"});a=a(b);b.setStyle({position:c});return a})):Prototype.Browser.Webkit&&(c=function(a){var b=0,c=0;do{b+=a.offsetTop||0;c+=a.offsetLeft||0;if(a.offsetParent==document.body&&"absolute"==Element.getStyle(a,"position"))break;a=a.offsetParent}while(a);return new Element.Offset(c,b)});Element.addMethods({getLayout:function(a,b){return new Element.Layout(a,
b)},measure:function(a,b){return $(a).getLayout().get(b)},getDimensions:function(a){a=$(a);var b=Element.getStyle(a,"display");if(b&&"none"!==b)return{width:a.offsetWidth,height:a.offsetHeight};b=a.style;b={visibility:b.visibility,position:b.position,display:b.display};var c={visibility:"hidden",display:"block"};"fixed"!==b.position&&(c.position="absolute");Element.setStyle(a,c);c={width:a.offsetWidth,height:a.offsetHeight};Element.setStyle(a,b);return c},getOffsetParent:b,cumulativeOffset:c,positionedOffset:d,
cumulativeScrollOffset:function(a){var b=0,c=0;do b+=a.scrollTop||0,c+=a.scrollLeft||0,a=a.parentNode;while(a);return new Element.Offset(c,b)},viewportOffset:function(a){var b=0,c=0,d=document.body,e=a;do if(b+=e.offsetTop||0,c+=e.offsetLeft||0,e.offsetParent==d&&"absolute"==Element.getStyle(e,"position"))break;while(e=e.offsetParent);e=a;do e!=d&&(b-=e.scrollTop||0,c-=e.scrollLeft||0);while(e=e.parentNode);return new Element.Offset(c,b)},absolutize:function(a){a=$(a);if("absolute"===Element.getStyle(a,
"position"))return a;var c=b(a),d=a.viewportOffset();c=c.viewportOffset();d=d.relativeTo(c);c=a.getLayout();a.store("prototype_absolutize_original_styles",{left:a.getStyle("left"),top:a.getStyle("top"),width:a.getStyle("width"),height:a.getStyle("height")});a.setStyle({position:"absolute",top:d.top+"px",left:d.left+"px",width:c.get("width")+"px",height:c.get("height")+"px"});return a},relativize:function(a){a=$(a);if("relative"===Element.getStyle(a,"position"))return a;var b=a.retrieve("prototype_absolutize_original_styles");
b&&a.setStyle(b);return a}});"getBoundingClientRect"in document.documentElement&&Element.addMethods({viewportOffset:function(a){a=$(a);if(e(a))return new Element.Offset(0,0);a=a.getBoundingClientRect();var b=document.documentElement;return new Element.Offset(a.left-b.clientLeft,a.top-b.clientTop)}})})();window.$$=function(){var a=$A(arguments).join(", ");return Prototype.Selector.select(a,document)};
Prototype.Selector=function(){function a(a){for(var b=0,c=a.length;b<c;b++)Element.extend(a[b]);return a}var b=Prototype.K;return{select:function(){throw Error('Method "Prototype.Selector.select" must be defined.');},match:function(){throw Error('Method "Prototype.Selector.match" must be defined.');},find:function(a,b,e){e=e||0;var c=Prototype.Selector.match,d=a.length,l=0,m;for(m=0;m<d;m++)if(c(a[m],b)&&e==l++)return Element.extend(a[m])},extendElements:Element.extend===b?b:a,extendElement:Element.extend}}();
Prototype._original_property=window.Sizzle;
(function(){function a(a,b,c,d,e,f){e="previousSibling"==a&&!f;for(var h=0,v=d.length;h<v;h++){var q=d[h];if(q){e&&1===q.nodeType&&(q.sizcache=c,q.sizset=h);q=q[a];for(var l=!1;q;){if(q.sizcache===c){l=d[q.sizset];break}1!==q.nodeType||f||(q.sizcache=c,q.sizset=h);if(q.nodeName===b){l=q;break}q=q[a]}d[h]=l}}}function b(a,b,c,d,e,f){e="previousSibling"==a&&!f;for(var h=0,v=d.length;h<v;h++){var q=d[h];if(q){e&&1===q.nodeType&&(q.sizcache=c,q.sizset=h);q=q[a];for(var m=!1;q;){if(q.sizcache===c){m=d[q.sizset];
break}if(1===q.nodeType)if(f||(q.sizcache=c,q.sizset=h),"string"!==typeof b){if(q===b){m=!0;break}}else if(0<l.filter(b,[q]).length){m=q;break}q=q[a]}d[h]=m}}}var c=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d=0,e=Object.prototype.toString,f=!1,h=!0;[0,0].sort(function(){h=!1;return 0});var l=function(a,b,d,f){d=d||[];var h=b=b||document;if(1!==b.nodeType&&9!==b.nodeType)return[];if(!a||"string"!==typeof a)return d;
for(var v=[],q,u,w,z,x=!0,V=t(b),Q=a;null!==(c.exec(""),q=c.exec(Q));)if(Q=q[3],v.push(q[1]),q[2]){z=q[3];break}if(1<v.length&&n.exec(a))if(2===v.length&&m.relative[v[0]])u=D(v[0]+v[1],b);else for(u=m.relative[v[0]]?[b]:l(v.shift(),b);v.length;)a=v.shift(),m.relative[a]&&(a+=v.shift()),u=D(a,u);else if(!f&&1<v.length&&9===b.nodeType&&!V&&m.match.ID.test(v[0])&&!m.match.ID.test(v[v.length-1])&&(q=l.find(v.shift(),b,V),b=q.expr?l.filter(q.expr,q.set)[0]:q.set[0]),b)for(q=f?{expr:v.pop(),set:C(f)}:l.find(v.pop(),
1!==v.length||"~"!==v[0]&&"+"!==v[0]||!b.parentNode?b:b.parentNode,V),u=q.expr?l.filter(q.expr,q.set):q.set,0<v.length?w=C(u):x=!1;v.length;){var R=v.pop();q=R;m.relative[R]?q=v.pop():R="";null==q&&(q=b);m.relative[R](w,q,V)}else w=[];w||(w=u);if(!w)throw"Syntax error, unrecognized expression: "+(R||a);if("[object Array]"===e.call(w))if(x)if(b&&1===b.nodeType)for(a=0;null!=w[a];a++)w[a]&&(!0===w[a]||1===w[a].nodeType&&F(b,w[a]))&&d.push(u[a]);else for(a=0;null!=w[a];a++)w[a]&&1===w[a].nodeType&&d.push(u[a]);
else d.push.apply(d,w);else C(w,d);z&&(l(z,h,d,f),l.uniqueSort(d));return d};l.uniqueSort=function(a){if(x&&(f=h,a.sort(x),f))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a};l.matches=function(a,b){return l(a,null,null,b)};l.find=function(a,b,c){var d;if(!a)return[];for(var e=0,f=m.order.length;e<f;e++){var h=m.order[e];if(d=m.leftMatch[h].exec(a)){var v=d[1];d.splice(1,1);if("\\"!==v.substr(v.length-1)){d[1]=(d[1]||"").replace(/\\/g,"");var q=m.find[h](d,b,c);if(null!=q){a=a.replace(m.match[h],
"");break}}}}q||(q=b.getElementsByTagName("*"));return{set:q,expr:a}};l.filter=function(a,b,c,d){for(var e=a,f=[],h=b,v,q,l=b&&b[0]&&t(b[0]);a&&b.length;){for(var n in m.filter)if(null!=(v=m.match[n].exec(a))){var u=m.filter[n],w,z;q=!1;h==f&&(f=[]);if(m.preFilter[n])if(v=m.preFilter[n](v,h,c,f,d,l),!v)q=w=!0;else if(!0===v)continue;if(v)for(var D=0;null!=(z=h[D]);D++)if(z){w=u(z,v,D,h);var x=d^!!w;c&&null!=w?x?q=!0:h[D]=!1:x&&(f.push(z),q=!0)}if(void 0!==w){c||(h=f);a=a.replace(m.match[n],"");if(!q)return[];
break}}if(a==e){if(null==q)throw"Syntax error, unrecognized expression: "+a;break}e=a}return h};var m=l.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,
PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,b,c){var d="string"===typeof b,e=d&&!/\W/.test(b);d=d&&!e;e&&!c&&(b=b.toUpperCase());c=0;e=a.length;for(var f;c<e;c++)if(f=a[c]){for(;(f=f.previousSibling)&&1!==f.nodeType;);a[c]=d||f&&f.nodeName===b?f||!1:f===b}d&&l.filter(b,a,!0)},">":function(a,b,c){var d="string"===
typeof b;if(d&&!/\W/.test(b)){b=c?b:b.toUpperCase();c=0;for(var e=a.length;c<e;c++){var f=a[c];f&&(d=f.parentNode,a[c]=d.nodeName===b?d:!1)}}else{c=0;for(e=a.length;c<e;c++)(f=a[c])&&(a[c]=d?f.parentNode:f.parentNode===b);d&&l.filter(b,a,!0)}},"":function(c,e,f){var h=d++,v=b;if(!/\W/.test(e)){var q=e=f?e:e.toUpperCase();v=a}v("parentNode",e,h,c,q,f)},"~":function(c,e,f){var h=d++,v=b;if("string"===typeof e&&!/\W/.test(e)){var q=e=f?e:e.toUpperCase();v=a}v("previousSibling",e,h,c,q,f)}},find:{ID:function(a,
b,c){if("undefined"!==typeof b.getElementById&&!c)return(a=b.getElementById(a[1]))?[a]:[]},NAME:function(a,b,c){if("undefined"!==typeof b.getElementsByName){c=[];b=b.getElementsByName(a[1]);for(var d=0,e=b.length;d<e;d++)b[d].getAttribute("name")===a[1]&&c.push(b[d]);return 0===c.length?null:c}},TAG:function(a,b){return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(/\\/g,"")+" ";if(f)return a;f=0;for(var h;null!=(h=b[f]);f++)h&&(e^(h.className&&0<=(" "+h.className+
" ").indexOf(a))?c||d.push(h):c&&(b[f]=!1));return!1},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a,b){for(var c=0;!1===b[c];c++);return b[c]&&t(b[c])?a[1]:a[1].toUpperCase()},CHILD:function(a){if("nth"==a[1]){var b=/(-?)(\d*)n((?:\+|-)?\d*)/.exec("even"==a[2]&&"2n"||"odd"==a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}a[0]=d++;return a},ATTR:function(a,b,c,d,e,f){b=a[1].replace(/\\/g,"");!f&&m.attrMap[b]&&(a[1]=m.attrMap[b]);"~="===a[2]&&(a[4]=
" "+a[4]+" ");return a},PSEUDO:function(a,b,d,e,f){if("not"===a[1])if(1<(c.exec(a[3])||"").length||/^\w/.test(a[3]))a[3]=l(a[3],null,null,b);else return a=l.filter(a[3],b,d,1^f),d||e.push.apply(e,a),!1;else if(m.match.POS.test(a[0])||m.match.CHILD.test(a[0]))return!0;return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){a.parentNode.selectedIndex;
return!0===a.selected},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!l(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===a.type},image:function(a){return"image"===a.type},
reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||"BUTTON"===a.nodeName.toUpperCase()},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return 0===b%2},odd:function(a,b){return 1===b%2},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0==b},eq:function(a,b,c){return c[3]-0==
b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=m.filters[e];if(f)return f(a,c,b,d);if("contains"===e)return 0<=(a.textContent||a.innerText||"").indexOf(b[3]);if("not"===e){b=b[3];c=0;for(d=b.length;c<d;c++)if(b[c]===a)return!1;return!0}},CHILD:function(a,b){var c=b[1],d=a;switch(c){case "only":case "first":for(;d=d.previousSibling;)if(1===d.nodeType)return!1;if("first"==c)return!0;d=a;case "last":for(;d=d.nextSibling;)if(1===d.nodeType)return!1;return!0;case "nth":c=b[2];var e=b[3];if(1==c&&0==
e)return!0;b=b[0];var f=a.parentNode;if(f&&(f.sizcache!==b||!a.nodeIndex)){var h=0;for(d=f.firstChild;d;d=d.nextSibling)1===d.nodeType&&(d.nodeIndex=++h);f.sizcache=b}a=a.nodeIndex-e;return 0==c?0==a:0==a%c&&0<=a/c}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===b},TAG:function(a,b){return"*"===b&&1===a.nodeType||a.nodeName===b},CLASS:function(a,b){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)},ATTR:function(a,b){var c=b[1];a=m.attrHandle[c]?m.attrHandle[c](a):
null!=a[c]?a[c]:a.getAttribute(c);c=a+"";var d=b[2];b=b[4];return null==a?"!="===d:"="===d?c===b:"*="===d?0<=c.indexOf(b):"~="===d?0<=(" "+c+" ").indexOf(b):b?"!="===d?c!=b:"^="===d?0===c.indexOf(b):"$="===d?c.substr(c.length-b.length)===b:"|="===d?c===b||c.substr(0,b.length+1)===b+"-":!1:c&&!1!==a},POS:function(a,b,c,d){var e=m.setFilters[b[2]];if(e)return e(a,c,b,d)}}},n=m.match.POS,z;for(z in m.match)m.match[z]=new RegExp(m.match[z].source+/(?![^\[]*\])(?![^\(]*\))/.source),m.leftMatch[z]=new RegExp(/(^(?:.|\r|\n)*?)/.source+
m.match[z].source);var C=function(a,b){a=Array.prototype.slice.call(a,0);return b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(q){C=function(a,b){b=b||[];if("[object Array]"===e.call(a))Array.prototype.push.apply(b,a);else if("number"===typeof a.length)for(var c=0,d=a.length;c<d;c++)b.push(a[c]);else for(c=0;a[c];c++)b.push(a[c]);return b}}var x;document.documentElement.compareDocumentPosition?x=function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a==
b&&(f=!0),0;a=a.compareDocumentPosition(b)&4?-1:a===b?0:1;0===a&&(f=!0);return a}:"sourceIndex"in document.documentElement?x=function(a,b){if(!a.sourceIndex||!b.sourceIndex)return a==b&&(f=!0),0;a=a.sourceIndex-b.sourceIndex;0===a&&(f=!0);return a}:document.createRange&&(x=function(a,b){if(!a.ownerDocument||!b.ownerDocument)return a==b&&(f=!0),0;var c=a.ownerDocument.createRange(),d=b.ownerDocument.createRange();c.setStart(a,0);c.setEnd(a,0);d.setStart(b,0);d.setEnd(b,0);a=c.compareBoundaryPoints(Range.START_TO_END,
d);0===a&&(f=!0);return a});(function(){var a=document.createElement("div"),b="script"+(new Date).getTime();a.innerHTML="<a name='"+b+"'/>";var c=document.documentElement;c.insertBefore(a,c.firstChild);document.getElementById(b)&&(m.find.ID=function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(b=b.getElementById(a[1]))?b.id===a[1]||"undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id").nodeValue===a[1]?[b]:void 0:[]},m.filter.ID=function(a,b){var c="undefined"!==typeof a.getAttributeNode&&
a.getAttributeNode("id");return 1===a.nodeType&&c&&c.nodeValue===b});c.removeChild(a);c=a=null})();(function(){var a=document.createElement("div");a.appendChild(document.createComment(""));0<a.getElementsByTagName("*").length&&(m.find.TAG=function(a,b){b=b.getElementsByTagName(a[1]);if("*"===a[1]){a=[];for(var c=0;b[c];c++)1===b[c].nodeType&&a.push(b[c]);b=a}return b});a.innerHTML="<a href='#'></a>";a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&"#"!==a.firstChild.getAttribute("href")&&
(m.attrHandle.href=function(a){return a.getAttribute("href",2)});a=null})();document.querySelectorAll&&function(){var a=l,b=document.createElement("div");b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||0!==b.querySelectorAll(".TEST").length){l=function(b,c,d,e){c=c||document;if(!e&&9===c.nodeType&&!t(c))try{return C(c.querySelectorAll(b),d)}catch(H){}return a(b,c,d,e)};for(var c in a)l[c]=a[c];b=null}}();document.getElementsByClassName&&document.documentElement.getElementsByClassName&&
function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&(m.order.splice(1,0,"CLASS"),m.find.CLASS=function(a,b,c){if("undefined"!==typeof b.getElementsByClassName&&!c)return b.getElementsByClassName(a[1])},a=null))}();var F=document.compareDocumentPosition?function(a,b){return a.compareDocumentPosition(b)&16}:function(a,b){return a!==
b&&(a.contains?a.contains(b):!0)},t=function(a){return 9===a.nodeType&&"HTML"!==a.documentElement.nodeName||!!a.ownerDocument&&"HTML"!==a.ownerDocument.documentElement.nodeName},D=function(a,b){var c=[],d="",e;for(b=b.nodeType?[b]:b;e=m.match.PSEUDO.exec(a);)d+=e[0],a=a.replace(m.match.PSEUDO,"");a=m.relative[a]?a+"*":a;e=0;for(var f=b.length;e<f;e++)l(a,b[e],c);return l.filter(d,c)};window.Sizzle=l})();
(function(a){var b=Prototype.Selector.extendElements;Prototype.Selector.engine=a;Prototype.Selector.select=function(c,d){return b(a(c,d||document))};Prototype.Selector.match=function(b,d){return 1==a.matches(d,[b]).length}})(Sizzle);window.Sizzle=Prototype._original_property;delete Prototype._original_property;
var Form={reset:function(a){a=$(a);a.reset();return a},serializeElements:function(a,b){"object"!=typeof b?b={hash:!!b}:Object.isUndefined(b.hash)&&(b.hash=!0);var c,d,e=!1,f=b.submit;if(b.hash){b={};var h=function(a,b,c){b in a?(Object.isArray(a[b])||(a[b]=[a[b]]),a[b].push(c)):a[b]=c;return a}}else b="",h=function(a,b,c){return a+(a?"&":"")+encodeURIComponent(b)+"="+encodeURIComponent(c)};return a.inject(b,function(a,b){!b.disabled&&b.name&&(c=b.name,d=$(b).getValue(),null==d||"file"==b.type||"submit"==
b.type&&(e||!1===f||f&&c!=f||!(e=!0))||(a=h(a,c,d)));return a})},Methods:{serialize:function(a,b){return Form.serializeElements(Form.getElements(a),b)},getElements:function(a){a=$(a).getElementsByTagName("*");for(var b,c=[],d=Form.Element.Serializers,e=0;b=a[e];e++)c.push(b);return c.inject([],function(a,b){d[b.tagName.toLowerCase()]&&a.push(Element.extend(b));return a})},getInputs:function(a,b,c){a=$(a);a=a.getElementsByTagName("input");if(!b&&!c)return $A(a).map(Element.extend);for(var d=0,e=[],
f=a.length;d<f;d++){var h=a[d];b&&h.type!=b||c&&h.name!=c||e.push(Element.extend(h))}return e},disable:function(a){a=$(a);Form.getElements(a).invoke("disable");return a},enable:function(a){a=$(a);Form.getElements(a).invoke("enable");return a},findFirstElement:function(a){a=$(a).getElements().findAll(function(a){return"hidden"!=a.type&&!a.disabled});var b=a.findAll(function(a){return a.hasAttribute("tabIndex")&&0<=a.tabIndex}).sortBy(function(a){return a.tabIndex}).first();return b?b:a.find(function(a){return/^(?:input|select|textarea)$/i.test(a.tagName)})},
focusFirstElement:function(a){a=$(a);a.findFirstElement().activate();return a},request:function(a,b){a=$(a);b=Object.clone(b||{});var c=b.parameters,d=a.readAttribute("action")||"";d.blank()&&(d=window.location.href);b.parameters=a.serialize(!0);c&&(Object.isString(c)&&(c=c.toQueryParams()),Object.extend(b.parameters,c));a.hasAttribute("method")&&!b.method&&(b.method=a.method);return new Ajax.Request(d,b)}},Element:{focus:function(a){$(a).focus();return a},select:function(a){$(a).select();return a}}};
Form.Element.Methods={serialize:function(a){a=$(a);if(!a.disabled&&a.name){var b=a.getValue();if(void 0!=b){var c={};c[a.name]=b;return Object.toQueryString(c)}}return""},getValue:function(a){a=$(a);var b=a.tagName.toLowerCase();return Form.Element.Serializers[b](a)},setValue:function(a,b){a=$(a);var c=a.tagName.toLowerCase();Form.Element.Serializers[c](a,b);return a},clear:function(a){$(a).value="";return a},present:function(a){return""!=$(a).value},activate:function(a){a=$(a);try{a.focus(),!a.select||
"input"==a.tagName.toLowerCase()&&/^(?:button|reset|submit)$/i.test(a.type)||a.select()}catch(b){}return a},disable:function(a){a=$(a);a.disabled=!0;return a},enable:function(a){a=$(a);a.disabled=!1;return a}};var Field=Form.Element,$F=Form.Element.Methods.getValue;
Form.Element.Serializers={input:function(a,b){switch(a.type.toLowerCase()){case "checkbox":case "radio":return Form.Element.Serializers.inputSelector(a,b);default:return Form.Element.Serializers.textarea(a,b)}},inputSelector:function(a,b){if(Object.isUndefined(b))return a.checked?a.value:null;a.checked=!!b},textarea:function(a,b){if(Object.isUndefined(b))return a.value;a.value=b},select:function(a,b){if(Object.isUndefined(b))return this["select-one"==a.type?"selectOne":"selectMany"](a);for(var c,
d,e=!Object.isArray(b),f=0,h=a.length;f<h;f++)if(c=a.options[f],d=this.optionValue(c),e){if(d==b){c.selected=!0;break}}else c.selected=b.include(d)},selectOne:function(a){var b=a.selectedIndex;return 0<=b?this.optionValue(a.options[b]):null},selectMany:function(a){var b,c=a.length;if(!c)return null;var d=0;for(b=[];d<c;d++){var e=a.options[d];e.selected&&b.push(this.optionValue(e))}return b},optionValue:function(a){return Element.extend(a).hasAttribute("value")?a.value:a.text}};
Abstract.TimedObserver=Class.create(PeriodicalExecuter,{initialize:function($super,b,c,d){$super(d,c);this.element=$(b);this.lastValue=this.getValue()},execute:function(){var a=this.getValue();if(Object.isString(this.lastValue)&&Object.isString(a)?this.lastValue!=a:String(this.lastValue)!=String(a))this.callback(this.element,a),this.lastValue=a}});Form.Element.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.Element.getValue(this.element)}});
Form.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.serialize(this.element)}});
Abstract.EventObserver=Class.create({initialize:function(a,b){this.element=$(a);this.callback=b;this.lastValue=this.getValue();"form"==this.element.tagName.toLowerCase()?this.registerFormCallbacks():this.registerCallback(this.element)},onElementEvent:function(){var a=this.getValue();this.lastValue!=a&&(this.callback(this.element,a),this.lastValue=a)},registerFormCallbacks:function(){Form.getElements(this.element).each(this.registerCallback,this)},registerCallback:function(a){if(a.type)switch(a.type.toLowerCase()){case "checkbox":case "radio":Event.observe(a,
"click",this.onElementEvent.bind(this));break;default:Event.observe(a,"change",this.onElementEvent.bind(this))}}});Form.Element.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.serialize(this.element)}});
(function(){function a(a){var b=document.documentElement,c=document.body||{scrollLeft:0};return a.pageX||a.clientX+(b.scrollLeft||c.scrollLeft)-(b.clientLeft||0)}function b(a){var b=document.documentElement,c=document.body||{scrollTop:0};return a.pageY||a.clientY+(b.scrollTop||c.scrollTop)-(b.clientTop||0)}function c(a,b,c){var d=Element.retrieve(a,"prototype_event_registry");Object.isUndefined(d)&&(D.push(a),d=Element.retrieve(a,"prototype_event_registry",$H()));var e=d.get(b);Object.isUndefined(e)&&
(e=[],d.set(b,e));if(e.pluck("handler").include(c))return!1;if(b.include(":"))var f=function(d){if(Object.isUndefined(d.eventName)||d.eventName!==b)return!1;m.extend(d,a);c.call(a,d)};else if(z||"mouseenter"!==b&&"mouseleave"!==b)f=function(b){m.extend(b,a);c.call(a,b)};else if("mouseenter"===b||"mouseleave"===b)f=function(b){m.extend(b,a);for(var d=b.relatedTarget;d&&d!==a;)try{d=d.parentNode}catch(ea){d=a}d!==a&&c.call(a,b)};f.handler=c;e.push(f);return f}function d(){for(var a=0,b=D.length;a<b;a++)m.stopObserving(D[a]),
D[a]=null}function e(a,b,d){a=$(a);d=c(a,b,d);if(!d)return a;b.include(":")?a.addEventListener?a.addEventListener("dataavailable",d,!1):(a.attachEvent("ondataavailable",d),a.attachEvent("onlosecapture",d)):(b=q(b),a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent("on"+b,d));return a}function f(a,b,c){a=$(a);var d=Element.retrieve(a,"prototype_event_registry");if(!d)return a;if(!b)return d.each(function(b){f(a,b.key)}),a;var e=d.get(b);if(!e)return a;if(!c)return e.each(function(c){f(a,b,
c.handler)}),a;var h=e.find(function(a){return a.handler===c});if(!h)return a;if(b.include(":"))a.removeEventListener?a.removeEventListener("dataavailable",h,!1):(a.detachEvent("ondataavailable",h),a.detachEvent("onlosecapture",h));else{var l=q(b);a.removeEventListener?a.removeEventListener(l,h,!1):a.detachEvent("on"+l,h)}d.set(b,e.without(h));return a}function h(a,b,c,d){a=$(a);Object.isUndefined(d)&&(d=!0);a==document&&document.createEvent&&!a.dispatchEvent&&(a=document.documentElement);if(document.createEvent){var e=
document.createEvent("HTMLEvents");e.initEvent("dataavailable",d,!0)}else e=document.createEventObject(),e.eventType=d?"ondataavailable":"onlosecapture";e.eventName=b;e.memo=c||{};document.createEvent?a.dispatchEvent(e):a.fireEvent(e.eventType,e);return m.extend(e)}function l(a,b,c,d){a=$(a);Object.isFunction(c)&&Object.isUndefined(d)&&(d=c,c=null);return(new m.Handler(a,b,c,d)).start()}var m={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,
KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,cache:{}},n=document.documentElement,z="onmouseenter"in n&&"onmouseleave"in n;n=window.attachEvent&&!window.addEventListener;if(n){var C={0:1,1:4,2:2};var x=function(a,b){return a.button===C[b]}}else x=Prototype.Browser.WebKit?function(a,b){switch(b){case 0:return 1==a.which&&!a.metaKey;case 1:return 1==a.which&&a.metaKey;default:return!1}}:function(a,b){return a.which?a.which===b+1:a.button===b};m.Methods={isLeftClick:function(a){return x(a,
0)},isMiddleClick:function(a){return x(a,1)},isRightClick:function(a){return x(a,2)},element:function(a){a=m.extend(a);var b=a.target,c=a.type;(a=a.currentTarget)&&a.tagName&&("load"===c||"error"===c||"click"===c&&"input"===a.tagName.toLowerCase()&&"radio"===a.type)&&(b=a);b.nodeType==Node.TEXT_NODE&&(b=b.parentNode);return Element.extend(b)},findElement:function(a,b){a=m.element(a);if(!b)return a;for(;a;){if(Object.isElement(a)&&Prototype.Selector.match(a,b))return Element.extend(a);a=a.parentNode}},
pointer:function(c){return{x:a(c),y:b(c)}},pointerX:a,pointerY:b,stop:function(a){m.extend(a);a.preventDefault();a.stopPropagation();a.stopped=!0}};var F=Object.keys(m.Methods).inject({},function(a,b){a[b]=m.Methods[b].methodize();return a});if(n){var t=function(a){switch(a.type){case "mouseover":a=a.fromElement;break;case "mouseout":a=a.toElement;break;default:return null}return Element.extend(a)};Object.extend(F,{stopPropagation:function(){this.cancelBubble=!0},preventDefault:function(){this.returnValue=
!1},inspect:function(){return"[object Event]"}});m.extend=function(a,b){if(!a)return!1;if(a._extendedByPrototype)return a;a._extendedByPrototype=Prototype.emptyFunction;var c=m.pointer(a);Object.extend(a,{target:a.srcElement||b,relatedTarget:t(a),pageX:c.x,pageY:c.y});return Object.extend(a,F)}}else m.prototype=window.Event.prototype||document.createEvent("HTMLEvents").__proto__,Object.extend(m.prototype,F),m.extend=Prototype.K;var D=[];Prototype.Browser.IE&&window.attachEvent("onunload",d);Prototype.Browser.WebKit&&
window.addEventListener("unload",Prototype.emptyFunction,!1);var q=Prototype.K,w={mouseenter:"mouseover",mouseleave:"mouseout"};z||(q=function(a){return w[a]||a});m.Handler=Class.create({initialize:function(a,b,c,d){this.element=$(a);this.eventName=b;this.selector=c;this.callback=d;this.handler=this.handleEvent.bind(this)},start:function(){m.observe(this.element,this.eventName,this.handler);return this},stop:function(){m.stopObserving(this.element,this.eventName,this.handler);return this},handleEvent:function(a){var b=
a.findElement(this.selector);b&&this.callback.call(this.element,a,b)}});Object.extend(m,m.Methods);Object.extend(m,{fire:h,observe:e,stopObserving:f,on:l});Element.addMethods({fire:h,observe:e,stopObserving:f,on:l});Object.extend(document,{fire:h.methodize(),observe:e.methodize(),stopObserving:f.methodize(),on:l.methodize(),loaded:!1});window.Event?Object.extend(window.Event,m):window.Event=m})();
(function(){function a(){document.loaded||(d&&window.clearTimeout(d),document.loaded=!0,document.fire("dom:loaded"))}function b(){"complete"===document.readyState&&(document.stopObserving("readystatechange",b),a())}function c(){try{document.documentElement.doScroll("left")}catch(e){d=c.defer();return}a()}var d;document.addEventListener?document.addEventListener("DOMContentLoaded",a,!1):(document.observe("readystatechange",b),window==top&&(d=c.defer()));Event.observe(window,"load",a)})();Element.addMethods();
Hash.toQueryString=Object.toQueryString;var Toggle={display:Element.toggle};Element.Methods.childOf=Element.Methods.descendantOf;
var Insertion={Before:function(a,b){return Element.insert(a,{before:b})},Top:function(a,b){return Element.insert(a,{top:b})},Bottom:function(a,b){return Element.insert(a,{bottom:b})},After:function(a,b){return Element.insert(a,{after:b})}},$continue=Error('"throw $continue" is deprecated, use "return" instead'),Position={includeScrollOffsets:!1,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;this.deltaY=window.pageYOffset||document.documentElement.scrollTop||
document.body.scrollTop||0},within:function(a,b,c){if(this.includeScrollOffsets)return this.withinIncludingScrolloffsets(a,b,c);this.xcomp=b;this.ycomp=c;this.offset=Element.cumulativeOffset(a);return c>=this.offset[1]&&c<this.offset[1]+a.offsetHeight&&b>=this.offset[0]&&b<this.offset[0]+a.offsetWidth},withinIncludingScrolloffsets:function(a,b,c){var d=Element.cumulativeScrollOffset(a);this.xcomp=b+d[0]-this.deltaX;this.ycomp=c+d[1]-this.deltaY;this.offset=Element.cumulativeOffset(a);return this.ycomp>=
this.offset[1]&&this.ycomp<this.offset[1]+a.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+a.offsetWidth},overlap:function(a,b){if(!a)return 0;if("vertical"==a)return(this.offset[1]+b.offsetHeight-this.ycomp)/b.offsetHeight;if("horizontal"==a)return(this.offset[0]+b.offsetWidth-this.xcomp)/b.offsetWidth},cumulativeOffset:Element.Methods.cumulativeOffset,positionedOffset:Element.Methods.positionedOffset,absolutize:function(a){Position.prepare();return Element.absolutize(a)},relativize:function(a){Position.prepare();
return Element.relativize(a)},realOffset:Element.Methods.cumulativeScrollOffset,offsetParent:Element.Methods.getOffsetParent,page:Element.Methods.viewportOffset,clone:function(a,b,c){c=c||{};return Element.clonePosition(b,a,c)}};
document.getElementsByClassName||(document.getElementsByClassName=function(a){function b(a){return a.blank()?null:"[contains(concat(' ', @class, ' '), ' "+a+" ')]"}a.getElementsByClassName=Prototype.BrowserFeatures.XPath?function(a,d){d=d.toString().strip();return(d=/\s/.test(d)?$w(d).map(b).join(""):b(d))?document._getElementsByXPath(".//*"+d,a):[]}:function(a,b){b=b.toString().strip();var c=[],d=/\s/.test(b)?$w(b):null;if(!d&&!b)return c;a=$(a).getElementsByTagName("*");b=" "+b+" ";for(var h=0,
l,m;l=a[h];h++)l.className&&(m=" "+l.className+" ")&&(m.include(b)||d&&d.all(function(a){return!a.toString().blank()&&m.include(" "+a+" ")}))&&c.push(Element.extend(l));return c};return function(a,b){return $(b||document.body).getElementsByClassName(a)}}(Element.Methods));Element.ClassNames=Class.create();
Element.ClassNames.prototype={initialize:function(a){this.element=$(a)},_each:function(a){this.element.className.split(/\s+/).select(function(a){return 0<a.length})._each(a)},set:function(a){this.element.className=a},add:function(a){this.include(a)||this.set($A(this).concat(a).join(" "))},remove:function(a){this.include(a)&&this.set($A(this).without(a).join(" "))},toString:function(){return $A(this).join(" ")}};Object.extend(Element.ClassNames.prototype,Enumerable);
(function(){window.Selector=Class.create({initialize:function(a){this.expression=a.strip()},findElements:function(a){return Prototype.Selector.select(this.expression,a)},match:function(a){return Prototype.Selector.match(a,this.expression)},toString:function(){return this.expression},inspect:function(){return"#<Selector: "+this.expression+">"}});Object.extend(Selector,{matchElements:function(a,b){for(var c=Prototype.Selector.match,d=[],e=0,f=a.length;e<f;e++){var h=a[e];c(h,b)&&d.push(Element.extend(h))}return d},
findElement:function(a,b,c){c=c||0;for(var d=0,e,f=0,h=a.length;f<h;f++)if(e=a[f],Prototype.Selector.match(e,b)&&c===d++)return Element.extend(e)},findChildElements:function(a,b){b=b.toArray().join(", ");return Prototype.Selector.select(b,a||document)}})})();
(function(){function a(a){var b=document.createElement("div");a="on"+a;var c=a in b;c||(b.setAttribute(a,"return;"),c="function"==typeof b[a]);return c}function b(a){if(a.fire("ajax:before").stopped)return!1;if("form"===a.tagName.toLowerCase()){var b=a.readAttribute("method")||"post";var c=a.readAttribute("action");var d=a.serialize({submit:a.retrieve("rails:submit-button")});a.store("rails:submit-button",null)}else b=a.readAttribute("data-method")||"get",c=a.readAttribute("href"),d={};new Ajax.Request(c,
{method:b,parameters:d,evalScripts:!0,onCreate:function(b){a.fire("ajax:create",b)},onComplete:function(b){a.fire("ajax:complete",b)},onSuccess:function(b){a.fire("ajax:success",b)},onFailure:function(b){a.fire("ajax:failure",b)}});a.fire("ajax:after")}function c(a,b,c){a.insert(new Element("input",{type:"hidden",name:b,value:c}))}function d(a){a.select("input[type=submit][data-disable-with]").each(function(a){a.store("rails:original-value",a.getValue());a.setValue(a.readAttribute("data-disable-with")).disable()})}
function e(a){a.select("input[type=submit][data-disable-with]").each(function(a){a.setValue(a.retrieve("rails:original-value")).enable()})}function f(a){a=a.readAttribute("data-confirm");return!a||confirm(a)}var h=a("submit"),l=a("change");h&&l||(Event.Handler.prototype.initialize=Event.Handler.prototype.initialize.wrap(function(a,b,c,d,e){a(b,c,d,e);if(a=!h&&"submit"==this.eventName)a=this.element,a=!(Object.isElement(a)&&"FORM"==a.nodeName.toUpperCase());!a&&(a=!l&&"change"==this.eventName)&&(a=
this.element,Object.isElement(a)?(a=a.nodeName.toUpperCase(),a="INPUT"==a||"SELECT"==a||"TEXTAREA"==a):a=!1,a=!a);a&&(this.eventName="emulated:"+this.eventName)}));if(!h)document.on("focusin","form",function(a,b){b.retrieve("emulated:submit")||(b.on("submit",function(a){!1===b.fire("emulated:submit",a,!0).returnValue&&a.preventDefault()}),b.store("emulated:submit",!0))});if(!l)document.on("focusin","input, select, textarea",function(a,b){b.retrieve("emulated:change")||(b.on("change",function(a){b.fire("emulated:change",
a,!0)}),b.store("emulated:change",!0))});document.on("click","a[data-confirm], a[data-remote], a[data-method], input[data-confirm], button[data-confirm]",function(a,d){if(!f(d))return a.stop(),!1;if(d.readAttribute("data-remote"))b(d),a.stop();else if(d.readAttribute("data-method")){var e=d.readAttribute("data-method"),h=d.readAttribute("href"),l=$$("meta[name=csrf-param]")[0],m=$$("meta[name=csrf-token]")[0];h=new Element("form",{method:"POST",action:h,style:"display: none;"});$(d.parentNode).insert(h);
"post"!==e&&c(h,"_method",e);l&&c(h,l.readAttribute("content"),m.readAttribute("content"));h.submit();a.stop()}});document.on("click","form input[type=submit], form button[type=submit], form button:not([type])",function(a,b){a.findElement("form").store("rails:submit-button",b.name||!1)});document.on("submit",function(a){var c=a.findElement();if(!f(c))return a.stop(),!1;c.readAttribute("data-remote")?(b(c),a.stop()):d(c)});document.on("ajax:create","form",function(a,b){b==a.findElement()&&d(b)});document.on("ajax:complete",
"form",function(a,b){b==a.findElement()&&e(b)});Ajax.Responders.register({onCreate:function(a){var b=$$("meta[name=csrf-token]")[0];b&&(b=b.readAttribute("content"),a.options.requestHeaders||(a.options.requestHeaders={}),a.options.requestHeaders["X-CSRF-Token"]=b)}})})();
(function(a,b){function c(a){var b=a.length,c=g.type(a);return g.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"===typeof b&&0<b&&b-1 in a)}function d(a){var b=Ya[a]={};g.each(a.match(fa)||[],function(a,c){b[c]=!0});return b}function e(a,c,d,e){if(g.acceptData(a)){var k=g.expando,p="string"===typeof c,r=a.nodeType,f=r?g.cache:a,y=r?a[k]:a[k]&&k;if(y&&f[y]&&(e||f[y].data)||!p||d!==b){y||(r?a[k]=y=Z.pop()||g.guid++:y=k);f[y]||(f[y]={},r||(f[y].toJSON=g.noop));if("object"===
typeof c||"function"===typeof c)e?f[y]=g.extend(f[y],c):f[y].data=g.extend(f[y].data,c);a=f[y];e||(a.data||(a.data={}),a=a.data);d!==b&&(a[g.camelCase(c)]=d);p?(d=a[c],null==d&&(d=a[g.camelCase(c)])):d=a;return d}}}function f(a,b,c){if(g.acceptData(a)){var d,k,p=a.nodeType,e=p?g.cache:a,r=p?a[g.expando]:g.expando;if(e[r]){if(b&&(k=c?e[r]:e[r].data)){g.isArray(b)?b=b.concat(g.map(b,g.camelCase)):b in k?b=[b]:(b=g.camelCase(b),b=b in k?[b]:b.split(" "));var f=0;for(d=b.length;f<d;f++)delete k[b[f]];
if(!(c?l:g.isEmptyObject)(k))return}if(!c&&(delete e[r].data,!l(e[r])))return;p?g.cleanData([a],!0):g.support.deleteExpando||e!=e.window?delete e[r]:e[r]=null}}}function h(a,c,d){if(d===b&&1===a.nodeType)if(d="data-"+c.replace(yb,"-$1").toLowerCase(),d=a.getAttribute(d),"string"===typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:zb.test(d)?g.parseJSON(d):d}catch(y){}g.data(a,c,d)}else d=b;return d}function l(a){for(var b in a)if(("data"!==b||!g.isEmptyObject(a[b]))&&"toJSON"!==
b)return!1;return!0}function m(){return!0}function n(){return!1}function z(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function C(a,b,c){b=b||0;if(g.isFunction(b))return g.grep(a,function(a,d){return!!b.call(a,d,a)===c});if(b.nodeType)return g.grep(a,function(a){return a===b===c});if("string"===typeof b){var d=g.grep(a,function(a){return 1===a.nodeType});if(Ab.test(b))return g.filter(b,d,!c);b=g.filter(b,d)}return g.grep(a,function(a){return 0<=g.inArray(a,b)===c})}function x(a){var b=Za.split("|");
a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function F(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function t(a){var b=a.getAttributeNode("type");a.type=(b&&b.specified)+"/"+a.type;return a}function D(a){var b=Bb.exec(a.type);b?a.type=b[1]:a.removeAttribute("type");return a}function q(a,b){for(var c,d=0;null!=(c=a[d]);d++)g._data(c,"globalEval",!b||g._data(b[d],"globalEval"))}function w(a,b){if(1===
b.nodeType&&g.hasData(a)){var c,d;var k=g._data(a);a=g._data(b,k);var e=k.events;if(e)for(c in delete a.handle,a.events={},e)for(k=0,d=e[c].length;k<d;k++)g.event.add(b,c,e[c][k]);a.data&&(a.data=g.extend({},a.data))}}function v(a,c){var d,k,e=0,p=typeof a.getElementsByTagName!==X?a.getElementsByTagName(c||"*"):typeof a.querySelectorAll!==X?a.querySelectorAll(c||"*"):b;if(!p)for(p=[],d=a.childNodes||a;null!=(k=d[e]);e++)!c||g.nodeName(k,c)?p.push(k):g.merge(p,v(k,c));return c===b||c&&g.nodeName(a,
c)?g.merge([a],p):p}function u(a){Ja.test(a.type)&&(a.defaultChecked=a.checked)}function E(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,k=$a.length;k--;)if(b=$a[k]+c,b in a)return b;return d}function G(a,b){a=b||a;return"none"===g.css(a,"display")||!g.contains(a.ownerDocument,a)}function N(a,b){for(var c,d,k,e=[],p=0,f=a.length;p<f;p++)d=a[p],d.style&&(e[p]=g._data(d,"olddisplay"),c=d.style.display,b?(e[p]||"none"!==c||(d.style.display=""),""===d.style.display&&G(d)&&
(e[p]=g._data(d,"olddisplay",ea(d.nodeName)))):e[p]||(k=G(d),(c&&"none"!==c||!k)&&g._data(d,"olddisplay",k?c:g.css(d,"display"))));for(p=0;p<f;p++)d=a[p],!d.style||b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?e[p]||"":"none");return a}function H(a,b,c){return(a=Cb.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function L(a,b,c,d,e){b=c===(d?"border":"content")?4:"width"===b?1:0;for(var k=0;4>b;b+=2)"margin"===c&&(k+=g.css(a,c+ka[b],!0,e)),d?("content"===c&&(k-=g.css(a,"padding"+
ka[b],!0,e)),"margin"!==c&&(k-=g.css(a,"border"+ka[b]+"Width",!0,e))):(k+=g.css(a,"padding"+ka[b],!0,e),"padding"!==c&&(k+=g.css(a,"border"+ka[b]+"Width",!0,e)));return k}function U(a,b,c){var d=!0,k="width"===b?a.offsetWidth:a.offsetHeight,e=oa(a),p=g.support.boxSizing&&"border-box"===g.css(a,"boxSizing",!1,e);if(0>=k||null==k){k=pa(a,b,e);if(0>k||null==k)k=a.style[b];if(Da.test(k))return k;d=p&&(g.support.boxSizingReliable||k===a.style[b]);k=parseFloat(k)||0}return k+L(a,b,c||(p?"border":"content"),
d,e)+"px"}function ea(a){var b=A,c=ab[a];c||(c=V(a,b),"none"!==c&&c||(ya=(ya||g("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement),b=(ya[0].contentWindow||ya[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=V(a,b),ya.detach()),ab[a]=c);return c}function V(a,b){a=g(b.createElement(a)).appendTo(b.body);b=g.css(a[0],"display");a.remove();return b}function Q(a,b,c,d){var k;if(g.isArray(b))g.each(b,function(b,
k){c||Db.test(a)?d(a,k):Q(a+"["+("object"===typeof k?b:"")+"]",k,c,d)});else if(c||"object"!==g.type(b))d(a,b);else for(k in b)Q(a+"["+k+"]",b[k],c,d)}function R(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");var d=0,k=b.toLowerCase().match(fa)||[];if(g.isFunction(c))for(;b=k[d++];)"+"===b[0]?(b=b.slice(1)||"*",(a[b]=a[b]||[]).unshift(c)):(a[b]=a[b]||[]).push(c)}}function W(a,b,c,d){function k(f){var r;e[f]=!0;g.each(a[f]||[],function(a,g){a=g(b,c,d);if("string"===typeof a&&!p&&!e[a])return b.dataTypes.unshift(a),
k(a),!1;if(p)return!(r=a)});return r}var e={},p=a===Ka;return k(b.dataTypes[0])||!e["*"]&&k("*")}function ia(a,c){var d,k,e=g.ajaxSettings.flatOptions||{};for(k in c)c[k]!==b&&((e[k]?a:d||(d={}))[k]=c[k]);d&&g.extend(!0,a,d);return a}function T(){try{return new a.XMLHttpRequest}catch(k){}}function ha(){setTimeout(function(){aa=b});return aa=g.now()}function ta(a,b){g.each(b,function(b,c){for(var d=(za[b]||[]).concat(za["*"]),k=0,e=d.length;k<e&&!d[k].call(a,b,c);k++);})}function B(a,b,c){var d,k=
0,e=Ea.length,p=g.Deferred().always(function(){delete f.elem}),f=function(){if(d)return!1;var b=aa||ha();b=Math.max(0,r.startTime+r.duration-b);for(var c=1-(b/r.duration||0),k=0,e=r.tweens.length;k<e;k++)r.tweens[k].run(c);p.notifyWith(a,[r,c,b]);if(1>c&&e)return b;p.resolveWith(a,[r]);return!1},r=p.promise({elem:a,props:g.extend({},b),opts:g.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:aa||ha(),duration:c.duration,tweens:[],createTween:function(b,c){b=g.Tween(a,
r.opts,b,c,r.opts.specialEasing[b]||r.opts.easing);r.tweens.push(b);return b},stop:function(b){var c=0,k=b?r.tweens.length:0;if(d)return this;for(d=!0;c<k;c++)r.tweens[c].run(1);b?p.resolveWith(a,[r,b]):p.rejectWith(a,[r,b]);return this}});c=r.props;for(P(c,r.opts.specialEasing);k<e;k++)if(b=Ea[k].call(r,a,c,r.opts))return b;ta(r,c);g.isFunction(r.opts.start)&&r.opts.start.call(a,r);g.fx.timer(g.extend(f,{elem:a,anim:r,queue:r.opts.queue}));return r.progress(r.opts.progress).done(r.opts.done,r.opts.complete).fail(r.opts.fail).always(r.opts.always)}
function P(a,b){var c,d;for(c in a){var k=g.camelCase(c);var e=b[k];var p=a[c];g.isArray(p)&&(e=p[1],p=a[c]=p[0]);c!==k&&(a[k]=p,delete a[c]);if((d=g.cssHooks[k])&&"expand"in d)for(c in p=d.expand(p),delete a[k],p)c in a||(a[c]=p[c],b[c]=e);else b[k]=e}}function M(a,b,c,d,e){return new M.prototype.init(a,b,c,d,e)}function K(a,b){var c={height:a},d=0;for(b=b?1:0;4>d;d+=2-b){var k=ka[d];c["margin"+k]=c["padding"+k]=a}b&&(c.opacity=c.width=a);return c}function ua(a){return g.isWindow(a)?a:9===a.nodeType?
a.defaultView||a.parentWindow:!1}var O,X=typeof b,A=a.document,Aa=a.location,Fa=a.jQuery,La=a.$,wa={},Z=[],xa=Z.concat,va=Z.push,ba=Z.slice,bb=Z.indexOf,Eb=wa.toString,Ba=wa.hasOwnProperty,Ma="1.9.1".trim,g=function(a,b){return new g.fn.init(a,b,Fb)},Ga=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,fa=/\S+/g,Gb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Hb=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,cb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Ib=/^[\],:{}\s]*$/,Jb=/(?:^|:|,)(?:\s*\[)+/g,Kb=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,
Lb=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,Mb=/^-ms-/,Nb=/-([\da-z])/gi,Ob=function(a,b){return b.toUpperCase()},ca=function(a){if(A.addEventListener||"load"===a.type||"complete"===A.readyState)db(),g.ready()},db=function(){A.addEventListener?(A.removeEventListener("DOMContentLoaded",ca,!1),a.removeEventListener("load",ca,!1)):(A.detachEvent("onreadystatechange",ca),a.detachEvent("onload",ca))};g.fn=g.prototype={jquery:"1.9.1",constructor:g,init:function(a,c,d){if(!a)return this;
if("string"===typeof a){var k="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:Hb.exec(a);if(!k||!k[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(k[1]){if(c=c instanceof g?c[0]:c,g.merge(this,g.parseHTML(k[1],c&&c.nodeType?c.ownerDocument||c:A,!0)),cb.test(k[1])&&g.isPlainObject(c))for(k in c)if(g.isFunction(this[k]))this[k](c[k]);else this.attr(k,c[k])}else{if((c=A.getElementById(k[2]))&&c.parentNode){if(c.id!==k[2])return d.find(a);this.length=1;
this[0]=c}this.context=A;this.selector=a}return this}if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(g.isFunction(a))return d.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return g.makeArray(a,this)},selector:"",length:0,size:function(){return this.length},toArray:function(){return ba.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a){a=g.merge(this.constructor(),a);a.prevObject=this;a.context=
this.context;return a},each:function(a,b){return g.each(this,a,b)},ready:function(a){g.ready.promise().done(a);return this},slice:function(){return this.pushStack(ba.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&a<b?[this[a]]:[])},map:function(a){return this.pushStack(g.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},
push:va,sort:[].sort,splice:[].splice};g.fn.init.prototype=g.fn;g.extend=g.fn.extend=function(){var a,c,d,e=arguments[0]||{},f=1,h=arguments.length,l=!1;"boolean"===typeof e&&(l=e,e=arguments[1]||{},f=2);"object"===typeof e||g.isFunction(e)||(e={});h===f&&(e=this,--f);for(;f<h;f++)if(null!=(d=arguments[f]))for(c in d){var m=e[c];var n=d[c];e!==n&&(l&&n&&(g.isPlainObject(n)||(a=g.isArray(n)))?(a?(a=!1,m=m&&g.isArray(m)?m:[]):m=m&&g.isPlainObject(m)?m:{},e[c]=g.extend(l,m,n)):n!==b&&(e[c]=n))}return e};
g.extend({noConflict:function(b){a.$===g&&(a.$=La);b&&a.jQuery===g&&(a.jQuery=Fa);return g},isReady:!1,readyWait:1,holdReady:function(a){a?g.readyWait++:g.ready(!0)},ready:function(a){if(!0===a?!--g.readyWait:!g.isReady){if(!A.body)return setTimeout(g.ready);g.isReady=!0;!0!==a&&0<--g.readyWait||(O.resolveWith(A,[g]),g.fn.trigger&&g(A).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===g.type(a)},isArray:Array.isArray||function(a){return"array"===g.type(a)},isWindow:function(a){return null!=
a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):"object"===typeof a||"function"===typeof a?wa[Eb.call(a)]||"object":typeof a},isPlainObject:function(a){if(!a||"object"!==g.type(a)||a.nodeType||g.isWindow(a))return!1;try{if(a.constructor&&!Ba.call(a,"constructor")&&!Ba.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}for(var c in a);return c===b||Ba.call(a,c)},isEmptyObject:function(a){for(var b in a)return!1;
return!0},error:function(a){throw Error(a);},parseHTML:function(a,b,c){if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(c=b,b=!1);b=b||A;var d=cb.exec(a);c=!c&&[];if(d)return[b.createElement(d[1])];d=g.buildFragment([a],b,c);c&&g(c).remove();return g.merge([],d.childNodes)},parseJSON:function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(null===b)return b;if("string"===typeof b&&(b=g.trim(b))&&Ib.test(b.replace(Kb,"@").replace(Lb,"]").replace(Jb,"")))return(new Function("return "+
b))();g.error("Invalid JSON: "+b)},parseXML:function(c){if(!c||"string"!==typeof c)return null;try{if(a.DOMParser){var d=new DOMParser;var k=d.parseFromString(c,"text/xml")}else k=new ActiveXObject("Microsoft.XMLDOM"),k.async="false",k.loadXML(c)}catch(y){k=b}k&&k.documentElement&&!k.getElementsByTagName("parsererror").length||g.error("Invalid XML: "+c);return k},noop:function(){},globalEval:function(b){b&&g.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(Mb,
"ms-").replace(Nb,Ob)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var k=0,e=a.length;var g=c(a);if(d)if(g)for(;k<e&&(g=b.apply(a[k],d),!1!==g);k++);else for(k in a){if(g=b.apply(a[k],d),!1===g)break}else if(g)for(;k<e&&(g=b.call(a[k],k,a[k]),!1!==g);k++);else for(k in a)if(g=b.call(a[k],k,a[k]),!1===g)break;return a},trim:Ma&&!Ma.call("\ufeff\u00a0")?function(a){return null==a?"":Ma.call(a)}:function(a){return null==a?"":(a+"").replace(Gb,
"")},makeArray:function(a,b){b=b||[];null!=a&&(c(Object(a))?g.merge(b,"string"===typeof a?[a]:a):va.call(b,a));return b},inArray:function(a,b,c){if(b){if(bb)return bb.call(b,a,c);var d=b.length;for(c=c?0>c?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,k=a.length,e=0;if("number"===typeof d)for(;e<d;e++)a[k++]=c[e];else for(;c[e]!==b;)a[k++]=c[e++];a.length=k;return a},grep:function(a,b,c){var d=[],k=0,e=a.length;for(c=!!c;k<e;k++){var g=!!b(a[k],
k);c!==g&&d.push(a[k])}return d},map:function(a,b,d){var k=0,e=a.length,g=[];if(c(a))for(;k<e;k++){var p=b(a[k],k,d);null!=p&&(g[g.length]=p)}else for(k in a)p=b(a[k],k,d),null!=p&&(g[g.length]=p);return xa.apply([],g)},guid:1,proxy:function(a,c){if("string"===typeof c){var d=a[c];c=a;a=d}if(!g.isFunction(a))return b;var k=ba.call(arguments,2);d=function(){return a.apply(c||this,k.concat(ba.call(arguments)))};d.guid=a.guid=a.guid||g.guid++;return d},access:function(a,c,d,e,f,h,l){var k=0,p=a.length,
r=null==d;if("object"===g.type(d))for(k in f=!0,d)g.access(a,c,k,d[k],!0,h,l);else if(e!==b&&(f=!0,g.isFunction(e)||(l=!0),r&&(l?(c.call(a,e),c=null):(r=c,c=function(a,b,c){return r.call(g(a),c)})),c))for(;k<p;k++)c(a[k],d,l?e:e.call(a[k],k,c(a[k],d)));return f?a:r?c.call(a):p?c(a[0],d):h},now:function(){return(new Date).getTime()}});g.ready.promise=function(b){if(!O)if(O=g.Deferred(),"complete"===A.readyState)setTimeout(g.ready);else if(A.addEventListener)A.addEventListener("DOMContentLoaded",ca,
!1),a.addEventListener("load",ca,!1);else{A.attachEvent("onreadystatechange",ca);a.attachEvent("onload",ca);var c=!1;try{c=null==a.frameElement&&A.documentElement}catch(r){}c&&c.doScroll&&function y(){if(!g.isReady){try{c.doScroll("left")}catch(I){return setTimeout(y,50)}db();g.ready()}}()}return O.promise(b)};g.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){wa["[object "+b+"]"]=b.toLowerCase()});var Fb=g(A);var Ya={};g.Callbacks=function(a){a="string"===
typeof a?Ya[a]||d(a):g.extend({},a);var c,k,e,f,h,l,m=[],n=!a.once&&[],t=function(b){k=a.memory&&b;e=!0;h=l||0;l=0;f=m.length;for(c=!0;m&&h<f;h++)if(!1===m[h].apply(b[0],b[1])&&a.stopOnFalse){k=!1;break}c=!1;m&&(n?n.length&&t(n.shift()):k?m=[]:q.disable())},q={add:function(){if(m){var b=m.length;(function Pb(b){g.each(b,function(b,c){b=g.type(c);"function"===b?a.unique&&q.has(c)||m.push(c):c&&c.length&&"string"!==b&&Pb(c)})})(arguments);c?f=m.length:k&&(l=b,t(k))}return this},remove:function(){m&&
g.each(arguments,function(a,b){for(var d;-1<(d=g.inArray(b,m,d));)m.splice(d,1),c&&(d<=f&&f--,d<=h&&h--)});return this},has:function(a){return a?-1<g.inArray(a,m):!(!m||!m.length)},empty:function(){m=[];return this},disable:function(){m=n=k=b;return this},disabled:function(){return!m},lock:function(){n=b;k||q.disable();return this},locked:function(){return!n},fireWith:function(a,b){b=b||[];b=[a,b.slice?b.slice():b];!m||e&&!n||(c?n.push(b):t(b));return this},fire:function(){q.fireWith(this,arguments);
return this},fired:function(){return!!e}};return q};g.extend({Deferred:function(a){var b=[["resolve","done",g.Callbacks("once memory"),"resolved"],["reject","fail",g.Callbacks("once memory"),"rejected"],["notify","progress",g.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){k.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return g.Deferred(function(c){g.each(b,function(b,e){var f=e[0],p=g.isFunction(a[b])&&a[b];k[e[1]](function(){var a=
p&&p.apply(this,arguments);if(a&&g.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);else c[f+"With"](this===d?c.promise():this,p?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=a?g.extend(a,d):d}},k={};d.pipe=d.then;g.each(b,function(a,e){var g=e[2],f=e[3];d[e[1]]=g.add;f&&g.add(function(){c=f},b[a^1][2].disable,b[2][2].lock);k[e[0]]=function(){k[e[0]+"With"](this===k?d:this,arguments);return this};k[e[0]+"With"]=g.fireWith});d.promise(k);
a&&a.call(k,k);return k},when:function(a){var b=0,c=ba.call(arguments),d=c.length,k=1!==d||a&&g.isFunction(a.promise)?d:0,e=1===k?a:g.Deferred(),f=function(a,b,c){return function(d){b[a]=this;c[a]=1<arguments.length?ba.call(arguments):d;c===l?e.notifyWith(b,c):--k||e.resolveWith(b,c)}},h;if(1<d){var l=Array(d);var m=Array(d);for(h=Array(d);b<d;b++)c[b]&&g.isFunction(c[b].promise)?c[b].promise().done(f(b,h,c)).fail(e.reject).progress(f(b,m,l)):--k}k||e.resolveWith(h,c);return e.promise()}});g.support=
function(){var b,c,d=A.createElement("div");d.setAttribute("className","t");d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";var e=d.getElementsByTagName("*");var f=d.getElementsByTagName("a")[0];if(!e||!f||!e.length)return{};var h=A.createElement("select");var l=h.appendChild(A.createElement("option"));e=d.getElementsByTagName("input")[0];f.style.cssText="top:1px;float:left;opacity:.5";var m={getSetAttribute:"t"!==d.className,leadingWhitespace:3===d.firstChild.nodeType,
tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(f.getAttribute("style")),hrefNormalized:"/a"===f.getAttribute("href"),opacity:/^0.5/.test(f.style.opacity),cssFloat:!!f.style.cssFloat,checkOn:!!e.value,optSelected:l.selected,enctype:!!A.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==A.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===A.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,
shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1};e.checked=!0;m.noCloneChecked=e.cloneNode(!0).checked;h.disabled=!0;m.optDisabled=!l.disabled;try{delete d.test}catch(vc){m.deleteExpando=!1}e=A.createElement("input");e.setAttribute("value","");m.input=""===e.getAttribute("value");e.value="t";e.setAttribute("type","radio");m.radioValue="t"===e.value;e.setAttribute("checked","t");e.setAttribute("name","t");f=A.createDocumentFragment();f.appendChild(e);m.appendChecked=
e.checked;m.checkClone=f.cloneNode(!0).cloneNode(!0).lastChild.checked;d.attachEvent&&(d.attachEvent("onclick",function(){m.noCloneEvent=!1}),d.cloneNode(!0).click());for(c in{submit:!0,change:!0,focusin:!0})d.setAttribute(f="on"+c,"t"),m[c+"Bubbles"]=f in a||!1===d.attributes[f].expando;d.style.backgroundClip="content-box";d.cloneNode(!0).style.backgroundClip="";m.clearCloneStyle="content-box"===d.style.backgroundClip;g(function(){var c=A.getElementsByTagName("body")[0];if(c){var k=A.createElement("div");
k.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";c.appendChild(k).appendChild(d);d.innerHTML="<table><tr><td></td><td>t</td></tr></table>";var e=d.getElementsByTagName("td");e[0].style.cssText="padding:0;margin:0;border:0;display:none";b=0===e[0].offsetHeight;e[0].style.display="";e[1].style.display="none";m.reliableHiddenOffsets=b&&0===e[0].offsetHeight;d.innerHTML="";d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";
m.boxSizing=4===d.offsetWidth;m.doesNotIncludeMarginInBodyOffset=1!==c.offsetTop;a.getComputedStyle&&(m.pixelPosition="1%"!==(a.getComputedStyle(d,null)||{}).top,m.boxSizingReliable="4px"===(a.getComputedStyle(d,null)||{width:"4px"}).width,e=d.appendChild(A.createElement("div")),e.style.cssText=d.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",e.style.marginRight=e.style.width="0",d.style.width="1px",m.reliableMarginRight=
!parseFloat((a.getComputedStyle(e,null)||{}).marginRight));typeof d.style.zoom!==X&&(d.innerHTML="",d.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;width:1px;padding:1px;display:inline;zoom:1",m.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",m.shrinkWrapBlocks=3!==d.offsetWidth,m.inlineBlockNeedsLayout&&(c.style.zoom=1));c.removeChild(k);
d=null}});e=h=f=l=f=e=null;return m}();var zb=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,yb=/([A-Z])/g;g.extend({cache:{},expando:"jQuery"+("1.9.1"+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?g.cache[a[g.expando]]:a[g.expando];return!!a&&!l(a)},data:function(a,b,c){return e(a,b,c)},removeData:function(a,b){return f(a,b)},_data:function(a,b,c){return e(a,b,c,!0)},_removeData:function(a,b){return f(a,b,!0)},acceptData:function(a){if(a.nodeType&&
1!==a.nodeType&&9!==a.nodeType)return!1;var b=a.nodeName&&g.noData[a.nodeName.toLowerCase()];return!b||!0!==b&&a.getAttribute("classid")===b}});g.fn.extend({data:function(a,c){var d,k=this[0],e=0,f=null;if(a===b){if(this.length&&(f=g.data(k),1===k.nodeType&&!g._data(k,"parsedAttrs"))){for(d=k.attributes;e<d.length;e++){var p=d[e].name;p.indexOf("data-")||(p=g.camelCase(p.slice(5)),h(k,p,f[p]))}g._data(k,"parsedAttrs",!0)}return f}return"object"===typeof a?this.each(function(){g.data(this,a)}):g.access(this,
function(c){if(c===b)return k?h(k,a,g.data(k,a)):null;this.each(function(){g.data(this,a,c)})},null,c,1<arguments.length,null,!0)},removeData:function(a){return this.each(function(){g.removeData(this,a)})}});g.extend({queue:function(a,b,c){if(a){b=(b||"fx")+"queue";var d=g._data(a,b);c&&(!d||g.isArray(c)?d=g._data(a,b,g.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=g.queue(a,b),d=c.length,k=c.shift(),e=g._queueHooks(a,b),f=function(){g.dequeue(a,b)};"inprogress"===
k&&(k=c.shift(),d--);if(e.cur=k)"fx"===b&&c.unshift("inprogress"),delete e.stop,k.call(a,f,e);!d&&e&&e.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return g._data(a,c)||g._data(a,c,{empty:g.Callbacks("once memory").add(function(){g._removeData(a,b+"queue");g._removeData(a,c)})})}});g.fn.extend({queue:function(a,c){var d=2;"string"!==typeof a&&(c=a,a="fx",d--);return arguments.length<d?g.queue(this[0],a):c===b?this:this.each(function(){var b=g.queue(this,a,c);g._queueHooks(this,a);
"fx"===a&&"inprogress"!==b[0]&&g.dequeue(this,a)})},dequeue:function(a){return this.each(function(){g.dequeue(this,a)})},delay:function(a,b){a=g.fx?g.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,k=1,e=g.Deferred(),f=this,p=this.length,h=function(){--k||e.resolveWith(f,[f])};"string"!==typeof a&&(c=a,a=b);for(a=a||"fx";p--;)(d=g._data(f[p],a+"queueHooks"))&&
d.empty&&(k++,d.empty.add(h));h();return e.promise(c)}});var Na=/[\t\r\n]/g,Qb=/\r/g,Rb=/^(?:input|select|textarea|button|object)$/i,Sb=/^(?:a|area)$/i,fb=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Oa=/^(?:checked|selected)$/i,la=g.support.getSetAttribute,Pa=g.support.input;g.fn.extend({attr:function(a,b){return g.access(this,g.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){g.removeAttr(this,
a)})},prop:function(a,b){return g.access(this,g.prop,a,b,1<arguments.length)},removeProp:function(a){a=g.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(p){}})},addClass:function(a){var b,c,d,k=0,e=this.length;var f="string"===typeof a&&a;if(g.isFunction(a))return this.each(function(b){g(this).addClass(a.call(this,b,this.className))});if(f)for(f=(a||"").match(fa)||[];k<e;k++){var h=this[k];if(b=1===h.nodeType&&(h.className?(" "+h.className+" ").replace(Na," "):" ")){for(d=
0;c=f[d++];)0>b.indexOf(" "+c+" ")&&(b+=c+" ");h.className=g.trim(b)}}return this},removeClass:function(a){var b,c,d,k=0,e=this.length;var f=0===arguments.length||"string"===typeof a&&a;if(g.isFunction(a))return this.each(function(b){g(this).removeClass(a.call(this,b,this.className))});if(f)for(f=(a||"").match(fa)||[];k<e;k++){var h=this[k];if(b=1===h.nodeType&&(h.className?(" "+h.className+" ").replace(Na," "):"")){for(d=0;c=f[d++];)for(;0<=b.indexOf(" "+c+" ");)b=b.replace(" "+c+" "," ");h.className=
a?g.trim(b):""}}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"===typeof b;return g.isFunction(a)?this.each(function(c){g(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var k,e=0,f=g(this),p=b,h=a.match(fa)||[];k=h[e++];)p=d?p:!f.hasClass(k),f[p?"addClass":"removeClass"](k);else if(c===X||"boolean"===c)this.className&&g._data(this,"__className__",this.className),this.className=this.className||!1===a?"":g._data(this,"__className__")||
""})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(Na," ").indexOf(a))return!0;return!1},val:function(a){var c,d,k=this[0];if(arguments.length){var e=g.isFunction(a);return this.each(function(c){var k=g(this);1===this.nodeType&&(c=e?a.call(this,c,k.val()):a,null==c?c="":"number"===typeof c?c+="":g.isArray(c)&&(c=g.map(c,function(a){return null==a?"":a+""})),d=g.valHooks[this.type]||g.valHooks[this.nodeName.toLowerCase()],
d&&"set"in d&&d.set(this,c,"value")!==b||(this.value=c))})}if(k){if((d=g.valHooks[k.type]||g.valHooks[k.nodeName.toLowerCase()])&&"get"in d&&(c=d.get(k,"value"))!==b)return c;c=k.value;return"string"===typeof c?c.replace(Qb,""):null==c?"":c}}});g.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){for(var b,c=a.options,d=a.selectedIndex,k=(a="select-one"===a.type||0>d)?null:[],e=a?d+1:c.length,f=0>d?e:a?d:0;f<e;f++)if(b=
c[f],!(!b.selected&&f!==d||(g.support.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&g.nodeName(b.parentNode,"optgroup"))){b=g(b).val();if(a)return b;k.push(b)}return k},set:function(a,b){var c=g.makeArray(b);g(a).find("option").each(function(){this.selected=0<=g.inArray(g(this).val(),c)});c.length||(a.selectedIndex=-1);return c}}},attr:function(a,c,d){var k;var e=a.nodeType;if(a&&3!==e&&8!==e&&2!==e){if(typeof a.getAttribute===X)return g.prop(a,c,d);if(e=1!==e||
!g.isXMLDoc(a)){c=c.toLowerCase();var f=g.attrHooks[c]||(fb.test(c)?Tb:Ca)}if(d!==b)if(null===d)g.removeAttr(a,c);else{if(f&&e&&"set"in f&&(k=f.set(a,d,c))!==b)return k;a.setAttribute(c,d+"");return d}else{if(f&&e&&"get"in f&&null!==(k=f.get(a,c)))return k;typeof a.getAttribute!==X&&(k=a.getAttribute(c));return null==k?b:k}}},removeAttr:function(a,b){var c=0,d=b&&b.match(fa);if(d&&1===a.nodeType)for(;b=d[c++];){var k=g.propFix[b]||b;fb.test(b)?!la&&Oa.test(b)?a[g.camelCase("default-"+b)]=a[k]=!1:
a[k]=!1:g.attr(a,b,"");a.removeAttribute(la?b:k)}},attrHooks:{type:{set:function(a,b){if(!g.support.radioValue&&"radio"===b&&g.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,
c,d){var k,e=a.nodeType;if(a&&3!==e&&8!==e&&2!==e){if(1!==e||!g.isXMLDoc(a)){c=g.propFix[c]||c;var f=g.propHooks[c]}return d!==b?f&&"set"in f&&(k=f.set(a,d,c))!==b?k:a[c]=d:f&&"get"in f&&null!==(k=f.get(a,c))?k:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):Rb.test(a.nodeName)||Sb.test(a.nodeName)&&a.href?0:b}}}});var Tb={get:function(a,c){var d=g.prop(a,c),k="boolean"===typeof d&&a.getAttribute(c);return(a="boolean"===typeof d?
Pa&&la?null!=k:Oa.test(c)?a[g.camelCase("default-"+c)]:!!k:a.getAttributeNode(c))&&!1!==a.value?c.toLowerCase():b},set:function(a,b,c){!1===b?g.removeAttr(a,c):Pa&&la||!Oa.test(c)?a.setAttribute(!la&&g.propFix[c]||c,c):a[g.camelCase("default-"+c)]=a[c]=!0;return c}};Pa&&la||(g.attrHooks.value={get:function(a,c){c=a.getAttributeNode(c);return g.nodeName(a,"input")?a.defaultValue:c&&c.specified?c.value:b},set:function(a,b,c){if(g.nodeName(a,"input"))a.defaultValue=b;else return Ca&&Ca.set(a,b,c)}});
if(!la){var Ca=g.valHooks.button={get:function(a,c){return(a=a.getAttributeNode(c))&&("id"===c||"name"===c||"coords"===c?""!==a.value:a.specified)?a.value:b},set:function(a,c,d){var e=a.getAttributeNode(d);e||a.setAttributeNode(e=a.ownerDocument.createAttribute(d));e.value=c+="";return"value"===d||c===a.getAttribute(d)?c:b}};g.attrHooks.contenteditable={get:Ca.get,set:function(a,b,c){Ca.set(a,""===b?!1:b,c)}};g.each(["width","height"],function(a,b){g.attrHooks[b]=g.extend(g.attrHooks[b],{set:function(a,
c){if(""===c)return a.setAttribute(b,"auto"),c}})})}g.support.hrefNormalized||(g.each(["href","src","width","height"],function(a,c){g.attrHooks[c]=g.extend(g.attrHooks[c],{get:function(a){a=a.getAttribute(c,2);return null==a?b:a}})}),g.each(["href","src"],function(a,b){g.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}));g.support.style||(g.attrHooks.style={get:function(a){return a.style.cssText||b},set:function(a,b){return a.style.cssText=b+""}});g.support.optSelected||(g.propHooks.selected=
g.extend(g.propHooks.selected,{get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null}}));g.support.enctype||(g.propFix.enctype="encoding");g.support.checkOn||g.each(["radio","checkbox"],function(){g.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}});g.each(["radio","checkbox"],function(){g.valHooks[this]=g.extend(g.valHooks[this],{set:function(a,b){if(g.isArray(b))return a.checked=0<=g.inArray(g(a).val(),b)}})});
var Qa=/^(?:input|select|textarea)$/i,Ub=/^key/,Vb=/^(?:mouse|contextmenu)|click/,gb=/^(?:focusinfocus|focusoutblur)$/,hb=/^([^.]*)(?:\.(.+)|)$/;g.event={global:{},add:function(a,c,d,e,f){var k,h,p,r,l;if(h=g._data(a)){if(d.handler){var m=d;d=m.handler;f=m.selector}d.guid||(d.guid=g.guid++);(k=h.events)||(k=h.events={});(p=h.handle)||(p=h.handle=function(a){return typeof g===X||a&&g.event.triggered===a.type?b:g.event.dispatch.apply(p.elem,arguments)},p.elem=a);c=(c||"").match(fa)||[""];for(h=c.length;h--;){var y=
hb.exec(c[h])||[];var I=r=y[1];var n=(y[2]||"").split(".").sort();y=g.event.special[I]||{};I=(f?y.delegateType:y.bindType)||I;y=g.event.special[I]||{};r=g.extend({type:I,origType:r,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&g.expr.match.needsContext.test(f),namespace:n.join(".")},m);(l=k[I])||(l=k[I]=[],l.delegateCount=0,y.setup&&!1!==y.setup.call(a,e,n,p)||(a.addEventListener?a.addEventListener(I,p,!1):a.attachEvent&&a.attachEvent("on"+I,p)));y.add&&(y.add.call(a,r),r.handler.guid||
(r.handler.guid=d.guid));f?l.splice(l.delegateCount++,0,r):l.push(r);g.event.global[I]=!0}a=null}},remove:function(a,b,c,d,e){var k,f,h,p,r,l=g.hasData(a)&&g._data(a);if(l&&(p=l.events)){b=(b||"").match(fa)||[""];for(h=b.length;h--;){var m=hb.exec(b[h])||[];var y=r=m[1];var I=(m[2]||"").split(".").sort();if(y){var n=g.event.special[y]||{};y=(d?n.delegateType:n.bindType)||y;var t=p[y]||[];m=m[2]&&new RegExp("(^|\\.)"+I.join("\\.(?:.*\\.|)")+"(\\.|$)");for(f=k=t.length;k--;){var q=t[k];!e&&r!==q.origType||
c&&c.guid!==q.guid||m&&!m.test(q.namespace)||d&&d!==q.selector&&("**"!==d||!q.selector)||(t.splice(k,1),q.selector&&t.delegateCount--,n.remove&&n.remove.call(a,q))}f&&!t.length&&(n.teardown&&!1!==n.teardown.call(a,I,l.handle)||g.removeEvent(a,y,l.handle),delete p[y])}else for(y in p)g.event.remove(a,y+b[h],c,d,!0)}g.isEmptyObject(p)&&(delete l.handle,g._removeData(a,"events"))}},trigger:function(c,d,e,f){var k,h,p=[e||A],r=Ba.call(c,"type")?c.type:c;var l=Ba.call(c,"namespace")?c.namespace.split("."):
[];var m=k=e=e||A;if(3!==e.nodeType&&8!==e.nodeType&&!gb.test(r+g.event.triggered)){0<=r.indexOf(".")&&(l=r.split("."),r=l.shift(),l.sort());var y=0>r.indexOf(":")&&"on"+r;c=c[g.expando]?c:new g.Event(r,"object"===typeof c&&c);c.isTrigger=!0;c.namespace=l.join(".");c.namespace_re=c.namespace?new RegExp("(^|\\.)"+l.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;c.result=b;c.target||(c.target=e);d=null==d?[c]:g.makeArray(d,[c]);l=g.event.special[r]||{};if(f||!l.trigger||!1!==l.trigger.apply(e,d)){if(!f&&!l.noBubble&&
!g.isWindow(e)){var n=l.delegateType||r;gb.test(n+r)||(m=m.parentNode);for(;m;m=m.parentNode)p.push(m),k=m;k===(e.ownerDocument||A)&&p.push(k.defaultView||k.parentWindow||a)}for(h=0;(m=p[h++])&&!c.isPropagationStopped();)c.type=1<h?n:l.bindType||r,(k=(g._data(m,"events")||{})[c.type]&&g._data(m,"handle"))&&k.apply(m,d),(k=y&&m[y])&&g.acceptData(m)&&k.apply&&!1===k.apply(m,d)&&c.preventDefault();c.type=r;if(!(f||c.isDefaultPrevented()||l._default&&!1!==l._default.apply(e.ownerDocument,d)||"click"===
r&&g.nodeName(e,"a"))&&g.acceptData(e)&&y&&e[r]&&!g.isWindow(e)){(k=e[y])&&(e[y]=null);g.event.triggered=r;try{e[r]()}catch(xc){}g.event.triggered=b;k&&(e[y]=k)}return c.result}}},dispatch:function(a){a=g.event.fix(a);var c,d,e,k=ba.call(arguments);var f=(g._data(this,"events")||{})[a.type]||[];var h=g.event.special[a.type]||{};k[0]=a;a.delegateTarget=this;if(!h.preDispatch||!1!==h.preDispatch.call(this,a)){var l=g.event.handlers.call(this,a,f);for(f=0;(d=l[f++])&&!a.isPropagationStopped();)for(a.currentTarget=
d.elem,e=0;(c=d.handlers[e++])&&!a.isImmediatePropagationStopped();)if(!a.namespace_re||a.namespace_re.test(c.namespace))a.handleObj=c,a.data=c.data,c=((g.event.special[c.origType]||{}).handle||c.handler).apply(d.elem,k),c!==b&&!1===(a.result=c)&&(a.preventDefault(),a.stopPropagation());h.postDispatch&&h.postDispatch.call(this,a);return a.result}},handlers:function(a,c){var d,e=[],k=c.delegateCount,f=a.target;if(k&&f.nodeType&&(!a.button||"click"!==a.type))for(;f!=this;f=f.parentNode||this)if(1===
f.nodeType&&(!0!==f.disabled||"click"!==a.type)){var h=[];for(d=0;d<k;d++){var p=c[d];var l=p.selector+" ";h[l]===b&&(h[l]=p.needsContext?0<=g(l,this).index(f):g.find(l,this,null,[f]).length);h[l]&&h.push(p)}h.length&&e.push({elem:f,handlers:h})}k<c.length&&e.push({elem:this,handlers:c.slice(k)});return e},fix:function(a){if(a[g.expando])return a;var b=a.type;var c=a,d=this.fixHooks[b];d||(this.fixHooks[b]=d=Vb.test(b)?this.mouseHooks:Ub.test(b)?this.keyHooks:{});var e=d.props?this.props.concat(d.props):
this.props;a=new g.Event(c);for(b=e.length;b--;){var k=e[b];a[k]=c[k]}a.target||(a.target=c.srcElement||A);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey=!!a.metaKey;return d.filter?d.filter(a,c):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);
return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d=c.button,e=c.fromElement;if(null==a.pageX&&null!=c.clientX){var k=a.target.ownerDocument||A;var f=k.documentElement;k=k.body;a.pageX=c.clientX+(f&&f.scrollLeft||k&&k.scrollLeft||0)-(f&&f.clientLeft||k&&k.clientLeft||0);a.pageY=c.clientY+(f&&f.scrollTop||k&&k.scrollTop||0)-(f&&f.clientTop||k&&k.clientTop||0)}!a.relatedTarget&&e&&(a.relatedTarget=
e===a.target?c.toElement:e);a.which||d===b||(a.which=d&1?1:d&2?3:d&4?2:0);return a}},special:{load:{noBubble:!0},click:{trigger:function(){if(g.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1}},focus:{trigger:function(){if(this!==A.activeElement&&this.focus)try{return this.focus(),!1}catch(k){}},delegateType:"focusin"},blur:{trigger:function(){if(this===A.activeElement&&this.blur)return this.blur(),!1},delegateType:"focusout"},beforeunload:{postDispatch:function(a){a.result!==
b&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){a=g.extend(new g.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?g.event.trigger(a,null,b):g.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};g.removeEvent=A.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){b="on"+b;a.detachEvent&&(typeof a[b]===X&&(a[b]=null),a.detachEvent(b,c))};g.Event=function(a,b){if(!(this instanceof g.Event))return new g.Event(a,
b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?m:n):this.type=a;b&&g.extend(this,b);this.timeStamp=a&&a.timeStamp||g.now();this[g.expando]=!0};g.Event.prototype={isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=m;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=
this.originalEvent;this.isPropagationStopped=m;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=m;this.stopPropagation()}};g.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){g.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=a.relatedTarget,d=a.handleObj;if(!c||c!==this&&!g.contains(this,c)){a.type=d.origType;var e=d.handler.apply(this,arguments);a.type=b}return e}}});g.support.submitBubbles||
(g.event.special.submit={setup:function(){if(g.nodeName(this,"form"))return!1;g.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=g.nodeName(a,"input")||g.nodeName(a,"button")?a.form:b)&&!g._data(a,"submitBubbles")&&(g.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),g._data(a,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&g.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(g.nodeName(this,
"form"))return!1;g.event.remove(this,"._submit")}});g.support.changeBubbles||(g.event.special.change={setup:function(){if(Qa.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)g.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),g.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1);g.event.simulate("change",this,a,!0)});return!1}g.event.add(this,"beforeactivate._change",
function(a){a=a.target;Qa.test(a.nodeName)&&!g._data(a,"changeBubbles")&&(g.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||g.event.simulate("change",this.parentNode,a,!0)}),g._data(a,"changeBubbles",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){g.event.remove(this,"._change");return!Qa.test(this.nodeName)}});g.support.focusinBubbles||
g.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){g.event.simulate(b,a.target,g.event.fix(a),!0)};g.event.special[b]={setup:function(){0===c++&&A.addEventListener(a,d,!0)},teardown:function(){0===--c&&A.removeEventListener(a,d,!0)}}});g.fn.extend({on:function(a,c,d,e,f){var k;if("object"===typeof a){"string"!==typeof c&&(d=d||c,c=b);for(k in a)this.on(k,c,d,a[k],f);return this}null==d&&null==e?(e=c,d=c=b):null==e&&("string"===typeof c?(e=d,d=b):(e=d,d=c,c=b));if(!1===e)e=
n;else if(!e)return this;if(1===f){var h=e;e=function(a){g().off(a);return h.apply(this,arguments)};e.guid=h.guid||(h.guid=g.guid++)}return this.each(function(){g.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;g(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler);return this}if("object"===typeof a){for(e in a)this.off(e,c,a[e]);return this}if(!1===c||"function"===
typeof c)d=c,c=b;!1===d&&(d=n);return this.each(function(){g.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){g.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return g.event.trigger(a,b,c,!0)}});(function(a,
b){function c(){var a,b=[];return a=function(c,d){b.push(c+=" ")>J.cacheLength&&delete a[b.shift()];return a[c]=d}}function d(a){a[G]=!0;return a}function e(a){var b=K.createElement("div");try{return a(b)}catch(da){return!1}finally{}}function k(a,b,c,d){var e,k,f,g;(b?b.ownerDocument||b:N)!==K&&aa(b);b=b||K;c=c||[];if(!a||"string"!==typeof a)return c;if(1!==(g=b.nodeType)&&9!==g)return[];if(!w&&!d){if(e=ka.exec(a))if(f=e[1])if(9===g)if((k=b.getElementById(f))&&k.parentNode){if(k.id===f)return c.push(k),
c}else return c;else{if(b.ownerDocument&&(k=b.ownerDocument.getElementById(f))&&B(b,k)&&k.id===f)return c.push(k),c}else{if(e[2])return Z.apply(c,T.call(b.getElementsByTagName(a),0)),c;if((f=e[3])&&H.getByClassName&&b.getElementsByClassName)return Z.apply(c,T.call(b.getElementsByClassName(f),0)),c}if(H.qsa&&!F.test(a)){e=!0;k=G;f=b;var h=9===g&&a;if(1===g&&"object"!==b.nodeName.toLowerCase()){g=m(a);(e=b.getAttribute("id"))?k=e.replace(ma,"\\$&"):b.setAttribute("id",k);k="[id='"+k+"'] ";for(f=g.length;f--;)g[f]=
k+n(g[f]);f=va.test(a)&&b.parentNode||b;h=g.join(",")}if(h)try{return Z.apply(c,T.call(f.querySelectorAll(h),0)),c}catch(zc){}finally{e||b.removeAttribute("id")}}}var l;a:{a=a.replace(ba,"$1");k=m(a);if(!d&&1===k.length){e=k[0]=k[0].slice(0);if(2<e.length&&"ID"===(l=e[0]).type&&9===b.nodeType&&!w&&J.relative[e[1].type]){b=J.find.ID(l.matches[0].replace(ra,sa),b)[0];if(!b){l=c;break a}a=a.slice(e.shift().value.length)}for(g=ha.needsContext.test(a)?0:e.length;g--;){l=e[g];if(J.relative[f=l.type])break;
if(f=J.find[f])if(d=f(l.matches[0].replace(ra,sa),va.test(e[0].type)&&b.parentNode||b)){e.splice(g,1);a=d.length&&n(e);if(!a){Z.apply(c,T.call(d,0));l=c;break a}break}}}na(a,k)(d,b,w,c,va.test(a));l=c}return l}function f(a,b){var c=b&&a,d=c&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function p(a){return function(b){var c=
b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function l(a){return d(function(b){b=+b;return d(function(c,d){for(var e,k=a([],c.length,b),f=k.length;f--;)c[e=k[f]]&&(c[e]=!(d[e]=c[e]))})})}function m(a,b){var c,d,e,f,g;if(f=V[a+" "])return b?0:f.slice(0);f=a;var h=[];for(g=J.preFilter;f;){if(!l||(c=Y.exec(f)))c&&(f=f.slice(c[0].length)||f),h.push(d=[]);var l=!1;if(c=ia.exec(f))l=c.shift(),d.push({value:l,type:c[0].replace(ba," ")}),f=f.slice(l.length);for(e in J.filter)!(c=
ha[e].exec(f))||g[e]&&!(c=g[e](c))||(l=c.shift(),d.push({value:l,type:e,matches:c}),f=f.slice(l.length));if(!l)break}return b?f.length:f?k.error(a):V(a,h).slice(0)}function n(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function t(a,b,c){var d=b.dir,e=c&&"parentNode"===d,k=ea++;return b.first?function(b,c,k){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,k)}:function(b,c,f){var g,h,l=L+" "+k;if(f)for(;b=b[d];){if((1===b.nodeType||e)&&a(b,c,f))return!0}else for(;b=b[d];)if(1===b.nodeType||
e){var p=b[G]||(b[G]={});if((h=p[d])&&h[0]===l){if(!0===(g=h[1])||g===u)return!0===g}else if(h=p[d]=[l],h[1]=a(b,c,f)||u,!0===h[1])return!0}}}function q(a){return 1<a.length?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function v(a,b,c,d,e){for(var k,f=[],g=0,h=a.length,l=null!=b;g<h;g++)if(k=a[g])if(!c||c(k,d,e))f.push(k),l&&b.push(g);return f}function D(a,b,c,e,f,g){e&&!e[G]&&(e=D(e));f&&!f[G]&&(f=D(f,g));return d(function(d,g,h,l){var p,m=[],r=[],n=g.length,y;
if(!(y=d)){y=b||"*";for(var t=h.nodeType?[h]:h,qa=[],I=0,q=t.length;I<q;I++)k(y,t[I],qa);y=qa}y=!a||!d&&b?y:v(y,m,a,h,l);t=c?f||(d?a:n||e)?[]:g:y;c&&c(y,t,h,l);if(e){var da=v(t,r);e(da,[],h,l);for(h=da.length;h--;)if(p=da[h])t[r[h]]=!(y[r[h]]=p)}if(d){if(f||a){if(f){da=[];for(h=t.length;h--;)(p=t[h])&&da.push(y[h]=p);f(null,t=[],da,l)}for(h=t.length;h--;)(p=t[h])&&-1<(da=f?W.call(d,p):m[h])&&(d[da]=!(g[da]=p))}}else t=v(t===g?t.splice(n,t.length):t),f?f(null,g,t,l):Z.apply(g,t)})}function z(a){var b,
c,d=a.length,e=J.relative[a[0].type];var k=e||J.relative[" "];for(var f=e?1:0,g=t(function(a){return a===b},k,!0),h=t(function(a){return-1<W.call(b,a)},k,!0),l=[function(a,c,d){return!e&&(d||c!==A)||((b=c).nodeType?g(a,c,d):h(a,c,d))}];f<d;f++)if(k=J.relative[a[f].type])l=[t(q(l),k)];else{k=J.filter[a[f].type].apply(null,a[f].matches);if(k[G]){for(c=++f;c<d&&!J.relative[a[c].type];c++);return D(1<f&&q(l),1<f&&n(a.slice(0,f-1)).replace(ba,"$1"),k,f<c&&z(a.slice(f,c)),c<d&&z(a=a.slice(c)),c<d&&n(a))}l.push(k)}return q(l)}
function P(a,b){var c=0,e=0<b.length,f=0<a.length,g=function(d,g,h,l,p){var m,r,y=[],n=0,t="0",I=d&&[],qa=null!=p,q=A,da=d||f&&J.find.TAG("*",p&&g.parentNode||g),S=L+=null==q?1:Math.random()||.1;qa&&(A=g!==K&&g,u=c);for(;null!=(p=da[t]);t++){if(f&&p){for(m=0;r=a[m++];)if(r(p,g,h)){l.push(p);break}qa&&(L=S,u=++c)}e&&((p=!r&&p)&&n--,d&&I.push(p))}n+=t;if(e&&t!==n){for(m=0;r=b[m++];)r(I,y,g,h);if(d){if(0<n)for(;t--;)I[t]||y[t]||(y[t]=U.call(l));y=v(y)}Z.apply(l,y);qa&&!d&&0<y.length&&1<n+b.length&&k.uniqueSort(l)}qa&&
(L=S,A=q);return I};return e?d(g):g}function M(){}var x,u,C,A,K,E,w,F,O,ua,B,X,G="sizzle"+-new Date,N=a.document,H={},L=0,ea=0,ta=c(),V=c(),Fa=c(),Q=typeof b,R=[],U=R.pop,Z=R.push,T=R.slice,W=R.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1};R="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#");var Aa="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+R+")|)|)[\\x20\\t\\r\\n\\f]*\\]",
xa=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+Aa.replace(3,8)+")*)|.*)\\)|)",ba=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,Y=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,ia=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,fa=new RegExp(xa),wa=new RegExp("^"+R+"$"),ha={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,NAME:/^\[name=['"]?((?:\\.|[\w-]|[^\x00-\xa0])+)['"]?\]/,TAG:new RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w",
"w*")+")"),ATTR:new RegExp("^"+Aa),PSEUDO:new RegExp("^"+xa),CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},va=/[\x20\t\r\n\f]*[+~]/,ca=/^[^{]+\{\s*\[native code/,ka=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,La=/^(?:input|select|textarea|button)$/i,
la=/^h\d$/i,ma=/'|\\/g,oa=/=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,ra=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,sa=function(a,b){a="0x"+b-65536;return a!==a?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)};try{T.call(N.documentElement.childNodes,0)[0].nodeType}catch(qa){T=function(a){for(var b,c=[];b=this[a++];)c.push(b);return c}}var pa=k.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};var aa=k.setDocument=function(a){var c=
a?a.ownerDocument||a:N;if(c===K||9!==c.nodeType||!c.documentElement)return K;K=c;E=c.documentElement;w=pa(c);H.tagNameNoComments=e(function(a){a.appendChild(c.createComment(""));return!a.getElementsByTagName("*").length});H.attributes=e(function(a){a.innerHTML="<select></select>";a=typeof a.lastChild.getAttribute("multiple");return"boolean"!==a&&"string"!==a});H.getByClassName=e(function(a){a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!a.getElementsByClassName||!a.getElementsByClassName("e").length)return!1;
a.lastChild.className="e";return 2===a.getElementsByClassName("e").length});H.getByName=e(function(a){a.id=G+0;a.innerHTML="<a name='"+G+"'></a><div name='"+G+"'></div>";E.insertBefore(a,E.firstChild);var b=c.getElementsByName&&c.getElementsByName(G).length===2+c.getElementsByName(G+0).length;H.getIdNotName=!c.getElementById(G);E.removeChild(a);return b});J.attrHandle=e(function(a){a.innerHTML="<a href='#'></a>";return a.firstChild&&typeof a.firstChild.getAttribute!==Q&&"#"===a.firstChild.getAttribute("href")})?
{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}};H.getIdNotName?(J.find.ID=function(a,b){if(typeof b.getElementById!==Q&&!w)return(a=b.getElementById(a))&&a.parentNode?[a]:[]},J.filter.ID=function(a){var b=a.replace(ra,sa);return function(a){return a.getAttribute("id")===b}}):(J.find.ID=function(a,c){if(typeof c.getElementById!==Q&&!w)return(c=c.getElementById(a))?c.id===a||typeof c.getAttributeNode!==Q&&c.getAttributeNode("id").value===a?[c]:
b:[]},J.filter.ID=function(a){var b=a.replace(ra,sa);return function(a){return(a=typeof a.getAttributeNode!==Q&&a.getAttributeNode("id"))&&a.value===b}});J.find.TAG=H.tagNameNoComments?function(a,b){if(typeof b.getElementsByTagName!==Q)return b.getElementsByTagName(a)}:function(a,b){var c=[],d=0;b=b.getElementsByTagName(a);if("*"===a){for(;a=b[d++];)1===a.nodeType&&c.push(a);return c}return b};J.find.NAME=H.getByName&&function(a,b){if(typeof b.getElementsByName!==Q)return b.getElementsByName(name)};
J.find.CLASS=H.getByClassName&&function(a,b){if(typeof b.getElementsByClassName!==Q&&!w)return b.getElementsByClassName(a)};O=[];F=[":focus"];if(H.qsa=ca.test(c.querySelectorAll+""))e(function(a){a.innerHTML="<select><option selected=''></option></select>";a.querySelectorAll("[selected]").length||F.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");a.querySelectorAll(":checked").length||F.push(":checked")}),e(function(a){a.innerHTML="<input type='hidden' i=''/>";
a.querySelectorAll("[i^='']").length&&F.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')");a.querySelectorAll(":enabled").length||F.push(":enabled",":disabled");a.querySelectorAll("*,:x");F.push(",.*:")});(H.matchesSelector=ca.test((ua=E.matchesSelector||E.mozMatchesSelector||E.webkitMatchesSelector||E.oMatchesSelector||E.msMatchesSelector)+""))&&e(function(a){H.disconnectedMatch=ua.call(a,"div");ua.call(a,"[s!='']:x");O.push("!=",xa)});F=new RegExp(F.join("|"));O=new RegExp(O.join("|"));B=ca.test(E.contains+
"")||E.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a;b=b&&b.parentNode;return a===b||!!(b&&1===b.nodeType&&(c.contains?c.contains(b):a.compareDocumentPosition&&a.compareDocumentPosition(b)&16))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};X=E.compareDocumentPosition?function(a,b){var d;return a===b?(C=!0,0):(d=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b))?d&1||a.parentNode&&11===a.parentNode.nodeType?a===
c||B(N,a)?-1:b===c||B(N,b)?1:0:d&4?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var d=0,e=a.parentNode,k=b.parentNode,g=[a],h=[b];if(a===b)return C=!0,0;if(!e||!k)return a===c?-1:b===c?1:e?-1:k?1:0;if(e===k)return f(a,b);for(;a=a.parentNode;)g.unshift(a);for(a=b;a=a.parentNode;)h.unshift(a);for(;g[d]===h[d];)d++;return d?f(g[d],h[d]):g[d]===N?-1:h[d]===N?1:0};C=!1;[0,0].sort(X);H.detectDuplicates=C;return K};k.matches=function(a,b){return k(a,null,null,b)};k.matchesSelector=function(a,b){(a.ownerDocument||
a)!==K&&aa(a);b=b.replace(oa,"='$1']");if(!(!H.matchesSelector||w||O&&O.test(b)||F.test(b)))try{var c=ua.call(a,b);if(c||H.disconnectedMatch||a.document&&11!==a.document.nodeType)return c}catch(yc){}return 0<k(b,K,null,[a]).length};k.contains=function(a,b){(a.ownerDocument||a)!==K&&aa(a);return B(a,b)};k.attr=function(a,b){var c;(a.ownerDocument||a)!==K&&aa(a);w||(b=b.toLowerCase());return(c=J.attrHandle[b])?c(a):w||H.attributes?a.getAttribute(b):((c=a.getAttributeNode(b))||a.getAttribute(b))&&!0===
a[b]?b:c&&c.specified?c.value:null};k.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};k.uniqueSort=function(a){var b,c=[],d=1,e=0;C=!H.detectDuplicates;a.sort(X);if(C){for(;b=a[d];d++)b===a[d-1]&&(e=c.push(d));for(;e--;)a.splice(c[e],1)}return a};var ja=k.getText=function(a){var b="",c=0;var d=a.nodeType;if(!d)for(;d=a[c];c++)b+=ja(d);else if(1===d||9===d||11===d){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)b+=ja(a)}else if(3===
d||4===d)return a.nodeValue;return b};var J=k.selectors={cacheLength:50,createPseudo:d,match:ha,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(ra,sa);a[3]=(a[4]||a[5]||"").replace(ra,sa);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||k.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===
a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&k.error(a[0]);return a},PSEUDO:function(a){var b,c=!a[5]&&a[2];if(ha.CHILD.test(a[0]))return null;a[4]?a[2]=a[4]:c&&fa.test(c)&&(b=m(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b));return a.slice(0,3)}},filter:{TAG:function(a){if("*"===a)return function(){return!0};a=a.replace(ra,sa).toLowerCase();return function(b){return b.nodeName&&b.nodeName.toLowerCase()===a}},CLASS:function(a){var b=ta[a+" "];
return b||(b=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"),ta(a,function(a){return b.test(a.className||typeof a.getAttribute!==Q&&a.getAttribute("class")||"")}))},ATTR:function(a,b,c){return function(d){d=k.attr(d,a);if(null==d)return"!="===b;if(!b)return!0;d+="";return"="===b?d===c:"!="===b?d!==c:"^="===b?c&&0===d.indexOf(c):"*="===b?c&&-1<d.indexOf(c):"$="===b?c&&d.slice(-c.length)===c:"~="===b?-1<(" "+d+" ").indexOf(c):"|="===b?d===c||d.slice(0,c.length+1)===c+"-":!1}},CHILD:function(a,
b,c,d,e){var k="nth"!==a.slice(0,3),f="last"!==a.slice(-4),g="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,h){var l;c=k!==f?"nextSibling":"previousSibling";var p=b.parentNode,m=g&&b.nodeName.toLowerCase();h=!h&&!g;if(p){if(k){for(;c;){for(l=b;l=l[c];)if(g?l.nodeName.toLowerCase()===m:1===l.nodeType)return!1;var r=c="only"===a&&!r&&"nextSibling"}return!0}r=[f?p.firstChild:p.lastChild];if(f&&h){h=p[G]||(p[G]={});var y=h[a]||[];var n=y[0]===L&&y[1];var t=y[0]===L&&
y[2];for(l=n&&p.childNodes[n];l=++n&&l&&l[c]||(t=n=0)||r.pop();)if(1===l.nodeType&&++t&&l===b){h[a]=[L,n,t];break}}else if(h&&(y=(b[G]||(b[G]={}))[a])&&y[0]===L)t=y[1];else for(;(l=++n&&l&&l[c]||(t=n=0)||r.pop())&&((g?l.nodeName.toLowerCase()!==m:1!==l.nodeType)||!++t||(h&&((l[G]||(l[G]={}))[a]=[L,t]),l!==b)););t-=e;return t===d||0===t%d&&0<=t/d}}},PSEUDO:function(a,b){var c=J.pseudos[a]||J.setFilters[a.toLowerCase()]||k.error("unsupported pseudo: "+a);if(c[G])return c(b);if(1<c.length){var e=[a,
a,"",b];return J.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,d){for(var e,k=c(a,b),f=k.length;f--;)e=W.call(a,k[f]),a[e]=!(d[e]=k[f])}):function(a){return c(a,0,e)}}return c}},pseudos:{not:d(function(a){var b=[],c=[],e=na(a.replace(ba,"$1"));return e[G]?d(function(a,b,c,d){d=e(a,null,d,[]);for(var k=a.length;k--;)if(c=d[k])a[k]=!(b[k]=c)}):function(a,d,k){b[0]=a;e(b,null,k,c);return!c.pop()}}),has:d(function(a){return function(b){return 0<k(a,b).length}}),contains:d(function(a){return function(b){return-1<
(b.textContent||b.innerText||ja(b)).indexOf(a)}}),lang:d(function(a){wa.test(a||"")||k.error("unsupported lang: "+a);a=a.replace(ra,sa).toLowerCase();return function(b){var c;do if(c=w?b.getAttribute("xml:lang")||b.getAttribute("lang"):b.lang)return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===E},focus:function(a){return a===K.activeElement&&
(!K.hasFocus||K.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if("@"<a.nodeName||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!J.pseudos.empty(a)},
header:function(a){return la.test(a.nodeName)},input:function(a){return La.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:l(function(){return[0]}),last:l(function(a,b){return[b-1]}),eq:l(function(a,b,c){return[0>c?c+b:c]}),even:l(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),
odd:l(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:l(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:l(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})J.pseudos[x]=h(x);for(x in{submit:!0,reset:!0})J.pseudos[x]=p(x);var na=k.compile=function(a,b){var c,d=[],e=[],k=Fa[a+" "];if(!k){b||(b=m(a));for(c=b.length;c--;)k=z(b[c]),k[G]?d.push(k):e.push(k);k=Fa(a,P(e,d))}return k};J.pseudos.nth=J.pseudos.eq;
J.filters=M.prototype=J.pseudos;J.setFilters=new M;aa();k.attr=g.attr;g.find=k;g.expr=k.selectors;g.expr[":"]=g.expr.pseudos;g.unique=k.uniqueSort;g.text=k.getText;g.isXMLDoc=k.isXML;g.contains=k.contains})(a);var Xb=/Until$/,Yb=/^(?:parents|prev(?:Until|All))/,Ab=/^.[^:#\[\.,]*$/,jb=g.expr.match.needsContext,Zb={children:!0,contents:!0,next:!0,prev:!0};g.fn.extend({find:function(a){var b,c=this.length;if("string"!==typeof a){var d=this;return this.pushStack(g(a).filter(function(){for(b=0;b<c;b++)if(g.contains(d[b],
this))return!0}))}var e=[];for(b=0;b<c;b++)g.find(a,this[b],e);e=this.pushStack(1<c?g.unique(e):e);e.selector=(this.selector?this.selector+" ":"")+a;return e},has:function(a){var b,c=g(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(g.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(C(this,a,!1))},filter:function(a){return this.pushStack(C(this,a,!0))},is:function(a){return!!a&&("string"===typeof a?jb.test(a)?0<=g(a,this.context).index(this[0]):0<g.filter(a,
this).length:0<this.filter(a).length)},closest:function(a,b){for(var c,d=0,e=this.length,k=[],f=jb.test(a)||"string"!==typeof a?g(a,b||this.context):0;d<e;d++)for(c=this[d];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(f?-1<f.index(c):g.find.matchesSelector(c,a)){k.push(c);break}c=c.parentNode}return this.pushStack(1<k.length?g.unique(k):k)},index:function(a){return a?"string"===typeof a?g.inArray(this[0],g(a)):g.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:
-1},add:function(a,b){a="string"===typeof a?g(a,b):g.makeArray(a&&a.nodeType?[a]:a);a=g.merge(this.get(),a);return this.pushStack(g.unique(a))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});g.fn.andSelf=g.fn.addBack;g.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return g.dir(a,"parentNode")},parentsUntil:function(a,b,c){return g.dir(a,"parentNode",c)},next:function(a){return z(a,"nextSibling")},prev:function(a){return z(a,
"previousSibling")},nextAll:function(a){return g.dir(a,"nextSibling")},prevAll:function(a){return g.dir(a,"previousSibling")},nextUntil:function(a,b,c){return g.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return g.dir(a,"previousSibling",c)},siblings:function(a){return g.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return g.sibling(a.firstChild)},contents:function(a){return g.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:g.merge([],a.childNodes)}},function(a,
b){g.fn[a]=function(c,d){var e=g.map(this,b,c);Xb.test(a)||(d=c);d&&"string"===typeof d&&(e=g.filter(d,e));e=1<this.length&&!Zb[a]?g.unique(e):e;1<this.length&&Yb.test(a)&&(e=e.reverse());return this.pushStack(e)}});g.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return 1===b.length?g.find.matchesSelector(b[0],a)?[b[0]]:[]:g.find.matches(a,b)},dir:function(a,c,d){var e=[];for(a=a[c];a&&9!==a.nodeType&&(d===b||1!==a.nodeType||!g(a).is(d));)1===a.nodeType&&e.push(a),a=a[c];return e},sibling:function(a,
b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Za="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",$b=/ jQuery\d+="(?:null|\d+)"/g,kb=new RegExp("<(?:"+Za+")[\\s/>]","i"),Ra=/^\s+/,lb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,mb=/<([\w:]+)/,nb=/<tbody/i,ac=/<|&#?\w+;/,bc=/<(?:script|style|link)/i,Ja=/^(?:checkbox|radio)$/i,
cc=/checked\s*(?:[^=]|=\s*.checked.)/i,ob=/^$|\/(?:java|ecma)script/i,Bb=/^true\/(.*)/,dc=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Y={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:g.support.htmlSerialize?
[0,"",""]:[1,"X<div>","</div>"]},Sa=x(A).appendChild(A.createElement("div"));Y.optgroup=Y.option;Y.tbody=Y.tfoot=Y.colgroup=Y.caption=Y.thead;Y.th=Y.td;g.fn.extend({text:function(a){return g.access(this,function(a){return a===b?g.text(this):this.empty().append((this[0]&&this[0].ownerDocument||A).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(g.isFunction(a))return this.each(function(b){g(this).wrapAll(a.call(this,b))});if(this[0]){var b=g(a,this[0].ownerDocument).eq(0).clone(!0);
this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return g.isFunction(a)?this.each(function(b){g(this).wrapInner(a.call(this,b))}):this.each(function(){var b=g(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=g.isFunction(a);return this.each(function(c){g(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){g.nodeName(this,
"body")||g(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||this.insertBefore(a,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,
!1,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)if(!a||0<g.filter(a,[c]).length)b||1!==c.nodeType||g.cleanData(v(c)),c.parentNode&&(b&&g.contains(c.ownerDocument,c)&&q(v(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&g.cleanData(v(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&g.nodeName(a,"select")&&(a.options.length=
0)}return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return g.clone(this,a,b)})},html:function(a){return g.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace($b,""):b;if(!("string"!==typeof a||bc.test(a)||!g.support.htmlSerialize&&kb.test(a)||!g.support.leadingWhitespace&&Ra.test(a)||Y[(mb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(lb,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},1===c.nodeType&&
(g.cleanData(v(c,!1)),c.innerHTML=a);c=0}catch(S){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){g.isFunction(a)||"string"===typeof a||(a=g(a).not(this).detach());return this.domManip([a],!0,function(a){var b=this.nextSibling,c=this.parentNode;c&&(g(this).remove(),c.insertBefore(a,b))})},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=xa.apply([],a);var e,f=0,k=this.length,h=this,l=k-1,m=a[0],p=g.isFunction(m);if(p||!(1>=k||"string"!==typeof m||
g.support.checkClone)&&cc.test(m))return this.each(function(e){var f=h.eq(e);p&&(a[0]=m.call(this,e,c?f.html():b));f.domManip(a,c,d)});if(k){var r=g.buildFragment(a,this[0].ownerDocument,!1,this);var n=r.firstChild;1===r.childNodes.length&&(r=n);if(n){c=c&&g.nodeName(n,"tr");var q=g.map(v(r,"script"),t);for(e=q.length;f<k;f++)n=r,f!==l&&(n=g.clone(n,!0,!0),e&&g.merge(q,v(n,"script"))),d.call(c&&g.nodeName(this[f],"table")?F(this[f],"tbody"):this[f],n,f);if(e)for(r=q[q.length-1].ownerDocument,g.map(q,
D),f=0;f<e;f++)n=q[f],ob.test(n.type||"")&&!g._data(n,"globalEval")&&g.contains(r,n)&&(n.src?g.ajax({url:n.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):g.globalEval((n.text||n.textContent||n.innerHTML||"").replace(dc,"")));r=n=null}}return this}});g.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){g.fn[a]=function(a){for(var c=0,d=[],e=g(a),f=e.length-1;c<=f;c++)a=c===f?this:this.clone(!0),g(e[c])[b](a),
va.apply(d,a.get());return this.pushStack(d)}});g.extend({clone:function(a,b,c){var d,e,f=g.contains(a.ownerDocument,a);if(g.support.html5Clone||g.isXMLDoc(a)||!kb.test("<"+a.nodeName+">"))var k=a.cloneNode(!0);else Sa.innerHTML=a.outerHTML,Sa.removeChild(k=Sa.firstChild);if(!(g.support.noCloneEvent&&g.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||g.isXMLDoc(a))){var h=v(k);var l=v(a);for(e=0;null!=(d=l[e]);++e)if(h[e]){var m=void 0,p=d,n=h[e];if(1===n.nodeType){var r=n.nodeName.toLowerCase();
if(!g.support.noCloneEvent&&n[g.expando]){d=g._data(n);for(m in d.events)g.removeEvent(n,m,d.handle);n.removeAttribute(g.expando)}if("script"===r&&n.text!==p.text)t(n).text=p.text,D(n);else if("object"===r)n.parentNode&&(n.outerHTML=p.outerHTML),g.support.html5Clone&&p.innerHTML&&!g.trim(n.innerHTML)&&(n.innerHTML=p.innerHTML);else if("input"===r&&Ja.test(p.type))n.defaultChecked=n.checked=p.checked,n.value!==p.value&&(n.value=p.value);else if("option"===r)n.defaultSelected=n.selected=p.defaultSelected;
else if("input"===r||"textarea"===r)n.defaultValue=p.defaultValue}}}if(b)if(c)for(l=l||v(a),h=h||v(k),e=0;null!=(d=l[e]);e++)w(d,h[e]);else w(a,k);h=v(k,"script");0<h.length&&q(h,!f&&v(a,"script"));return k},buildFragment:function(a,b,c,d){for(var e,f,k,h,l,m,p=a.length,n=x(b),r=[],t=0;t<p;t++)if((f=a[t])||0===f)if("object"===g.type(f))g.merge(r,f.nodeType?[f]:f);else if(ac.test(f)){k=k||n.appendChild(b.createElement("div"));h=(mb.exec(f)||["",""])[1].toLowerCase();m=Y[h]||Y._default;k.innerHTML=
m[1]+f.replace(lb,"<$1></$2>")+m[2];for(e=m[0];e--;)k=k.lastChild;!g.support.leadingWhitespace&&Ra.test(f)&&r.push(b.createTextNode(Ra.exec(f)[0]));if(!g.support.tbody)for(e=(f="table"!==h||nb.test(f)?"<table>"!==m[1]||nb.test(f)?0:k:k.firstChild)&&f.childNodes.length;e--;)g.nodeName(l=f.childNodes[e],"tbody")&&!l.childNodes.length&&f.removeChild(l);g.merge(r,k.childNodes);for(k.textContent="";k.firstChild;)k.removeChild(k.firstChild);k=n.lastChild}else r.push(b.createTextNode(f));k&&n.removeChild(k);
g.support.appendChecked||g.grep(v(r,"input"),u);for(t=0;f=r[t++];)if(!d||-1===g.inArray(f,d))if(a=g.contains(f.ownerDocument,f),k=v(n.appendChild(f),"script"),a&&q(k),c)for(e=0;f=k[e++];)ob.test(f.type||"")&&c.push(f);return n},cleanData:function(a,b){for(var c,d,e,f,k=0,h=g.expando,l=g.cache,m=g.support.deleteExpando,p=g.event.special;null!=(c=a[k]);k++)if(b||g.acceptData(c))if(f=(e=c[h])&&l[e]){if(f.events)for(d in f.events)p[d]?g.event.remove(c,d):g.removeEvent(c,d,f.handle);l[e]&&(delete l[e],
m?delete c[h]:typeof c.removeAttribute!==X?c.removeAttribute(h):c[h]=null,Z.push(e))}}});var ya,Ta=/alpha\([^)]*\)/i,ec=/opacity\s*=\s*([^)]*)/,fc=/^(top|right|bottom|left)$/,gc=/^(none|table(?!-c[ea]).+)/,pb=/^margin/,Cb=new RegExp("^("+Ga+")(.*)$","i"),Da=new RegExp("^("+Ga+")(?!px)[a-z%]+$","i"),hc=new RegExp("^([+-])=("+Ga+")","i"),ab={BODY:"block"},ic={position:"absolute",visibility:"hidden",display:"block"},qb={letterSpacing:0,fontWeight:400},ka=["Top","Right","Bottom","Left"],$a=["Webkit",
"O","Moz","ms"];g.fn.extend({css:function(a,c){return g.access(this,function(a,c,d){var e={},f=0;if(g.isArray(c)){var k=oa(a);for(d=c.length;f<d;f++)e[c[f]]=g.css(a,c[f],!1,k);return e}return d!==b?g.style(a,c,d):g.css(a,c)},a,c,1<arguments.length)},show:function(){return N(this,!0)},hide:function(){return N(this)},toggle:function(a){var b="boolean"===typeof a;return this.each(function(){(b?a:G(this))?g(this).show():g(this).hide()})}});g.extend({cssHooks:{opacity:{get:function(a,b){if(b)return a=
pa(a,"opacity"),""===a?"1":a}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":g.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,k=g.camelCase(c),h=a.style;c=g.cssProps[k]||(g.cssProps[k]=E(h,k));var l=g.cssHooks[c]||g.cssHooks[k];if(d!==b){var m=typeof d;"string"===m&&(f=hc.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(g.css(a,c)),m="number");if(!(null==
d||"number"===m&&isNaN(d)||("number"!==m||g.cssNumber[k]||(d+="px"),g.support.clearCloneStyle||""!==d||0!==c.indexOf("background")||(h[c]="inherit"),l&&"set"in l&&(d=l.set(a,d,e))===b)))try{h[c]=d}catch(wc){}}else return l&&"get"in l&&(f=l.get(a,!1,e))!==b?f:h[c]}},css:function(a,c,d,e){var f;var k=g.camelCase(c);c=g.cssProps[k]||(g.cssProps[k]=E(a.style,k));(k=g.cssHooks[c]||g.cssHooks[k])&&"get"in k&&(f=k.get(a,!0,d));f===b&&(f=pa(a,c,e));"normal"===f&&c in qb&&(f=qb[c]);return""===d||d?(a=parseFloat(f),
!0===d||g.isNumeric(a)?a||0:f):f},swap:function(a,b,c,d){var e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];c=c.apply(a,d||[]);for(e in b)a.style[e]=f[e];return c}});if(a.getComputedStyle){var oa=function(b){return a.getComputedStyle(b,null)};var pa=function(a,c,d){var e=(d=d||oa(a))?d.getPropertyValue(c)||d[c]:b,f=a.style;if(d&&(""!==e||g.contains(a.ownerDocument,a)||(e=g.style(a,c)),Da.test(e)&&pb.test(c))){a=f.width;c=f.minWidth;var k=f.maxWidth;f.minWidth=f.maxWidth=f.width=e;e=d.width;f.width=
a;f.minWidth=c;f.maxWidth=k}return e}}else A.documentElement.currentStyle&&(oa=function(a){return a.currentStyle},pa=function(a,c,d){var e,f,g=(d=d||oa(a))?d[c]:b,k=a.style;null==g&&k&&k[c]&&(g=k[c]);if(Da.test(g)&&!fc.test(c)){d=k.left;if(f=(e=a.runtimeStyle)&&e.left)e.left=a.currentStyle.left;k.left="fontSize"===c?"1em":g;g=k.pixelLeft+"px";k.left=d;f&&(e.left=f)}return""===g?"auto":g});g.each(["height","width"],function(a,b){g.cssHooks[b]={get:function(a,c,d){if(c)return 0===a.offsetWidth&&gc.test(g.css(a,
"display"))?g.swap(a,ic,function(){return U(a,b,d)}):U(a,b,d)},set:function(a,c,d){var e=d&&oa(a);return H(a,c,d?L(a,b,d,g.support.boxSizing&&"border-box"===g.css(a,"boxSizing",!1,e),e):0)}}});g.support.opacity||(g.cssHooks.opacity={get:function(a,b){return ec.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style;a=a.currentStyle;var d=g.isNumeric(b)?"alpha(opacity="+100*b+")":"",e=a&&a.filter||c.filter||"";c.zoom=
1;if((1<=b||""===b)&&""===g.trim(e.replace(Ta,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||a&&!a.filter))return;c.filter=Ta.test(e)?e.replace(Ta,d):e+" "+d}});g(function(){g.support.reliableMarginRight||(g.cssHooks.marginRight={get:function(a,b){if(b)return g.swap(a,{display:"inline-block"},pa,[a,"marginRight"])}});!g.support.pixelPosition&&g.fn.position&&g.each(["top","left"],function(a,b){g.cssHooks[b]={get:function(a,c){if(c)return c=pa(a,b),Da.test(c)?g(a).position()[b]+"px":
c}}})});g.expr&&g.expr.filters&&(g.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight||!g.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||g.css(a,"display"))},g.expr.filters.visible=function(a){return!g.expr.filters.hidden(a)});g.each({margin:"",padding:"",border:"Width"},function(a,b){g.cssHooks[a+b]={expand:function(c){var d=0,e={};for(c="string"===typeof c?c.split(" "):[c];4>d;d++)e[a+ka[d]+b]=c[d]||c[d-2]||c[0];return e}};pb.test(a)||(g.cssHooks[a+b].set=
H)});var jc=/%20/g,Db=/\[\]$/,rb=/\r?\n/g,kc=/^(?:submit|button|image|reset|file)$/i,lc=/^(?:input|select|textarea|keygen)/i;g.fn.extend({serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=g.prop(this,"elements");return a?g.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!g(this).is(":disabled")&&lc.test(this.nodeName)&&!kc.test(a)&&(this.checked||!Ja.test(a))}).map(function(a,b){a=g(this).val();return null==
a?null:g.isArray(a)?g.map(a,function(a){return{name:b.name,value:a.replace(rb,"\r\n")}}):{name:b.name,value:a.replace(rb,"\r\n")}}).get()}});g.param=function(a,c){var d,e=[],f=function(a,b){b=g.isFunction(b)?b():null==b?"":b;e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=g.ajaxSettings&&g.ajaxSettings.traditional);if(g.isArray(a)||a.jquery&&!g.isPlainObject(a))g.each(a,function(){f(this.name,this.value)});else for(d in a)Q(d,a[d],c,f);return e.join("&").replace(jc,"+")};g.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(a,b){g.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)}});g.fn.hover=function(a,b){return this.mouseenter(a).mouseleave(b||a)};var Ua=g.now(),Va=/\?/,mc=/#.*$/,sb=/([?&])_=[^&]*/,nc=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,oc=/^(?:GET|HEAD)$/,pc=/^\/\//,tb=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,ub=g.fn.load,vb={},Ka={},wb="*/".concat("*");try{var ma=Aa.href}catch(k){ma=A.createElement("a"),ma.href="",ma=ma.href}var ja=tb.exec(ma.toLowerCase())||[];g.fn.load=
function(a,c,d){if("string"!==typeof a&&ub)return ub.apply(this,arguments);var e,f,k=this,h=a.indexOf(" ");if(0<=h){var l=a.slice(h,a.length);a=a.slice(0,h)}g.isFunction(c)?(d=c,c=b):c&&"object"===typeof c&&(f="POST");0<k.length&&g.ajax({url:a,type:f,dataType:"html",data:c}).done(function(a){e=arguments;k.html(l?g("<div>").append(g.parseHTML(a)).find(l):a)}).complete(d&&function(a,b){k.each(d,e||[a.responseText,b,a])});return this};g.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),
function(a,b){g.fn[b]=function(a){return this.on(b,a)}});g.each(["get","post"],function(a,c){g[c]=function(a,d,e,f){g.isFunction(d)&&(f=f||e,e=d,d=b);return g.ajax({url:a,type:c,dataType:f,data:d,success:e})}});g.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ma,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ja[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":wb,text:"text/plain",html:"text/html",
xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":g.parseJSON,"text xml":g.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?ia(ia(a,g.ajaxSettings),b):ia(g.ajaxSettings,a)},ajaxPrefilter:R(vb),ajaxTransport:R(Ka),ajax:function(a,c){function d(a,c,d,e){var m=c;if(2!==M){M=2;k&&clearTimeout(k);
l=b;f=e||"";u.readyState=0<a?4:0;if(d){var r=n;e=u;var y,z,P,x=r.contents,K=r.dataTypes,E=r.responseFields;for(P in E)P in d&&(e[E[P]]=d[P]);for(;"*"===K[0];)K.shift(),z===b&&(z=r.mimeType||e.getResponseHeader("Content-Type"));if(z)for(P in x)if(x[P]&&x[P].test(z)){K.unshift(P);break}if(K[0]in d)var A=K[0];else{for(P in d){if(!K[0]||r.converters[P+" "+K[0]]){A=P;break}y||(y=P)}A=A||y}A?(A!==K[0]&&K.unshift(A),r=d[A]):r=void 0}if(200<=a&&300>a||304===a)if(n.ifModified&&((d=u.getResponseHeader("Last-Modified"))&&
(g.lastModified[C]=d),(d=u.getResponseHeader("etag"))&&(g.etag[C]=d)),204===a){var S=!0;m="nocontent"}else if(304===a)S=!0,m="notmodified";else{a:{var w=n;var I=r;var F;m={};y=0;z=w.dataTypes.slice();A=z[0];w.dataFilter&&(I=w.dataFilter(I,w.dataType));if(z[1])for(O in w.converters)m[O.toLowerCase()]=w.converters[O];for(;d=z[++y];)if("*"!==d){if("*"!==A&&A!==d){var O=m[A+" "+d]||m["* "+d];if(!O)for(F in m)if(S=F.split(" "),S[1]===d&&(O=m[A+" "+S[0]]||m["* "+S[0]])){!0===O?O=m[F]:!0!==m[F]&&(d=S[0],
z.splice(y--,0,d));break}if(!0!==O)if(O&&w["throws"])I=O(I);else try{I=O(I)}catch(Wb){S={state:"parsererror",error:O?Wb:"No conversion from "+A+" to "+d};break a}}A=d}S={state:"success",data:I}}m=S.state;w=S.data;I=S.error;S=!I}else if(I=m,a||!m)m="error",0>a&&(a=0);u.status=a;u.statusText=(c||m)+"";S?q.resolveWith(t,[w,m,u]):q.rejectWith(t,[u,m,I]);u.statusCode(D);D=b;h&&p.trigger(S?"ajaxSuccess":"ajaxError",[u,n,S?w:I]);v.fireWith(t,[u,m]);h&&(p.trigger("ajaxComplete",[u,n]),--g.active||g.event.trigger("ajaxStop"))}}
"object"===typeof a&&(c=a,a=b);c=c||{};var e,f,k,h,l,m,n=g.ajaxSetup({},c),t=n.context||n,p=n.context&&(t.nodeType||t.jquery)?g(t):g.event,q=g.Deferred(),v=g.Callbacks("once memory"),D=n.statusCode||{},z={},P={},M=0,x="canceled",u={readyState:0,getResponseHeader:function(a){var b;if(2===M){if(!m)for(m={};b=nc.exec(f);)m[b[1].toLowerCase()]=b[2];b=m[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===M?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();M||
(a=P[c]=P[c]||a,z[a]=b);return this},overrideMimeType:function(a){M||(n.mimeType=a);return this},statusCode:function(a){var b;if(a)if(2>M)for(b in a)D[b]=[D[b],a[b]];else u.always(a[u.status]);return this},abort:function(a){a=a||x;l&&l.abort(a);d(0,a);return this}};q.promise(u).complete=v.add;u.success=u.done;u.error=u.fail;n.url=((a||n.url||ma)+"").replace(mc,"").replace(pc,ja[1]+"//");n.type=c.method||c.type||n.method||n.type;n.dataTypes=g.trim(n.dataType||"*").toLowerCase().match(fa)||[""];null==
n.crossDomain&&(a=tb.exec(n.url.toLowerCase()),n.crossDomain=!(!a||a[1]===ja[1]&&a[2]===ja[2]&&(a[3]||("http:"===a[1]?80:443))==(ja[3]||("http:"===ja[1]?80:443))));n.data&&n.processData&&"string"!==typeof n.data&&(n.data=g.param(n.data,n.traditional));W(vb,n,c,u);if(2===M)return u;(h=n.global)&&0===g.active++&&g.event.trigger("ajaxStart");n.type=n.type.toUpperCase();n.hasContent=!oc.test(n.type);var C=n.url;n.hasContent||(n.data&&(C=n.url+=(Va.test(C)?"&":"?")+n.data,delete n.data),!1===n.cache&&
(n.url=sb.test(C)?C.replace(sb,"$1_="+Ua++):C+(Va.test(C)?"&":"?")+"_="+Ua++));n.ifModified&&(g.lastModified[C]&&u.setRequestHeader("If-Modified-Since",g.lastModified[C]),g.etag[C]&&u.setRequestHeader("If-None-Match",g.etag[C]));(n.data&&n.hasContent&&!1!==n.contentType||c.contentType)&&u.setRequestHeader("Content-Type",n.contentType);u.setRequestHeader("Accept",n.dataTypes[0]&&n.accepts[n.dataTypes[0]]?n.accepts[n.dataTypes[0]]+("*"!==n.dataTypes[0]?", "+wb+"; q=0.01":""):n.accepts["*"]);for(e in n.headers)u.setRequestHeader(e,
n.headers[e]);if(n.beforeSend&&(!1===n.beforeSend.call(t,u,n)||2===M))return u.abort();x="abort";for(e in{success:1,error:1,complete:1})u[e](n[e]);if(l=W(Ka,n,c,u)){u.readyState=1;h&&p.trigger("ajaxSend",[u,n]);n.async&&0<n.timeout&&(k=setTimeout(function(){u.abort("timeout")},n.timeout));try{M=1,l.send(z,d)}catch(ib){if(2>M)d(-1,ib);else throw ib;}}else d(-1,"No Transport");return u},getScript:function(a,c){return g.get(a,b,c,"script")},getJSON:function(a,b,c){return g.get(a,b,c,"json")}});g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){g.globalEval(a);return a}}});g.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});g.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=A.head||g("head")[0]||A.documentElement;return{send:function(b,e){c=A.createElement("script");c.async=!0;a.scriptCharset&&(c.charset=a.scriptCharset);c.src=a.url;c.onload=c.onreadystatechange=function(a,b){if(b||!c.readyState||
/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),c=null,b||e(200,"success")};d.insertBefore(c,d.firstChild)},abort:function(){if(c)c.onload(b,!0)}}}});var xb=[],Wa=/(=)\?(?=&|$)|\?\?/;g.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=xb.pop()||g.expando+"_"+Ua++;this[a]=!0;return a}});g.ajaxPrefilter("json jsonp",function(c,d,e){var f,h=!1!==c.jsonp&&(Wa.test(c.url)?"url":"string"===typeof c.data&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&
Wa.test(c.data)&&"data");if(h||"jsonp"===c.dataTypes[0]){var k=c.jsonpCallback=g.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback;h?c[h]=c[h].replace(Wa,"$1"+k):!1!==c.jsonp&&(c.url+=(Va.test(c.url)?"&":"?")+c.jsonp+"="+k);c.converters["script json"]=function(){f||g.error(k+" was not called");return f[0]};c.dataTypes[0]="json";var l=a[k];a[k]=function(){f=arguments};e.always(function(){a[k]=l;c[k]&&(c.jsonpCallback=d.jsonpCallback,xb.push(k));f&&g.isFunction(l)&&l(f[0]);f=l=b});return"script"}});
var na,qc=0,Xa=a.ActiveXObject&&function(){for(var a in na)na[a](b,!0)};g.ajaxSettings.xhr=a.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&T()))a:{try{b=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(p){}b=void 0}return b}:T;var Ha=g.ajaxSettings.xhr();g.support.cors=!!Ha&&"withCredentials"in Ha;(Ha=g.support.ajax=!!Ha)&&g.ajaxTransport(function(c){if(!c.crossDomain||g.support.cors){var d;return{send:function(e,f){var h,k=c.xhr();c.username?k.open(c.type,c.url,c.async,c.username,c.password):
k.open(c.type,c.url,c.async);if(c.xhrFields)for(h in c.xhrFields)k[h]=c.xhrFields[h];c.mimeType&&k.overrideMimeType&&k.overrideMimeType(c.mimeType);c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)k.setRequestHeader(h,e[h])}catch(uc){}k.send(c.hasContent&&c.data||null);d=function(a,e){try{if(d&&(e||4===k.readyState))if(d=b,l&&(k.onreadystatechange=g.noop,Xa&&delete na[l]),e)4!==k.readyState&&k.abort();else{var h={};var m=k.status;var n=k.getAllResponseHeaders();
"string"===typeof k.responseText&&(h.text=k.responseText);try{var t=k.statusText}catch(eb){t=""}m||!c.isLocal||c.crossDomain?1223===m&&(m=204):m=h.text?200:404}}catch(eb){e||f(-1,eb)}h&&f(m,t,h,n)};if(c.async)if(4===k.readyState)setTimeout(d);else{var l=++qc;Xa&&(na||(na={},g(a).unload(Xa)),na[l]=d);k.onreadystatechange=d}else d()},abort:function(){d&&d(b,!0)}}}});var aa,Ia,rc=/^(?:toggle|show|hide)$/,sc=new RegExp("^(?:([+-])=|)("+Ga+")([a-z%]*)$","i"),tc=/queueHooks$/,Ea=[function(a,b,c){var d,
e=this,f=a.style,h={},k=[],l=a.nodeType&&G(a);if(!c.queue){var m=g._queueHooks(a,"fx");if(null==m.unqueued){m.unqueued=0;var n=m.empty.fire;m.empty.fire=function(){m.unqueued||n()}}m.unqueued++;e.always(function(){e.always(function(){m.unqueued--;g.queue(a,"fx").length||m.empty.fire()})})}1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===g.css(a,"display")&&"none"===g.css(a,"float")&&(g.support.inlineBlockNeedsLayout&&"inline"!==ea(a.nodeName)?
f.zoom=1:f.display="inline-block"));c.overflow&&(f.overflow="hidden",g.support.shrinkWrapBlocks||e.always(function(){f.overflow=c.overflow[0];f.overflowX=c.overflow[1];f.overflowY=c.overflow[2]}));for(d in b){var t=b[d];if(rc.exec(t)){delete b[d];var p=p||"toggle"===t;t!==(l?"hide":"show")&&k.push(d)}}if(b=k.length)for(t=g._data(a,"fxshow")||g._data(a,"fxshow",{}),("hidden"in t)&&(l=t.hidden),p&&(t.hidden=!l),l?g(a).show():e.done(function(){g(a).hide()}),e.done(function(){var b;g._removeData(a,"fxshow");
for(b in h)g.style(a,b,h[b])}),d=0;d<b;d++){p=k[d];var q=e.createTween(p,l?t[p]:0);h[p]=t[p]||g.style(a,p);p in t||(t[p]=q.start,l&&(q.end=q.start,q.start="width"===p||"height"===p?1:0))}}],za={"*":[function(a,b){var c=this.createTween(a,b),d=sc.exec(b),e=c.cur(),f=+e||0,h=1,k=20;if(d){b=+d[2];var l=d[3]||(g.cssNumber[a]?"":"px");if("px"!==l&&f){f=g.css(c.elem,a,!0)||b||1;do h=h||".5",f/=h,g.style(c.elem,a,f+l);while(h!==(h=c.cur()/e)&&1!==h&&--k)}c.unit=l;c.start=f;c.end=d[1]?f+(d[1]+1)*b:b}return c}]};
g.Animation=g.extend(B,{tweener:function(a,b){g.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;d<e;d++)c=a[d],za[c]=za[c]||[],za[c].unshift(b)},prefilter:function(a,b){b?Ea.unshift(a):Ea.push(a)}});g.Tween=M;M.prototype={constructor:M,init:function(a,b,c,d,e,f){this.elem=a;this.prop=c;this.easing=e||"swing";this.options=b;this.start=this.now=this.cur();this.end=d;this.unit=f||(g.cssNumber[c]?"":"px")},cur:function(){var a=M.propHooks[this.prop];return a&&a.get?a.get(this):M.propHooks._default.get(this)},
run:function(a){var b,c=M.propHooks[this.prop];this.pos=this.options.duration?b=g.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);c&&c.set?c.set(this):M.propHooks._default.set(this);return this}};M.prototype.init.prototype=M.prototype;M.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=g.css(a.elem,a.prop,
""))&&"auto"!==a?a:0:a.elem[a.prop]},set:function(a){if(g.fx.step[a.prop])g.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[g.cssProps[a.prop]]||g.cssHooks[a.prop])?g.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};g.each(["toggle","show","hide"],function(a,b){var c=g.fn[b];g.fn[b]=function(a,d,e){return null==a||"boolean"===typeof a?c.apply(this,arguments):
this.animate(K(b,!0),a,d,e)}});g.fn.extend({fadeTo:function(a,b,c,d){return this.filter(G).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=g.isEmptyObject(a),f=g.speed(b,c,d),h=function(){var b=B(this,g.extend({},a),f);h.finish=function(){b.stop(!0)};(e||g._data(this,"finish"))&&b.stop(!0)};h.finish=h;return e||!1===f.queue?this.each(h):this.queue(f.queue,h)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop;b(d)};"string"!==typeof a&&(d=c,
c=a,a=b);c&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=g.timers,h=g._data(this);if(c)h[c]&&h[c].stop&&e(h[c]);else for(c in h)h[c]&&h[c].stop&&tc.test(c)&&e(h[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));!b&&d||g.dequeue(this,a)})},finish:function(a){!1!==a&&(a=a||"fx");return this.each(function(){var b=g._data(this),c=b[a+"queue"];var d=b[a+"queueHooks"];var e=g.timers,f=c?c.length:0;
b.finish=!0;g.queue(this,a,[]);d&&d.cur&&d.cur.finish&&d.cur.finish.call(this);for(d=e.length;d--;)e[d].elem===this&&e[d].queue===a&&(e[d].anim.stop(!0),e.splice(d,1));for(d=0;d<f;d++)c[d]&&c[d].finish&&c[d].finish.call(this);delete b.finish})}});g.each({slideDown:K("show"),slideUp:K("hide"),slideToggle:K("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){g.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});g.speed=function(a,b,c){var d=a&&"object"===
typeof a?g.extend({},a):{complete:c||!c&&b||g.isFunction(a)&&a,duration:a,easing:c&&b||b&&!g.isFunction(b)&&b};d.duration=g.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in g.fx.speeds?g.fx.speeds[d.duration]:g.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(){g.isFunction(d.old)&&d.old.call(this);d.queue&&g.dequeue(this,d.queue)};return d};g.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}};g.timers=
[];g.fx=M.prototype.init;g.fx.tick=function(){var a=g.timers,c=0;for(aa=g.now();c<a.length;c++){var d=a[c];d()||a[c]!==d||a.splice(c--,1)}a.length||g.fx.stop();aa=b};g.fx.timer=function(a){a()&&g.timers.push(a)&&g.fx.start()};g.fx.interval=13;g.fx.start=function(){Ia||(Ia=setInterval(g.fx.tick,g.fx.interval))};g.fx.stop=function(){clearInterval(Ia);Ia=null};g.fx.speeds={slow:600,fast:200,_default:400};g.fx.step={};g.expr&&g.expr.filters&&(g.expr.filters.animated=function(a){return g.grep(g.timers,
function(b){return a===b.elem}).length});g.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){g.offset.setOffset(this,a,b)});var c,d={top:0,left:0},e=(c=this[0])&&c.ownerDocument;if(e){var f=e.documentElement;if(!g.contains(f,c))return d;typeof c.getBoundingClientRect!==X&&(d=c.getBoundingClientRect());c=ua(e);return{top:d.top+(c.pageYOffset||f.scrollTop)-(f.clientTop||0),left:d.left+(c.pageXOffset||f.scrollLeft)-(f.clientLeft||0)}}};g.offset={setOffset:function(a,b,
c){var d=g.css(a,"position");"static"===d&&(a.style.position="relative");var e=g(a),f=e.offset(),h=g.css(a,"top"),k=g.css(a,"left"),l={};("absolute"===d||"fixed"===d)&&-1<g.inArray("auto",[h,k])?(k=e.position(),d=k.top,k=k.left):(d=parseFloat(h)||0,k=parseFloat(k)||0);g.isFunction(b)&&(b=b.call(a,c,f));null!=b.top&&(l.top=b.top-f.top+d);null!=b.left&&(l.left=b.left-f.left+k);"using"in b?b.using.call(a,l):e.css(l)}};g.fn.extend({position:function(){if(this[0]){var a={top:0,left:0},b=this[0];if("fixed"===
g.css(b,"position"))var c=b.getBoundingClientRect();else{var d=this.offsetParent();c=this.offset();g.nodeName(d[0],"html")||(a=d.offset());a.top+=g.css(d[0],"borderTopWidth",!0);a.left+=g.css(d[0],"borderLeftWidth",!0)}return{top:c.top-a.top-g.css(b,"marginTop",!0),left:c.left-a.left-g.css(b,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||A.documentElement;a&&!g.nodeName(a,"html")&&"static"===g.css(a,"position");)a=a.offsetParent;return a||A.documentElement})}});
g.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);g.fn[a]=function(e){return g.access(this,function(a,e,f){var h=ua(a);if(f===b)return h?c in h?h[c]:h.document.documentElement[e]:a[e];h?h.scrollTo(d?g(h).scrollLeft():f,d?f:g(h).scrollTop()):a[e]=f},a,e,arguments.length,null)}});g.each({Height:"height",Width:"width"},function(a,c){g.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){g.fn[e]=function(e,f){var h=arguments.length&&(d||"boolean"!==typeof e),
l=d||(!0===e||!0===f?"margin":"border");return g.access(this,function(c,d,e){return g.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(d=c.documentElement,Math.max(c.body["scroll"+a],d["scroll"+a],c.body["offset"+a],d["offset"+a],d["client"+a])):e===b?g.css(c,d,l):g.style(c,d,e,l)},c,h?e:b,h,null)}})});a.jQuery=a.$=g;"function"===typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return g})})(window);jQuery.noConflict();var $j=jQuery;
(function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c=0,d;null!=(d=b[c]);c++)try{a(d).triggerHandler("remove")}catch(m){}e(b)};a.widget=function(b,c,d){var e={},f=b.split(".")[0];b=b.split(".")[1];var h=f+"-"+b;d||(d=c,c=a.Widget);a.expr[":"][h.toLowerCase()]=function(b){return!!a.data(b,h)};a[f]=a[f]||{};var l=a[f][b];var x=a[f][b]=function(a,b){if(!this._createWidget)return new x(a,b);arguments.length&&this._createWidget(a,b)};a.extend(x,l,{version:d.version,
_proto:a.extend({},d),_childConstructors:[]});var F=new c;F.options=a.widget.extend({},F.options);a.each(d,function(b,d){a.isFunction(d)?e[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b=this._super,c=this._superApply;this._super=a;this._superApply=e;var f=d.apply(this,arguments);this._super=b;this._superApply=c;return f}}():e[b]=d});x.prototype=a.widget.extend(F,{widgetEventPrefix:l?F.widgetEventPrefix||
b:b},e,{constructor:x,namespace:f,widgetName:b,widgetFullName:h});l?(a.each(l._childConstructors,function(b,c){b=c.prototype;a.widget(b.namespace+"."+b.widgetName,x,c._proto)}),delete l._childConstructors):c._childConstructors.push(x);a.widget.bridge(b,x)};a.widget.extend=function(c){for(var e=d.call(arguments,1),f=0,m=e.length,n,z;f<m;f++)for(n in e[f])z=e[f][n],e[f].hasOwnProperty(n)&&z!==b&&(a.isPlainObject(z)?c[n]=a.isPlainObject(c[n])?a.widget.extend({},c[n],z):a.widget.extend({},z):c[n]=z);
return c};a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(h){var l="string"===typeof h,m=d.call(arguments,1),C=this;h=!l&&m.length?a.widget.extend.apply(null,[h].concat(m)):h;l?this.each(function(){var d=a.data(this,f);if(!d)return a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+h+"'");if(!a.isFunction(d[h])||"_"===h.charAt(0))return a.error("no such method '"+h+"' for "+c+" widget instance");var e=d[h].apply(d,m);if(e!==
d&&e!==b)return C=e&&e.jquery?C.pushStack(e.get()):e,!1}):this.each(function(){var b=a.data(this,f);b?b.option(h||{})._init():a.data(this,f,new e(h,this))});return C}};a.Widget=function(){};a.Widget._childConstructors=[];a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0];this.element=a(d);this.uuid=c++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=a.widget.extend({},
this.options,this._getCreateOptions(),b);this.bindings=a();this.hoverable=a();this.focusable=a();d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,
_init:a.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},
option:function(c,d){var e=c,f;if(0===arguments.length)return a.widget.extend({},this.options);if("string"===typeof c){e={};var h=c.split(".");c=h.shift();if(h.length){var z=e[c]=a.widget.extend({},this.options[c]);for(f=0;f<h.length-1;f++)z[h[f]]=z[h[f]]||{},z=z[h[f]];c=h.pop();if(1===arguments.length)return z[c]===b?null:z[c];z[c]=d}else{if(1===arguments.length)return this.options[c]===b?null:this.options[c];e[c]=d}}this._setOptions(e);return this},_setOptions:function(a){for(var b in a)this._setOption(b,
a[b]);return this},_setOption:function(a,b){this.options[a]=b;"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,d){var e,f=this;"boolean"!==typeof b&&(d=c,c=b,b=!1);d?(c=e=a(c),this.bindings=this.bindings.add(c)):
(d=c,c=this.element,e=this.widget());a.each(d,function(d,h){function l(){if(b||!0!==f.options.disabled&&!a(this).hasClass("ui-state-disabled"))return("string"===typeof h?f[h]:h).apply(f,arguments)}"string"!==typeof h&&(l.guid=h.guid=h.guid||l.guid||a.guid++);var m=d.match(/^(\w+)\s*(.*)$/);d=m[1]+f.eventNamespace;(m=m[2])?e.delegate(m,d,l):c.bind(d,l)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(b).undelegate(b)},_delay:function(a,b){var c=
this;return setTimeout(function(){return("string"===typeof a?c[a]:a).apply(c,arguments)},b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b);this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},
_trigger:function(b,c,d){var e,f=this.options[b];d=d||{};c=a.Event(c);c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();c.target=this.element[0];if(b=c.originalEvent)for(e in b)e in c||(c[e]=b[e]);this.element.trigger(c,d);return!(a.isFunction(f)&&!1===f.apply(this.element[0],[c].concat(d))||c.isDefaultPrevented())}};a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"===typeof e&&(e={effect:e});var h=e?!0===e||"number"===
typeof e?c:e.effect||c:b;e=e||{};"number"===typeof e&&(e={duration:e});var l=!a.isEmptyObject(e);e.complete=f;e.delay&&d.delay(e.delay);if(l&&a.effects&&a.effects.effect[h])d[b](e);else if(h!==b&&d[h])d[h](e.duration,e.easing,f);else d.queue(function(c){a(this)[b]();f&&f.call(d[0]);c()})}})})(jQuery);
(function(a,b){function c(a,b,c){return[parseFloat(a[0])*(x.test(a[0])?b/100:1),parseFloat(a[1])*(x.test(a[1])?c/100:1)]}function d(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var e,f=Math.max,h=Math.abs,l=
Math.round,m=/left|center|right/,n=/top|center|bottom/,z=/[\+\-]\d+(\.[\d]+)?%?/,C=/^\w+/,x=/%$/,F=a.fn.position;a.position={scrollbarWidth:function(){if(e!==b)return e;var c=a("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");var d=c.children()[0];a("body").append(c);var f=d.offsetWidth;c.css("overflow","scroll");d=d.offsetWidth;f===d&&(d=c[0].clientWidth);c.remove();return e=f-d},getScrollInfo:function(b){var c=
b.isWindow||b.isDocument?"":b.element.css("overflow-x"),d=b.isWindow||b.isDocument?"":b.element.css("overflow-y");c="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth;return{width:"scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight?a.position.scrollbarWidth():0,height:c?a.position.scrollbarWidth():0}},getWithinInfo:function(b){b=a(b||window);var c=a.isWindow(b[0]);return{element:b,isWindow:c,isDocument:!!b[0]&&9===b[0].nodeType,offset:b.offset()||{left:0,top:0},scrollLeft:b.scrollLeft(),
scrollTop:b.scrollTop(),width:c?b.width():b.outerWidth(),height:c?b.height():b.outerHeight()}}};a.fn.position=function(b){if(!b||!b.of)return F.apply(this,arguments);b=a.extend({},b);var e=a(b.of),t=a.position.getWithinInfo(b.within),x=a.position.getScrollInfo(t),v=(b.collision||"flip").split(" "),u={};var E=d(e);e[0].preventDefault&&(b.at="left top");var G=E.width;var N=E.height;var H=E.offset;var L=a.extend({},H);a.each(["my","at"],function(){var a=(b[this]||"").split(" ");1===a.length&&(a=m.test(a[0])?
a.concat(["center"]):n.test(a[0])?["center"].concat(a):["center","center"]);a[0]=m.test(a[0])?a[0]:"center";a[1]=n.test(a[1])?a[1]:"center";var c=z.exec(a[0]);var d=z.exec(a[1]);u[this]=[c?c[0]:0,d?d[0]:0];b[this]=[C.exec(a[0])[0],C.exec(a[1])[0]]});1===v.length&&(v[1]=v[0]);"right"===b.at[0]?L.left+=G:"center"===b.at[0]&&(L.left+=G/2);"bottom"===b.at[1]?L.top+=N:"center"===b.at[1]&&(L.top+=N/2);var U=c(u.at,G,N);L.left+=U[0];L.top+=U[1];return this.each(function(){var d,m=a(this),n=m.outerWidth(),
q=m.outerHeight(),z=parseInt(a.css(this,"marginLeft"),10)||0,D=parseInt(a.css(this,"marginTop"),10)||0,C=n+z+(parseInt(a.css(this,"marginRight"),10)||0)+x.width,E=q+D+(parseInt(a.css(this,"marginBottom"),10)||0)+x.height,w=a.extend({},L),F=c(u.my,m.outerWidth(),m.outerHeight());"right"===b.my[0]?w.left-=n:"center"===b.my[0]&&(w.left-=n/2);"bottom"===b.my[1]?w.top-=q:"center"===b.my[1]&&(w.top-=q/2);w.left+=F[0];w.top+=F[1];a.support.offsetFractions||(w.left=l(w.left),w.top=l(w.top));var P={marginLeft:z,
marginTop:D};a.each(["left","top"],function(c,d){if(a.ui.position[v[c]])a.ui.position[v[c]][d](w,{targetWidth:G,targetHeight:N,elemWidth:n,elemHeight:q,collisionPosition:P,collisionWidth:C,collisionHeight:E,offset:[U[0]+F[0],U[1]+F[1]],my:b.my,at:b.at,within:t,elem:m})});b.using&&(d=function(a){var c=H.left-w.left,d=c+G-n,l=H.top-w.top,t=l+N-q,v={target:{element:e,left:H.left,top:H.top,width:G,height:N},element:{element:m,left:w.left,top:w.top,width:n,height:q},horizontal:0>d?"left":0<c?"right":"center",
vertical:0>t?"top":0<l?"bottom":"middle"};G<n&&h(c+d)<G&&(v.horizontal="center");N<q&&h(l+t)<N&&(v.vertical="middle");f(h(c),h(d))>f(h(l),h(t))?v.important="horizontal":v.important="vertical";b.using.call(this,a,v)});m.offset(a.extend(w,{using:d}))})};a.ui.position={fit:{left:function(a,b){var c=b.within,d=c.isWindow?c.scrollLeft:c.offset.left,e=c.width,h=a.left-b.collisionPosition.marginLeft;c=d-h;var l=h+b.collisionWidth-e-d;b.collisionWidth>e?0<c&&0>=l?(b=a.left+c+b.collisionWidth-e-d,a.left+=
c-b):a.left=0<l&&0>=c?d:c>l?d+e-b.collisionWidth:d:a.left=0<c?a.left+c:0<l?a.left-l:f(a.left-h,a.left)},top:function(a,b){var c=b.within,d=c.isWindow?c.scrollTop:c.offset.top,e=b.within.height,h=a.top-b.collisionPosition.marginTop;c=d-h;var l=h+b.collisionHeight-e-d;b.collisionHeight>e?0<c&&0>=l?(b=a.top+c+b.collisionHeight-e-d,a.top+=c-b):a.top=0<l&&0>=c?d:c>l?d+e-b.collisionHeight:d:a.top=0<c?a.top+c:0<l?a.top-l:f(a.top-h,a.top)}},flip:{left:function(a,b){var c=b.within,d=c.offset.left+c.scrollLeft,
e=c.width,f=c.isWindow?c.scrollLeft:c.offset.left,l=a.left-b.collisionPosition.marginLeft;c=l-f;var m=l+b.collisionWidth-e-f;l="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0;var n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,t=-2*b.offset[0];if(0>c){if(b=a.left+l+n+t+b.collisionWidth-e-d,0>b||b<h(c))a.left+=l+n+t}else 0<m&&(b=a.left-b.collisionPosition.marginLeft+l+n+t-f,0<b||h(b)<m)&&(a.left+=l+n+t)},top:function(a,b){var c=b.within,d=c.offset.top+c.scrollTop,
e=c.height,f=c.isWindow?c.scrollTop:c.offset.top,l=a.top-b.collisionPosition.marginTop;c=l-f;var m=l+b.collisionHeight-e-f;l="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0;var n="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,t=-2*b.offset[1];0>c?(b=a.top+l+n+t+b.collisionHeight-e-d,a.top+l+n+t>c&&(0>b||b<h(c))&&(a.top+=l+n+t)):0<m&&(b=a.top-b.collisionPosition.marginTop+l+n+t-f,a.top+l+n+t>m&&(0<b||h(b)<m)&&(a.top+=l+n+t))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,
arguments);a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments);a.ui.position.fit.top.apply(this,arguments)}}};(function(){var b,c=document.getElementsByTagName("body")[0];var d=document.createElement("div");var e=document.createElement(c?"div":"body");var f={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};c&&a.extend(f,{position:"absolute",left:"-1000px",top:"-1000px"});for(b in f)e.style[b]=f[b];e.appendChild(d);f=c||
document.documentElement;f.insertBefore(e,f.firstChild);d.style.cssText="position: absolute; left: 10.7432222px;";d=a(d).offset().left;a.support.offsetFractions=10<d&&11>d;e.innerHTML="";f.removeChild(e)})()})(jQuery);
(function(a){function b(b,c){var d=(b.attr("aria-describedby")||"").split(/\s+/);d.push(c);b.data("ui-tooltip-id",c).attr("aria-describedby",a.trim(d.join(" ")))}function c(b){var c=b.data("ui-tooltip-id"),d=(b.attr("aria-describedby")||"").split(/\s+/);c=a.inArray(c,d);-1!==c&&d.splice(c,1);b.removeData("ui-tooltip-id");(d=a.trim(d.join(" ")))?b.attr("aria-describedby",d):b.removeAttr("aria-describedby")}var d=0;a.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var b=a(this).attr("title")||
"";return a("<a>").text(b).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.options.disabled&&this._disable()},_setOption:function(b,c){var d=this;"disabled"===b?(this[c?"_disable":"_enable"](),this.options[b]=c):(this._super(b,c),"content"===b&&a.each(this.tooltips,function(a,
b){d._updateContent(b)}))},_disable:function(){var b=this;a.each(this.tooltips,function(c,d){c=a.Event("blur");c.target=c.currentTarget=d[0];b.close(c,!0)});this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.is("[title]")&&b.data("ui-tooltip-title",b.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))})},open:function(b){var c=
this,d=a(b?b.target:this.element).closest(this.options.items);d.length&&!d.data("ui-tooltip-id")&&(d.attr("title")&&d.data("ui-tooltip-title",d.attr("title")),d.data("ui-tooltip-open",!0),b&&"mouseover"===b.type&&d.parents().each(function(){var b=a(this);if(b.data("ui-tooltip-open")){var d=a.Event("blur");d.target=d.currentTarget=this;c.close(d,!0)}b.attr("title")&&(b.uniqueId(),c.parents[this.id]={element:this,title:b.attr("title")},b.attr("title",""))}),this._updateContent(d,b))},_updateContent:function(a,
b){var c=this.options.content;var d=this,e=b?b.type:null;if("string"===typeof c)return this._open(b,a,c);(c=c.call(a[0],function(c){a.data("ui-tooltip-open")&&d._delay(function(){b&&(b.type=e);this._open(b,a,c)})}))&&this._open(b,a,c)},_open:function(c,d,h){function e(a){f.of=a;n.is(":hidden")||n.position(f)}var f=a.extend({},this.options.position);if(h){var n=this._find(d);if(n.length)n.find(".ui-tooltip-content").html(h);else{d.is("[title]")&&(c&&"mouseover"===c.type?d.attr("title",""):d.removeAttr("title"));
n=this._tooltip(d);b(d,n.attr("id"));n.find(".ui-tooltip-content").html(h);this.options.track&&c&&/^mouse/.test(c.type)?(this._on(this.document,{mousemove:e}),e(c)):n.position(a.extend({of:d},this.options.position));n.hide();this._show(n,this.options.show);if(this.options.show&&this.options.show.delay)var z=this.delayedShow=setInterval(function(){n.is(":visible")&&(e(f.of),clearInterval(z))},a.fx.interval);this._trigger("open",c,{tooltip:n});h={keyup:function(b){b.keyCode===a.ui.keyCode.ESCAPE&&(b=
a.Event(b),b.currentTarget=d[0],this.close(b,!0))},remove:function(){this._removeTooltip(n)}};c&&"mouseover"!==c.type||(h.mouseleave="close");c&&"focusin"!==c.type||(h.focusout="close");this._on(!0,d,h)}}},close:function(b){var d=this,e=a(b?b.currentTarget:this.element),l=this._find(e);this.closing||(clearInterval(this.delayedShow),e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title")),c(e),l.stop(!0),this._hide(l,this.options.hide,function(){d._removeTooltip(a(this))}),e.removeData("ui-tooltip-open"),
this._off(e,"mouseleave focusout keyup"),e[0]!==this.element[0]&&this._off(e,"remove"),this._off(this.document,"mousemove"),b&&"mouseleave"===b.type&&a.each(this.parents,function(b,c){a(c.element).attr("title",c.title);delete d.parents[b]}),this.closing=!0,this._trigger("close",b,{tooltip:l}),this.closing=!1)},_tooltip:function(b){var c="ui-tooltip-"+d++,e=a("<div>").attr({id:c,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));a("<div>").addClass("ui-tooltip-content").appendTo(e);
e.appendTo(this.document[0].body);this.tooltips[c]=b;return e},_find:function(b){return(b=b.data("ui-tooltip-id"))?a("#"+b):a()},_removeTooltip:function(a){a.remove();delete this.tooltips[a.attr("id")]},_destroy:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d[0];b.close(e,!0);a("#"+c).remove();d.data("ui-tooltip-title")&&(d.attr("title",d.data("ui-tooltip-title")),d.removeData("ui-tooltip-title"))})}})})(jQuery);
(function(a,b){a.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=!1;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+
this.eventNamespace,a.proxy(function(a){this.options.disabled&&a.preventDefault()},this));this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true");this._on({"mousedown .ui-menu-item > a":function(a){a.preventDefault()},"click .ui-state-disabled > a":function(a){a.preventDefault()},"click .ui-menu-item:has(a)":function(b){var c=a(b.target).closest(".ui-menu-item");!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.select(b),b.isPropagationStopped()||
(this.mouseHandled=!0),c.has(".ui-menu").length?this.expand(b):!this.element.is(":focus")&&a(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var c=a(b.currentTarget);c.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(b,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,
b){var c=this.active||this.element.children(".ui-menu-item").eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(b){a(b.target).closest(".ui-menu").length||this.collapseAll(b);this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,
"\\$&")}var e=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);
break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:e=!1;var f=this.previousFilter||"";var h=String.fromCharCode(b.keyCode);var l=!1;clearTimeout(this.filterTimer);h===f?l=!0:h=f+h;var m=new RegExp("^"+c(h),"i");f=this.activeMenu.children(".ui-menu-item").filter(function(){return m.test(a(this).children("a").text())});f=l&&-1!==f.index(this.active.next())?this.active.nextAll(".ui-menu-item"):f;f.length||(h=String.fromCharCode(b.keyCode),m=new RegExp("^"+c(h),"i"),f=this.activeMenu.children(".ui-menu-item").filter(function(){return m.test(a(this).children("a").text())}));
f.length?(this.focus(b,f),1<f.length?(this.previousFilter=h,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter):delete this.previousFilter}e&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b=this.options.icons.submenu;var d=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length);
d.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var c=a(this),d=c.prev("a"),h=a("<span>").addClass("ui-menu-icon ui-icon "+b).data("ui-menu-submenu-carat",!0);d.attr("aria-haspopup","true").prepend(h);c.attr("aria-labelledby",d.attr("id"))});d=d.add(this.element);d.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,
role:this._itemRole()});d.children(":not(.ui-menu-item)").each(function(){var b=a(this);/[^\-\u2014\u2013\s]/.test(b.text())||b.addClass("ui-widget-content ui-menu-divider")});d.children(".ui-state-disabled").attr("aria-disabled","true");this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){"icons"===a&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(b.submenu);
this._super(a,b)},focus:function(a,b){this.blur(a,a&&"focus"===a.type);this._scrollIntoView(b);this.active=b.first();var c=this.active.children("a").addClass("ui-state-focus");this.options.role&&this.element.attr("aria-activedescendant",c.attr("id"));this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);c=b.children(".ui-menu");c.length&&a&&/^mouse/.test(a.type)&&
this._startOpening(c);this.activeMenu=b.parent();this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){if(this._hasScroll()){var c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0;var e=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0;c=b.offset().top-this.activeMenu.offset().top-c-e;e=this.activeMenu.scrollTop();var f=this.activeMenu.height();b=b.height();0>c?this.activeMenu.scrollTop(e+c):c+b>f&&this.activeMenu.scrollTop(e+c-f+b)}},blur:function(a,b){b||clearTimeout(this.timer);
this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer);"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close();this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true");b.show().removeAttr("aria-hidden").attr("aria-expanded",
"true").position(c)},collapseAll:function(b,d){clearTimeout(this.timer);this.timer=this._delay(function(){var c=d?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));c.length||(c=this.element);this._close(c);this.blur(b);this.activeMenu=c},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element);a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=
this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&
!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,e){var c;this.active&&(c="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0));c&&c.length&&this.active||(c=this.activeMenu.children(".ui-menu-item")[b]());this.focus(e,c)},nextPage:function(b){var c;if(!this.active)this.next(b);else if(!this.isLastItem())if(this._hasScroll()){var e=this.active.offset().top;var f=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){c=
a(this);return 0>c.offset().top-e-f});this.focus(b,c)}else this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(b){var c;if(!this.active)this.next(b);else if(!this.isFirstItem())if(this._hasScroll()){var e=this.active.offset().top;var f=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){c=a(this);return 0<c.offset().top-e+f});this.focus(b,c)}else this.focus(b,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<
this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0);this._trigger("select",b,c)}})})(jQuery);
(function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){c=b.parentNode;e=c.name;if(!b.href||!e||"map"!==c.nodeName.toLowerCase())return!1;b=a("img[usemap=#"+e+"]")[0];return!!b&&d(b)}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"===e?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{};a.extend(a.ui,{version:"1.10.4",
keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});a.fn.extend({focus:function(b){return function(c,d){return"number"===typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus();d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b=a.ui.ie&&
/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==
b)return this.css("zIndex",c);if(this.length){c=a(this[0]);for(var d;c.length&&c[0]!==document;){d=c.css("position");if("absolute"===d||"relative"===d||"fixed"===d)if(d=parseInt(c.css("zIndex"),10),!isNaN(d)&&0!==d)return d;c=c.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}});a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,
b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||0<=d)&&c(b,!e)}});a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0;d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0);e&&(c-=parseFloat(a.css(b,"margin"+this))||0)});return c}var f="Width"===d?["Left","Right"]:["Top",
"Bottom"],h=d.toLowerCase(),l={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?l["inner"+d].call(this):this.each(function(){a(this).css(h,e(this,c)+"px")})};a.fn["outer"+d]=function(b,c){return"number"!==typeof b?l["outer"+d].call(this,b):this.each(function(){a(this).css(h,e(this,b,!0,c)+"px")})}});a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});
a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData));a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());a.support.selectstart="onselectstart"in document.createElement("div");a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});
a.extend(a.ui,{plugin:{add:function(b,c,d){var e;b=a.ui[b].prototype;for(e in d)b.plugins[e]=b.plugins[e]||[],b.plugins[e].push([c,d[e]])},call:function(a,b,c){var d=a.plugins[b];if(d&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(b=0;b<d.length;b++)a.options[d[b][0]]&&d[b][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;c=c&&"left"===c?"scrollLeft":"scrollTop";if(0<b[c])return!0;b[c]=1;var d=0<b[c];b[c]=0;return d}})})(jQuery);
(function(a,b){var c=!1;a(document).mouseup(function(){c=!1});a.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1});this.started=
!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var d=this,f=1===b.which,h="string"===typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;if(!f||h||!this._mouseCapture(b))return!0;this.mouseDelayMet=
!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted))return b.preventDefault(),!0;!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return d._mouseMove(a)};this._mouseUpDelegate=function(a){return d._mouseUp(a)};
a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);b.preventDefault();return c=!0}},_mouseMove:function(b){if(a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button)return this._mouseUp(b);if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b));
return!this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},
_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(a,b){a.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var b,d,e,f=this.element[0].nodeName.toLowerCase(),h="textarea"===f;f="input"===f;this.isMultiLine=h?!0:f?!1:this.element.prop("isContentEditable");this.valueMethod=
this.element[h||f?"val":"text"];this.isNewMenu=!0;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(c){if(this.element.prop("readOnly"))d=e=b=!0;else{d=e=b=!1;var f=a.ui.keyCode;switch(c.keyCode){case f.PAGE_UP:b=!0;this._move("previousPage",c);break;case f.PAGE_DOWN:b=!0;this._move("nextPage",c);break;case f.UP:b=!0;this._keyEvent("previous",c);break;case f.DOWN:b=!0;this._keyEvent("next",c);break;case f.ENTER:case f.NUMPAD_ENTER:this.menu.active&&
(b=!0,c.preventDefault(),this.menu.select(c));break;case f.TAB:this.menu.active&&this.menu.select(c);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(c),c.preventDefault());break;default:d=!0,this._searchTimeout(c)}}},keypress:function(c){if(b)b=!1,this.isMultiLine&&!this.menu.element.is(":visible")||c.preventDefault();else if(!d){var e=a.ui.keyCode;switch(c.keyCode){case e.PAGE_UP:this._move("previousPage",c);break;case e.PAGE_DOWN:this._move("nextPage",c);
break;case e.UP:this._keyEvent("previous",c);break;case e.DOWN:this._keyEvent("next",c)}}},input:function(a){e?(e=!1,a.preventDefault()):this._searchTimeout(a)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),this._change(a))}});this._initSource();this.menu=a("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu");this._on(this.menu.element,
{mousedown:function(b){b.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur});var c=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(d){d.target===b.element[0]||d.target===c||a.contains(c,d.target)||b.close()})})},menufocus:function(b,c){if(this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type))){this.menu.blur();this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)});
return}c=c.item.data("ui-autocomplete-item");!1!==this._trigger("focus",b,{item:c})?b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(c.value):this.liveRegion.text(c.value)},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item"),d=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d;this.selectedItem=c}));!1!==this._trigger("select",a,{item:c})&&this._value(c.value);this.term=this._value();
this.close(a);this.selectedItem=c}});this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b);"source"===a&&this._initSource();
"appendTo"===a&&this.menu.element.appendTo(this._appendTo());"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_appendTo:function(){var b=this.options.appendTo;b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0));b||(b=this.element.closest(".ui-front"));b.length||(b=this.document[0].body);return b},_initSource:function(){var b=this;if(a.isArray(this.options.source)){var d=this.options.source;this.source=function(b,c){c(a.ui.autocomplete.filter(d,b.term))}}else if("string"===typeof this.options.source){var e=
this.options.source;this.source=function(c,d){b.xhr&&b.xhr.abort();b.xhr=a.ajax({url:e,data:c,dataType:"json",success:function(a){d(a)},error:function(){d([])}})}}else this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching);this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){a=null!=a?a:this._value();this.term=this._value();if(a.length<this.options.minLength)return this.close(b);
if(!1!==this._trigger("search",b))return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:a},this._response())},_response:function(){var b=++this.requestIndex;return a.proxy(function(a){b===this.requestIndex&&this.__response(a);this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(a){a&&(a=this._normalize(a));this._trigger("response",null,{content:a});!this.options.disabled&&
a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0;this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"===typeof b?{label:b,
value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty();this._renderMenu(c,b);this.isNewMenu=!0;this.menu.refresh();c.show();this._resizeMenu();c.position(a.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,d){var c=this;a.each(d,function(a,d){c._renderItemData(b,
d)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,d){return a("<li>").append(a("<a>").text(d.label)).appendTo(b)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a))this._value(this.term),this.menu.blur();else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,
arguments)},_keyEvent:function(a,b){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(a,b),b.preventDefault()}});a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,d){var c=new RegExp(a.ui.autocomplete.escapeRegex(d),"i");return a.grep(b,function(a){return c.test(a.label||a.value||a)})}});a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+
(1<a?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(a){this._superApply(arguments);if(!this.options.disabled&&!this.cancelSearch){var b=a&&a.length?this.options.messages.results(a.length):this.options.messages.noResults;this.liveRegion.text(b)}}})})(jQuery);
new function(a){var b=a.separator||"&",c=!1===a.spaces?!1:!0,d=!1!==a.prefix?!0===a.hash?"#":"?":"",e=!1===a.numbers?!1:!0;jQuery.query=new function(){var a=function(a,b){return void 0!=a&&null!==a&&(b?a.constructor==b:!0)},h=function(a){for(var b=/\[([^[]*)\]/g,c=/^([^[]+)(\[.*\])?$/.exec(a),d=c[1],e=[];a=b.exec(c[2]);)e.push(a[1]);return[d,e]},l=function(b,c,d){var e=c.shift();"object"!=typeof b&&(b=null);if(""===e)if(b||(b=[]),a(b,Array))b.push(0==c.length?d:l(null,c.slice(0),d));else if(a(b,Object)){for(e=
0;null!=b[e++];);b[--e]=0==c.length?d:l(b[e],c.slice(0),d)}else b=[],b.push(0==c.length?d:l(null,c.slice(0),d));else if(e&&e.match(/^\s*[0-9]+\s*$/)){var f=parseInt(e,10);b||(b=[]);b[f]=0==c.length?d:l(b[f],c.slice(0),d)}else if(e){f=e.replace(/^\s*|\s*$/g,"");b||(b={});if(a(b,Array)){var h={};for(e=0;e<b.length;++e)h[e]=b[e];b=h}b[f]=0==c.length?d:l(b[f],c.slice(0),d)}else return d;return b},m=function(a){var b=this;b.keys={};a.queryObject?jQuery.each(a.get(),function(a,c){b.SET(a,c)}):jQuery.each(arguments,
function(){var a=(""+this).replace(/^[?#]/,"");a=a.replace(/[;&]$/,"");c&&(a=a.replace(/[+]/g," "));jQuery.each(a.split(/[&;]/),function(){var a=decodeURIComponent(this.split("=")[0]||""),c=decodeURIComponent(this.split("=")[1]||"");a&&(e&&(/^[+-]?[0-9]+\.[0-9]*$/.test(c)?c=parseFloat(c):/^[+-]?[0-9]+$/.test(c)&&(c=parseInt(c,10))),b.SET(a,c||0===c?c:!0))})});return b};m.prototype={queryObject:!0,has:function(b,c){b=this.get(b);return a(b,c)},GET:function(b){if(!a(b))return this.keys;var c=h(b);b=
c[1];for(c=this.keys[c[0]];null!=c&&0!=b.length;)c=c[b.shift()];return"number"==typeof c?c:c||""},get:function(b){b=this.GET(b);return a(b,Object)?jQuery.extend(!0,{},b):a(b,Array)?b.slice(0):b},SET:function(b,c){c=a(c)?c:null;b=h(b);var d=b[0];this.keys[d]=l(this.keys[d],b[1].slice(0),c);return this},set:function(a,b){return this.copy().SET(a,b)},REMOVE:function(a){return this.SET(a,null).COMPACT()},remove:function(a){return this.copy().REMOVE(a)},EMPTY:function(){var a=this;jQuery.each(a.keys,function(b,
c){delete a.keys[b]});return a},load:function(a){var b=a.replace(/^.*?[#](.+?)(?:\?.+)?$/,"$1"),c=a.replace(/^.*?[?](.+?)(?:#.+)?$/,"$1");return new m(a.length==c.length?"":c,a.length==b.length?"":b)},empty:function(){return this.copy().EMPTY()},copy:function(){return new m(this)},COMPACT:function(){function b(c){var d="object"==typeof c?a(c,Array)?[]:{}:c;"object"==typeof c&&jQuery.each(c,function(c,e){if(!a(e))return!0;e=b(e);a(d,Array)?d.push(e):d[c]=e});return d}this.keys=b(this.keys);return this},
compact:function(){return this.copy().COMPACT()},toString:function(){var e=[],f=[],h=function(a){a+="";c&&(a=a.replace(/ /g,"+"));return encodeURIComponent(a)},l=function(b,c){var d=function(a){return c&&""!=c?[c,"[",a,"]"].join(""):[a].join("")};jQuery.each(b,function(b,c){"object"==typeof c?l(c,d(b)):(b=d(b),a(c)&&!1!==c&&(b=[h(b)],!0!==c&&(b.push("="),b.push(h(c))),f.push(b.join(""))))})};l(this.keys);0<f.length&&e.push(d);e.push(f.join(b));return e.join("")}};return new m(location.search,location.hash)}}(jQuery.query||
{});String.prototype.parseColor=function(a){var b="#";if("rgb("==this.slice(0,4)){var c=this.slice(4,this.length-1).split(","),d=0;do b+=parseInt(c[d]).toColorPart();while(3>++d)}else if("#"==this.slice(0,1)){if(4==this.length)for(d=1;4>d;d++)b+=(this.charAt(d)+this.charAt(d)).toLowerCase();7==this.length&&(b=this.toLowerCase())}return 7==b.length?b:a||this};
Element.collectTextNodes=function(a){return $A($(a).childNodes).collect(function(a){return 3==a.nodeType?a.nodeValue:a.hasChildNodes()?Element.collectTextNodes(a):""}).flatten().join("")};Element.collectTextNodesIgnoreClass=function(a,b){return $A($(a).childNodes).collect(function(a){return 3==a.nodeType?a.nodeValue:a.hasChildNodes()&&!Element.hasClassName(a,b)?Element.collectTextNodesIgnoreClass(a,b):""}).flatten().join("")};
Element.setContentZoom=function(a,b){a=$(a);a.setStyle({fontSize:b/100+"em"});Prototype.Browser.WebKit&&window.scrollBy(0,0);return a};Element.getInlineOpacity=function(a){return $(a).style.opacity||""};Element.forceRerendering=function(a){try{a=$(a);var b=document.createTextNode(" ");a.appendChild(b);a.removeChild(b)}catch(c){}};
var Effect={_elementDoesNotExistError:{name:"ElementDoesNotExistError",message:"The specified DOM element does not exist, but is required for this effect to operate"},Transitions:{linear:Prototype.K,sinoidal:function(a){return-Math.cos(a*Math.PI)/2+.5},reverse:function(a){return 1-a},flicker:function(a){a=-Math.cos(a*Math.PI)/4+.75+Math.random()/4;return 1<a?1:a},wobble:function(a){return-Math.cos(a*Math.PI*9*a)/2+.5},pulse:function(a,b){return-Math.cos(a*((b||5)-.5)*2*Math.PI)/2+.5},spring:function(a){return 1-
Math.cos(4.5*a*Math.PI)*Math.exp(6*-a)},none:function(a){return 0},full:function(a){return 1}},DefaultOptions:{duration:1,fps:100,sync:!1,from:0,to:1,delay:0,queue:"parallel"},tagifyText:function(a){var b="position:relative";Prototype.Browser.IE&&(b+=";zoom:1");a=$(a);$A(a.childNodes).each(function(c){3==c.nodeType&&(c.nodeValue.toArray().each(function(d){a.insertBefore((new Element("span",{style:b})).update(" "==d?String.fromCharCode(160):d),c)}),Element.remove(c))})},multiple:function(a,b,c){a=
("object"==typeof a||Object.isFunction(a))&&a.length?a:$(a).childNodes;var d=Object.extend({speed:.1,delay:0},c||{}),e=d.delay;$A(a).each(function(a,c){new b(a,Object.extend(d,{delay:c*d.speed+e}))})},PAIRS:{slide:["SlideDown","SlideUp"],blind:["BlindDown","BlindUp"],appear:["Appear","Fade"]},toggle:function(a,b,c){a=$(a);b=(b||"appear").toLowerCase();c=Object.extend({queue:{position:"end",scope:a.id||"global",limit:1}},c||{});Effect[a.visible()?Effect.PAIRS[b][1]:Effect.PAIRS[b][0]](a,c)}};
Effect.DefaultOptions.transition=Effect.Transitions.sinoidal;
Effect.ScopedQueue=Class.create(Enumerable,{initialize:function(){this.effects=[];this.interval=null},_each:function(a){this.effects._each(a)},add:function(a){var b=(new Date).getTime();switch(Object.isString(a.options.queue)?a.options.queue:a.options.queue.position){case "front":this.effects.findAll(function(a){return"idle"==a.state}).each(function(b){b.startOn+=a.finishOn;b.finishOn+=a.finishOn});break;case "with-last":b=this.effects.pluck("startOn").max()||b;break;case "end":b=this.effects.pluck("finishOn").max()||
b}a.startOn+=b;a.finishOn+=b;(!a.options.queue.limit||this.effects.length<a.options.queue.limit)&&this.effects.push(a);this.interval||(this.interval=setInterval(this.loop.bind(this),15))},remove:function(a){this.effects=this.effects.reject(function(b){return b==a});0==this.effects.length&&(clearInterval(this.interval),this.interval=null)},loop:function(){for(var a=(new Date).getTime(),b=0,c=this.effects.length;b<c;b++)this.effects[b]&&this.effects[b].loop(a)}});
Effect.Queues={instances:$H(),get:function(a){return Object.isString(a)?this.instances.get(a)||this.instances.set(a,new Effect.ScopedQueue):a}};Effect.Queue=Effect.Queues.get("global");
Effect.Base=Class.create({position:null,start:function(a){a&&!1===a.transition&&(a.transition=Effect.Transitions.linear);this.options=Object.extend(Object.extend({},Effect.DefaultOptions),a||{});this.currentFrame=0;this.state="idle";this.startOn=1E3*this.options.delay;this.finishOn=this.startOn+1E3*this.options.duration;this.fromToDelta=this.options.to-this.options.from;this.totalTime=this.finishOn-this.startOn;this.totalFrames=this.options.fps*this.options.duration;this.render=function(){function a(a,
b){if(a.options[b+"Internal"])a.options[b+"Internal"](a);if(a.options[b])a.options[b](a)}return function(b){"idle"===this.state&&(this.state="running",a(this,"beforeSetup"),this.setup&&this.setup(),a(this,"afterSetup"));"running"===this.state&&(this.position=b=this.options.transition(b)*this.fromToDelta+this.options.from,a(this,"beforeUpdate"),this.update&&this.update(b),a(this,"afterUpdate"))}}();this.event("beforeStart");this.options.sync||Effect.Queues.get(Object.isString(this.options.queue)?"global":
this.options.queue.scope).add(this)},loop:function(a){if(a>=this.startOn)if(a>=this.finishOn)this.render(1),this.cancel(),this.event("beforeFinish"),this.finish&&this.finish(),this.event("afterFinish");else{a=(a-this.startOn)/this.totalTime;var b=(a*this.totalFrames).round();b>this.currentFrame&&(this.render(a),this.currentFrame=b)}},cancel:function(){this.options.sync||Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).remove(this);this.state="finished"},event:function(a){if(this.options[a+
"Internal"])this.options[a+"Internal"](this);if(this.options[a])this.options[a](this)},inspect:function(){var a=$H();for(property in this)Object.isFunction(this[property])||a.set(property,this[property]);return"#<Effect:"+a.inspect()+",options:"+$H(this.options).inspect()+">"}});
Effect.Parallel=Class.create(Effect.Base,{initialize:function(a,b){this.effects=a||[];this.start(b)},update:function(a){this.effects.invoke("render",a)},finish:function(a){this.effects.each(function(b){b.render(1);b.cancel();b.event("beforeFinish");b.finish&&b.finish(a);b.event("afterFinish")})}});
Effect.Tween=Class.create(Effect.Base,{initialize:function(a,b,c){a=Object.isString(a)?$(a):a;var d=$A(arguments),e=d.last();d=5==d.length?d[3]:null;this.method=Object.isFunction(e)?e.bind(a):Object.isFunction(a[e])?a[e].bind(a):function(b){a[e]=b};this.start(Object.extend({from:b,to:c},d||{}))},update:function(a){this.method(a)}});Effect.Event=Class.create(Effect.Base,{initialize:function(a){this.start(Object.extend({duration:0},a||{}))},update:Prototype.emptyFunction});
Effect.Opacity=Class.create(Effect.Base,{initialize:function(a,b){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&this.element.setStyle({zoom:1});a=Object.extend({from:this.element.getOpacity()||0,to:1},b||{});this.start(a)},update:function(a){this.element.setOpacity(a)}});
Effect.Move=Class.create(Effect.Base,{initialize:function(a,b){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;a=Object.extend({x:0,y:0,mode:"relative"},b||{});this.start(a)},setup:function(){this.element.makePositioned();this.originalLeft=parseFloat(this.element.getStyle("left")||"0");this.originalTop=parseFloat(this.element.getStyle("top")||"0");"absolute"==this.options.mode&&(this.options.x-=this.originalLeft,this.options.y-=this.originalTop)},update:function(a){this.element.setStyle({left:(this.options.x*
a+this.originalLeft).round()+"px",top:(this.options.y*a+this.originalTop).round()+"px"})}});Effect.MoveBy=function(a,b,c,d){return new Effect.Move(a,Object.extend({x:c,y:b},d||{}))};
Effect.Scale=Class.create(Effect.Base,{initialize:function(a,b,c){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;a=Object.extend({scaleX:!0,scaleY:!0,scaleContent:!0,scaleFromCenter:!1,scaleMode:"box",scaleFrom:100,scaleTo:b},c||{});this.start(a)},setup:function(){this.restoreAfterFinish=this.options.restoreAfterFinish||!1;this.elementPositioning=this.element.getStyle("position");this.originalStyle={};["top","left","width","height","fontSize"].each(function(a){this.originalStyle[a]=
this.element.style[a]}.bind(this));this.originalTop=this.element.offsetTop;this.originalLeft=this.element.offsetLeft;var a=this.element.getStyle("font-size")||"100%";["em","px","%","pt"].each(function(b){0<a.indexOf(b)&&(this.fontSize=parseFloat(a),this.fontSizeType=b)}.bind(this));this.factor=(this.options.scaleTo-this.options.scaleFrom)/100;this.dims=null;"box"==this.options.scaleMode&&(this.dims=[this.element.offsetHeight,this.element.offsetWidth]);/^content/.test(this.options.scaleMode)&&(this.dims=
[this.element.scrollHeight,this.element.scrollWidth]);this.dims||(this.dims=[this.options.scaleMode.originalHeight,this.options.scaleMode.originalWidth])},update:function(a){a=this.options.scaleFrom/100+this.factor*a;this.options.scaleContent&&this.fontSize&&this.element.setStyle({fontSize:this.fontSize*a+this.fontSizeType});this.setDimensions(this.dims[0]*a,this.dims[1]*a)},finish:function(a){this.restoreAfterFinish&&this.element.setStyle(this.originalStyle)},setDimensions:function(a,b){var c={};
this.options.scaleX&&(c.width=b.round()+"px");this.options.scaleY&&(c.height=a.round()+"px");this.options.scaleFromCenter&&(a=(a-this.dims[0])/2,b=(b-this.dims[1])/2,"absolute"==this.elementPositioning?(this.options.scaleY&&(c.top=this.originalTop-a+"px"),this.options.scaleX&&(c.left=this.originalLeft-b+"px")):(this.options.scaleY&&(c.top=-a+"px"),this.options.scaleX&&(c.left=-b+"px")));this.element.setStyle(c)}});
Effect.Highlight=Class.create(Effect.Base,{initialize:function(a,b){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;a=Object.extend({startcolor:"#fffae2"},b||{});this.start(a)},setup:function(){"none"==this.element.getStyle("display")?this.cancel():(this.oldStyle={},this.options.keepBackgroundImage||(this.oldStyle.backgroundImage=this.element.getStyle("background-image"),this.element.setStyle({backgroundImage:"none"})),this.options.endcolor||(this.options.endcolor=this.element.getStyle("background-color").parseColor("#ffffff")),
this.options.restorecolor||(this.options.restorecolor=this.element.getStyle("background-color")),this._base=$R(0,2).map(function(a){return parseInt(this.options.startcolor.slice(2*a+1,2*a+3),16)}.bind(this)),this._delta=$R(0,2).map(function(a){return parseInt(this.options.endcolor.slice(2*a+1,2*a+3),16)-this._base[a]}.bind(this)))},update:function(a){this.element.setStyle({backgroundColor:$R(0,2).inject("#",function(b,c,d){return b+(this._base[d]+this._delta[d]*a).round().toColorPart()}.bind(this))})},
finish:function(){this.element.setStyle(Object.extend(this.oldStyle,{backgroundColor:this.options.restorecolor}))}});Effect.ScrollTo=function(a,b){b=b||{};var c=document.viewport.getScrollOffsets();a=$(a).cumulativeOffset();b.offset&&(a[1]+=b.offset);return new Effect.Tween(null,c.top,a[1],b,function(a){scrollTo(c.left,a.round())})};
Effect.Fade=function(a,b){a=$(a);var c=a.getInlineOpacity();b=Object.extend({from:a.getOpacity()||1,to:0,afterFinishInternal:function(a){0==a.options.to&&a.element.hide().setStyle({opacity:c})}},b||{});return new Effect.Opacity(a,b)};
Effect.Appear=function(a,b){a=$(a);b=Object.extend({from:"none"==a.getStyle("display")?0:a.getOpacity()||0,to:1,afterFinishInternal:function(a){a.element.forceRerendering()},beforeSetup:function(a){a.element.setOpacity(a.options.from).show()}},b||{});return new Effect.Opacity(a,b)};
Effect.Puff=function(a,b){a=$(a);var c={opacity:a.getInlineOpacity(),position:a.getStyle("position"),top:a.style.top,left:a.style.left,width:a.style.width,height:a.style.height};return new Effect.Parallel([new Effect.Scale(a,200,{sync:!0,scaleFromCenter:!0,scaleContent:!0,restoreAfterFinish:!0}),new Effect.Opacity(a,{sync:!0,to:0})],Object.extend({duration:1,beforeSetupInternal:function(a){Position.absolutize(a.effects[0].element)},afterFinishInternal:function(a){a.effects[0].element.hide().setStyle(c)}},
b||{}))};Effect.BlindUp=function(a,b){a=$(a);a.makeClipping();return new Effect.Scale(a,0,Object.extend({scaleContent:!1,scaleX:!1,restoreAfterFinish:!0,afterFinishInternal:function(a){a.element.hide().undoClipping()}},b||{}))};
Effect.BlindDown=function(a,b){a=$(a);var c=a.getDimensions();return new Effect.Scale(a,100,Object.extend({scaleContent:!1,scaleX:!1,scaleFrom:0,scaleMode:{originalHeight:c.height,originalWidth:c.width},restoreAfterFinish:!0,afterSetup:function(a){a.element.makeClipping().setStyle({height:"0px"}).show()},afterFinishInternal:function(a){a.element.undoClipping()}},b||{}))};
Effect.SwitchOff=function(a,b){a=$(a);var c=a.getInlineOpacity();return new Effect.Appear(a,Object.extend({duration:.4,from:0,transition:Effect.Transitions.flicker,afterFinishInternal:function(a){new Effect.Scale(a.element,1,{duration:.3,scaleFromCenter:!0,scaleX:!1,scaleContent:!1,restoreAfterFinish:!0,beforeSetup:function(a){a.element.makePositioned().makeClipping()},afterFinishInternal:function(a){a.element.hide().undoClipping().undoPositioned().setStyle({opacity:c})}})}},b||{}))};
Effect.DropOut=function(a,b){a=$(a);var c={top:a.getStyle("top"),left:a.getStyle("left"),opacity:a.getInlineOpacity()};return new Effect.Parallel([new Effect.Move(a,{x:0,y:100,sync:!0}),new Effect.Opacity(a,{sync:!0,to:0})],Object.extend({duration:.5,beforeSetup:function(a){a.effects[0].element.makePositioned()},afterFinishInternal:function(a){a.effects[0].element.hide().undoPositioned().setStyle(c)}},b||{}))};
Effect.Shake=function(a,b){a=$(a);b=Object.extend({distance:20,duration:.5},b||{});var c=parseFloat(b.distance),d=parseFloat(b.duration)/10,e={top:a.getStyle("top"),left:a.getStyle("left")};return new Effect.Move(a,{x:c,y:0,duration:d,afterFinishInternal:function(a){new Effect.Move(a.element,{x:2*-c,y:0,duration:2*d,afterFinishInternal:function(a){new Effect.Move(a.element,{x:2*c,y:0,duration:2*d,afterFinishInternal:function(a){new Effect.Move(a.element,{x:2*-c,y:0,duration:2*d,afterFinishInternal:function(a){new Effect.Move(a.element,
{x:2*c,y:0,duration:2*d,afterFinishInternal:function(a){new Effect.Move(a.element,{x:-c,y:0,duration:d,afterFinishInternal:function(a){a.element.undoPositioned().setStyle(e)}})}})}})}})}})}})};
Effect.SlideDown=function(a,b){a=$(a).cleanWhitespace();var c=a.down().getStyle("bottom"),d=a.getDimensions();return new Effect.Scale(a,100,Object.extend({scaleContent:!1,scaleX:!1,scaleFrom:window.opera?0:1,scaleMode:{originalHeight:d.height,originalWidth:d.width},restoreAfterFinish:!0,afterSetup:function(a){a.element.makePositioned();a.element.down().makePositioned();window.opera&&a.element.setStyle({top:""});a.element.makeClipping().setStyle({height:"0px"}).show()},afterUpdateInternal:function(a){a.element.down().setStyle({bottom:a.dims[0]-
a.element.clientHeight+"px"})},afterFinishInternal:function(a){a.element.undoClipping().undoPositioned();a.element.down().undoPositioned().setStyle({bottom:c})}},b||{}))};
Effect.SlideUp=function(a,b){a=$(a).cleanWhitespace();var c=a.down().getStyle("bottom"),d=a.getDimensions();return new Effect.Scale(a,window.opera?0:1,Object.extend({scaleContent:!1,scaleX:!1,scaleFrom:100,scaleMode:{originalHeight:d.height,originalWidth:d.width},restoreAfterFinish:!0,afterSetup:function(a){a.element.makePositioned();a.element.down().makePositioned();window.opera&&a.element.setStyle({top:""});a.element.makeClipping().show()},afterUpdateInternal:function(a){a.element.down().setStyle({bottom:a.dims[0]-
a.element.clientHeight+"px"})},afterFinishInternal:function(a){a.element.hide().undoClipping().undoPositioned();a.element.down().undoPositioned().setStyle({bottom:c})}},b||{}))};Effect.Squish=function(a){return new Effect.Scale(a,window.opera?1:0,{restoreAfterFinish:!0,beforeSetup:function(a){a.element.makeClipping()},afterFinishInternal:function(a){a.element.hide().undoClipping()}})};
Effect.Grow=function(a,b){a=$(a);var c=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.full},b||{}),d={top:a.style.top,left:a.style.left,height:a.style.height,width:a.style.width,opacity:a.getInlineOpacity()},e=a.getDimensions(),f,h,l;switch(c.direction){case "top-left":var m=f=h=l=0;break;case "top-right":m=e.width;f=l=0;h=-e.width;break;case "bottom-left":m=h=0;f=e.height;l=-e.height;break;
case "bottom-right":m=e.width;f=e.height;h=-e.width;l=-e.height;break;case "center":m=e.width/2,f=e.height/2,h=-e.width/2,l=-e.height/2}return new Effect.Move(a,{x:m,y:f,duration:.01,beforeSetup:function(a){a.element.hide().makeClipping().makePositioned()},afterFinishInternal:function(a){new Effect.Parallel([new Effect.Opacity(a.element,{sync:!0,to:1,from:0,transition:c.opacityTransition}),new Effect.Move(a.element,{x:h,y:l,sync:!0,transition:c.moveTransition}),new Effect.Scale(a.element,100,{scaleMode:{originalHeight:e.height,
originalWidth:e.width},sync:!0,scaleFrom:window.opera?1:0,transition:c.scaleTransition,restoreAfterFinish:!0})],Object.extend({beforeSetup:function(a){a.effects[0].element.setStyle({height:"0px"}).show()},afterFinishInternal:function(a){a.effects[0].element.undoClipping().undoPositioned().setStyle(d)}},c))}})};
Effect.Shrink=function(a,b){a=$(a);b=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.none},b||{});var c={top:a.style.top,left:a.style.left,height:a.style.height,width:a.style.width,opacity:a.getInlineOpacity()},d=a.getDimensions(),e;switch(b.direction){case "top-left":var f=e=0;break;case "top-right":f=d.width;e=0;break;case "bottom-left":f=0;e=d.height;break;case "bottom-right":f=d.width;
e=d.height;break;case "center":f=d.width/2,e=d.height/2}return new Effect.Parallel([new Effect.Opacity(a,{sync:!0,to:0,from:1,transition:b.opacityTransition}),new Effect.Scale(a,window.opera?1:0,{sync:!0,transition:b.scaleTransition,restoreAfterFinish:!0}),new Effect.Move(a,{x:f,y:e,sync:!0,transition:b.moveTransition})],Object.extend({beforeStartInternal:function(a){a.effects[0].element.makePositioned().makeClipping()},afterFinishInternal:function(a){a.effects[0].element.hide().undoClipping().undoPositioned().setStyle(c)}},
b))};Effect.Pulsate=function(a,b){a=$(a);var c=b||{},d=a.getInlineOpacity(),e=c.transition||Effect.Transitions.linear;return new Effect.Opacity(a,Object.extend(Object.extend({duration:2,from:0,afterFinishInternal:function(a){a.element.setStyle({opacity:d})}},c),{transition:function(a){return 1-e(-Math.cos(a*(c.pulses||5)*2*Math.PI)/2+.5)}}))};
Effect.Fold=function(a,b){a=$(a);var c={top:a.style.top,left:a.style.left,width:a.style.width,height:a.style.height};a.makeClipping();return new Effect.Scale(a,5,Object.extend({scaleContent:!1,scaleX:!1,afterFinishInternal:function(b){new Effect.Scale(a,1,{scaleContent:!1,scaleY:!1,afterFinishInternal:function(a){a.element.hide().undoClipping().setStyle(c)}})}},b||{}))};
Effect.Morph=Class.create(Effect.Base,{initialize:function(a,b){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;a=Object.extend({style:{}},b||{});if(Object.isString(a.style))if(a.style.include(":"))this.style=a.style.parseStyle();else{this.element.addClassName(a.style);this.style=$H(this.element.getStyles());this.element.removeClassName(a.style);var c=this.element.getStyles();this.style=this.style.reject(function(a){return a.value==c[a.key]});a.afterFinishInternal=function(a){a.element.addClassName(a.options.style);
a.transforms.each(function(b){a.element.style[b.style]=""})}}else this.style=$H(a.style);this.start(a)},setup:function(){function a(a){if(!a||["rgba(0, 0, 0, 0)","transparent"].include(a))a="#ffffff";a=a.parseColor();return $R(0,2).map(function(b){return parseInt(a.slice(2*b+1,2*b+3),16)})}this.transforms=this.style.map(function(b){var c=b[0];b=b[1];var d=null;"#zzzzzz"!=b.parseColor("#zzzzzz")?(b=b.parseColor(),d="color"):"opacity"==c?(b=parseFloat(b),Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&
this.element.setStyle({zoom:1})):Element.CSS_LENGTH.test(b)&&(d=b.match(/^([\+\-]?[0-9\.]+)(.*)$/),b=parseFloat(d[1]),d=3==d.length?d[2]:null);var e=this.element.getStyle(c);return{style:c.camelize(),originalValue:"color"==d?a(e):parseFloat(e||0),targetValue:"color"==d?a(b):b,unit:d}}.bind(this)).reject(function(a){return a.originalValue==a.targetValue||"color"!=a.unit&&(isNaN(a.originalValue)||isNaN(a.targetValue))})},update:function(a){for(var b={},c,d=this.transforms.length;d--;)b[(c=this.transforms[d]).style]=
"color"==c.unit?"#"+Math.round(c.originalValue[0]+(c.targetValue[0]-c.originalValue[0])*a).toColorPart()+Math.round(c.originalValue[1]+(c.targetValue[1]-c.originalValue[1])*a).toColorPart()+Math.round(c.originalValue[2]+(c.targetValue[2]-c.originalValue[2])*a).toColorPart():(c.originalValue+(c.targetValue-c.originalValue)*a).toFixed(3)+(null===c.unit?"":c.unit);this.element.setStyle(b,!0)}});
Effect.Transform=Class.create({initialize:function(a,b){this.tracks=[];this.options=b||{};this.addTracks(a)},addTracks:function(a){a.each(function(a){a=$H(a);var b=a.values().first();this.tracks.push($H({ids:a.keys().first(),effect:Effect.Morph,options:{style:b}}))}.bind(this));return this},play:function(){return new Effect.Parallel(this.tracks.map(function(a){var b=a.get("ids"),c=a.get("effect"),d=a.get("options");return[$(b)||$$(b)].flatten().map(function(a){return new c(a,Object.extend({sync:!0},
d))})}).flatten(),this.options)}});Element.CSS_PROPERTIES=$w("backgroundColor backgroundPosition borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth borderRightColor borderRightStyle borderRightWidth borderSpacing borderTopColor borderTopStyle borderTopWidth bottom clip color fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop markerOffset maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex");
Element.CSS_LENGTH=/^(([\+\-]?[0-9\.]+)(em|ex|px|in|cm|mm|pt|pc|%))|0$/;String.__parseStyleElement=document.createElement("div");
String.prototype.parseStyle=function(){var a=$H();if(Prototype.Browser.WebKit)var b=(new Element("div",{style:this})).style;else String.__parseStyleElement.innerHTML='<div style="'+this+'"></div>',b=String.__parseStyleElement.childNodes[0].style;Element.CSS_PROPERTIES.each(function(c){b[c]&&a.set(c,b[c])});Prototype.Browser.IE&&this.include("opacity")&&a.set("opacity",this.match(/opacity:\s*((?:0|1)?(?:\.\d*)?)/)[1]);return a};
Element.getStyles=document.defaultView&&document.defaultView.getComputedStyle?function(a){var b=document.defaultView.getComputedStyle($(a),null);return Element.CSS_PROPERTIES.inject({},function(a,d){a[d]=b[d];return a})}:function(a){a=$(a);var b=a.currentStyle;var c=Element.CSS_PROPERTIES.inject({},function(a,c){a[c]=b[c];return a});c.opacity||(c.opacity=a.getOpacity());return c};
Effect.Methods={morph:function(a,b,c){a=$(a);new Effect.Morph(a,Object.extend({style:b},c||{}));return a},visualEffect:function(a,b,c){a=$(a);b=b.dasherize().camelize();b=b.charAt(0).toUpperCase()+b.substring(1);new Effect[b](a,c);return a},highlight:function(a,b){a=$(a);new Effect.Highlight(a,b);return a}};
$w("fade appear grow shrink fold blindUp blindDown slideUp slideDown pulsate shake puff squish switchOff dropOut").each(function(a){Effect.Methods[a]=function(b,c){b=$(b);Effect[a.charAt(0).toUpperCase()+a.substring(1)](b,c);return b}});$w("getInlineOpacity forceRerendering setContentZoom collectTextNodes collectTextNodesIgnoreClass getStyles").each(function(a){Effect.Methods[a]=Element[a]});Element.addMethods(Effect.Methods);
if("undefined"==typeof Effect)throw"controls.js requires including script.aculo.us' effects.js library";var Autocompleter={};
Autocompleter.Base=Class.create({baseInitialize:function(a,b,c){this.element=a=$(a);this.update=$(b);this.active=this.changed=this.hasFocus=!1;this.entryCount=this.index=0;this.oldElementValue=this.element.value;this.setOptions?this.setOptions(c):this.options=c||{};this.options.paramName=this.options.paramName||this.element.name;this.options.tokens=this.options.tokens||[];this.options.frequency=this.options.frequency||.4;this.options.minChars=this.options.minChars||1;this.options.onShow=this.options.onShow||
function(a,b){b.style.position&&"absolute"!=b.style.position||(b.style.position="absolute",Position.clone(a,b,{setHeight:!1,offsetTop:a.offsetHeight}));Effect.Appear(b,{duration:.15})};this.options.onHide=this.options.onHide||function(a,b){new Effect.Fade(b,{duration:.15})};"string"==typeof this.options.tokens&&(this.options.tokens=Array(this.options.tokens));this.options.tokens.include("\n")||this.options.tokens.push("\n");this.observer=null;this.element.setAttribute("autocomplete","off");Element.hide(this.update);
Event.observe(this.element,"blur",this.onBlur.bindAsEventListener(this));Event.observe(this.element,"keydown",this.onKeyPress.bindAsEventListener(this))},show:function(){if("none"==Element.getStyle(this.update,"display"))this.options.onShow(this.element,this.update);!this.iefix&&Prototype.Browser.IE&&"absolute"==Element.getStyle(this.update,"position")&&(new Insertion.After(this.update,'<iframe id="'+this.update.id+'_iefix" style="display:none;position:absolute;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);" src="javascript:false;" frameborder="0" scrolling="no"></iframe>'),
this.iefix=$(this.update.id+"_iefix"));this.iefix&&setTimeout(this.fixIEOverlapping.bind(this),50)},fixIEOverlapping:function(){Position.clone(this.update,this.iefix,{setTop:!this.update.style.height});this.iefix.style.zIndex=1;this.update.style.zIndex=2;Element.show(this.iefix)},hide:function(){this.stopIndicator();if("none"!=Element.getStyle(this.update,"display"))this.options.onHide(this.element,this.update);this.iefix&&Element.hide(this.iefix)},startIndicator:function(){this.options.indicator&&
Element.show(this.options.indicator)},stopIndicator:function(){this.options.indicator&&Element.hide(this.options.indicator)},onKeyPress:function(a){if(this.active)switch(a.keyCode){case Event.KEY_TAB:case Event.KEY_RETURN:this.selectEntry(),Event.stop(a);case Event.KEY_ESC:this.hide();this.active=!1;Event.stop(a);return;case Event.KEY_LEFT:case Event.KEY_RIGHT:return;case Event.KEY_UP:this.markPrevious();this.render();Event.stop(a);return;case Event.KEY_DOWN:this.markNext();this.render();Event.stop(a);
return}else if(a.keyCode==Event.KEY_TAB||a.keyCode==Event.KEY_RETURN||0<Prototype.Browser.WebKit&&0==a.keyCode)return;this.hasFocus=this.changed=!0;this.observer&&clearTimeout(this.observer);this.observer=setTimeout(this.onObserverEvent.bind(this),1E3*this.options.frequency)},activate:function(){this.changed=!1;this.hasFocus=!0;this.getUpdatedChoices()},onHover:function(a){var b=Event.findElement(a,"LI");this.index!=b.autocompleteIndex&&(this.index=b.autocompleteIndex,this.render());Event.stop(a)},
onClick:function(a){this.index=Event.findElement(a,"LI").autocompleteIndex;this.selectEntry();this.hide()},onBlur:function(a){setTimeout(this.hide.bind(this),250);this.active=this.hasFocus=!1},render:function(){if(0<this.entryCount){for(var a=0;a<this.entryCount;a++)this.index==a?Element.addClassName(this.getEntry(a),"selected"):Element.removeClassName(this.getEntry(a),"selected");this.hasFocus&&(this.show(),this.active=!0)}else this.active=!1,this.hide()},markPrevious:function(){0<this.index?this.index--:
this.index=this.entryCount-1;this.getEntry(this.index).scrollIntoView(!0)},markNext:function(){this.index<this.entryCount-1?this.index++:this.index=0;this.getEntry(this.index).scrollIntoView(!1)},getEntry:function(a){return this.update.firstChild.childNodes[a]},getCurrentEntry:function(){return this.getEntry(this.index)},selectEntry:function(){this.active=!1;this.updateElement(this.getCurrentEntry())},updateElement:function(a){if(this.options.updateElement)this.options.updateElement(a);else{var b=
"";if(this.options.select){var c=$(a).select("."+this.options.select)||[];0<c.length&&(b=Element.collectTextNodes(c[0],this.options.select))}else b=Element.collectTextNodesIgnoreClass(a,"informal");c=this.getTokenBounds();if(-1!=c[0]){var d=this.element.value.substr(0,c[0]),e=this.element.value.substr(c[0]).match(/^\s+/);e&&(d+=e[0]);this.element.value=d+b+this.element.value.substr(c[1])}else this.element.value=b;this.oldElementValue=this.element.value;this.element.focus();this.options.afterUpdateElement&&
this.options.afterUpdateElement(this.element,a)}},updateChoices:function(a){if(!this.changed&&this.hasFocus){this.update.innerHTML=a;Element.cleanWhitespace(this.update);Element.cleanWhitespace(this.update.down());if(this.update.firstChild&&this.update.down().childNodes)for(this.entryCount=this.update.down().childNodes.length,a=0;a<this.entryCount;a++){var b=this.getEntry(a);b.autocompleteIndex=a;this.addObservers(b)}else this.entryCount=0;this.stopIndicator();this.index=0;1==this.entryCount&&this.options.autoSelect?
(this.selectEntry(),this.hide()):this.render()}},addObservers:function(a){Event.observe(a,"mouseover",this.onHover.bindAsEventListener(this));Event.observe(a,"click",this.onClick.bindAsEventListener(this))},onObserverEvent:function(){this.changed=!1;this.tokenBounds=null;this.getToken().length>=this.options.minChars?this.getUpdatedChoices():(this.active=!1,this.hide());this.oldElementValue=this.element.value},getToken:function(){var a=this.getTokenBounds();return this.element.value.substring(a[0],
a[1]).strip()},getTokenBounds:function(){if(null!=this.tokenBounds)return this.tokenBounds;var a=this.element.value;if(a.strip().empty())return[-1,0];for(var b=arguments.callee.getFirstDifferencePos(a,this.oldElementValue),c=b==this.oldElementValue.length?1:0,d=-1,e=a.length,f,h=0,l=this.options.tokens.length;h<l;++h)f=a.lastIndexOf(this.options.tokens[h],b+c-1),f>d&&(d=f),f=a.indexOf(this.options.tokens[h],b+c),-1!=f&&f<e&&(e=f);return this.tokenBounds=[d+1,e]}});
Autocompleter.Base.prototype.getTokenBounds.getFirstDifferencePos=function(a,b){for(var c=Math.min(a.length,b.length),d=0;d<c;++d)if(a[d]!=b[d])return d;return c};
Ajax.Autocompleter=Class.create(Autocompleter.Base,{initialize:function(a,b,c,d){this.baseInitialize(a,b,d);this.options.asynchronous=!0;this.options.onComplete=this.onComplete.bind(this);this.options.defaultParams=this.options.parameters||null;this.url=c},getUpdatedChoices:function(){this.startIndicator();var a=encodeURIComponent(this.options.paramName)+"="+encodeURIComponent(this.getToken());this.options.parameters=this.options.callback?this.options.callback(this.element,a):a;this.options.defaultParams&&
(this.options.parameters+="&"+this.options.defaultParams);new Ajax.Request(this.url,this.options)},onComplete:function(a){this.updateChoices(a.responseText)}});
Autocompleter.Local=Class.create(Autocompleter.Base,{initialize:function(a,b,c,d){this.baseInitialize(a,b,d);this.options.array=c},getUpdatedChoices:function(){this.updateChoices(this.options.selector(this))},setOptions:function(a){this.options=Object.extend({choices:10,partialSearch:!0,partialChars:2,ignoreCase:!0,fullSearch:!1,selector:function(a){for(var b=[],d=[],e=a.getToken(),f=0;f<a.options.array.length&&b.length<a.options.choices;f++)for(var h=a.options.array[f],l=a.options.ignoreCase?h.toLowerCase().indexOf(e.toLowerCase()):
h.indexOf(e);-1!=l;){if(0==l&&h.length!=e.length){b.push("<li><strong>"+h.substr(0,e.length)+"</strong>"+h.substr(e.length)+"</li>");break}else if(e.length>=a.options.partialChars&&a.options.partialSearch&&-1!=l&&(a.options.fullSearch||/\s/.test(h.substr(l-1,1)))){d.push("<li>"+h.substr(0,l)+"<strong>"+h.substr(l,e.length)+"</strong>"+h.substr(l+e.length)+"</li>");break}l=a.options.ignoreCase?h.toLowerCase().indexOf(e.toLowerCase(),l+1):h.indexOf(e,l+1)}d.length&&(b=b.concat(d.slice(0,a.options.choices-
b.length)));return"<ul>"+b.join("")+"</ul>"}},a||{})}});Field.scrollFreeActivate=function(a){setTimeout(function(){Field.activate(a)},1)};
Ajax.InPlaceEditor=Class.create({initialize:function(a,b,c){this.url=b;this.element=a=$(a);this.prepareOptions();this._controls={};arguments.callee.dealWithDeprecatedOptions(c);Object.extend(this.options,c||{});!this.options.formId&&this.element.id&&(this.options.formId=this.element.id+"-inplaceeditor",$(this.options.formId)&&(this.options.formId=""));this.options.externalControl&&(this.options.externalControl=$(this.options.externalControl));this.options.externalControl||(this.options.externalControlOnly=
!1);this._originalBackground=this.element.getStyle("background-color")||"transparent";this.element.title=this.options.clickToEditText;this._boundCancelHandler=this.handleFormCancellation.bind(this);this._boundComplete=(this.options.onComplete||Prototype.emptyFunction).bind(this);this._boundFailureHandler=this.handleAJAXFailure.bind(this);this._boundSubmitHandler=this.handleFormSubmission.bind(this);this._boundWrapperHandler=this.wrapUp.bind(this);this.registerListeners()},checkForEscapeOrReturn:function(a){!this._editing||
a.ctrlKey||a.altKey||a.shiftKey||(Event.KEY_ESC==a.keyCode?this.handleFormCancellation(a):Event.KEY_RETURN==a.keyCode&&this.handleFormSubmission(a))},createControl:function(a,b,c){var d=this.options[a+"Control"];b=this.options[a+"Text"];"button"==d?(c=document.createElement("input"),c.type="submit",c.value=b,c.className="editor_"+a+"_button","cancel"==a&&(c.onclick=this._boundCancelHandler),this._form.appendChild(c),this._controls[a]=c):"link"==d&&(d=document.createElement("a"),d.href="#",d.appendChild(document.createTextNode(b)),
d.onclick="cancel"==a?this._boundCancelHandler:this._boundSubmitHandler,d.className="editor_"+a+"_link",c&&(d.className+=" "+c),this._form.appendChild(d),this._controls[a]=d)},createEditField:function(){var a=this.options.loadTextURL?this.options.loadingText:this.getText();if(1>=this.options.rows&&!/\r|\n/.test(this.getText())){var b=document.createElement("input");b.type="text";var c=this.options.size||this.options.cols||0;0<c&&(b.size=c)}else b=document.createElement("textarea"),b.rows=1>=this.options.rows?
this.options.autoRows:this.options.rows,b.cols=this.options.cols||40;b.name=this.options.paramName;b.value=a;b.className="editor_field";this.options.submitOnBlur&&(b.onblur=this._boundSubmitHandler);this._controls.editor=b;this.options.loadTextURL&&this.loadExternalText();this._form.appendChild(this._controls.editor)},createForm:function(){function a(a,d){(a=b.options["text"+a+"Controls"])&&!1!==d&&b._form.appendChild(document.createTextNode(a))}var b=this;this._form=$(document.createElement("form"));
this._form.id=this.options.formId;this._form.addClassName(this.options.formClassName);this._form.onsubmit=this._boundSubmitHandler;this.createEditField();"textarea"==this._controls.editor.tagName.toLowerCase()&&this._form.appendChild(document.createElement("br"));if(this.options.onFormCustomization)this.options.onFormCustomization(this,this._form);a("Before",this.options.okControl||this.options.cancelControl);this.createControl("ok",this._boundSubmitHandler);a("Between",this.options.okControl&&this.options.cancelControl);
this.createControl("cancel",this._boundCancelHandler,"editor_cancel");a("After",this.options.okControl||this.options.cancelControl)},destroy:function(){this._oldInnerHTML&&(this.element.innerHTML=this._oldInnerHTML);this.leaveEditMode();this.unregisterListeners()},enterEditMode:function(a){this._saving||this._editing||(this._editing=!0,this.triggerCallback("onEnterEditMode"),this.options.externalControl&&this.options.externalControl.hide(),this.element.hide(),this.createForm(),this.element.parentNode.insertBefore(this._form,
this.element),this.options.loadTextURL||this.postProcessEditField(),a&&Event.stop(a))},enterHover:function(a){this.options.hoverClassName&&this.element.addClassName(this.options.hoverClassName);this._saving||this.triggerCallback("onEnterHover")},getText:function(){return this.element.innerHTML.unescapeHTML()},handleAJAXFailure:function(a){this.triggerCallback("onFailure",a);this._oldInnerHTML&&(this.element.innerHTML=this._oldInnerHTML,this._oldInnerHTML=null)},handleFormCancellation:function(a){this.wrapUp();
a&&Event.stop(a)},handleFormSubmission:function(a){var b=this._form,c=$F(this._controls.editor);this.prepareSubmission();b=this.options.callback(b,c)||"";Object.isString(b)&&(b=b.toQueryParams());b.editorId=this.element.id;this.options.htmlResponse?(c=Object.extend({evalScripts:!0},this.options.ajaxOptions),Object.extend(c,{parameters:b,onComplete:this._boundWrapperHandler,onFailure:this._boundFailureHandler}),new Ajax.Updater({success:this.element},this.url,c)):(c=Object.extend({method:"get"},this.options.ajaxOptions),
Object.extend(c,{parameters:b,onComplete:this._boundWrapperHandler,onFailure:this._boundFailureHandler}),new Ajax.Request(this.url,c));a&&Event.stop(a)},leaveEditMode:function(){this.element.removeClassName(this.options.savingClassName);this.removeForm();this.leaveHover();this.element.style.backgroundColor=this._originalBackground;this.element.show();this.options.externalControl&&this.options.externalControl.show();this._editing=this._saving=!1;this._oldInnerHTML=null;this.triggerCallback("onLeaveEditMode")},
leaveHover:function(a){this.options.hoverClassName&&this.element.removeClassName(this.options.hoverClassName);this._saving||this.triggerCallback("onLeaveHover")},loadExternalText:function(){this._form.addClassName(this.options.loadingClassName);this._controls.editor.disabled=!0;var a=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(a,{parameters:"editorId="+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(a){this._form.removeClassName(this.options.loadingClassName);
a=a.responseText;this.options.stripLoadedTextTags&&(a=a.stripTags());this._controls.editor.value=a;this._controls.editor.disabled=!1;this.postProcessEditField()}.bind(this),onFailure:this._boundFailureHandler});new Ajax.Request(this.options.loadTextURL,a)},postProcessEditField:function(){var a=this.options.fieldPostCreation;if(a)$(this._controls.editor)["focus"==a?"focus":"activate"]()},prepareOptions:function(){this.options=Object.clone(Ajax.InPlaceEditor.DefaultOptions);Object.extend(this.options,
Ajax.InPlaceEditor.DefaultCallbacks);[this._extraDefaultOptions].flatten().compact().each(function(a){Object.extend(this.options,a)}.bind(this))},prepareSubmission:function(){this._saving=!0;this.removeForm();this.leaveHover();this.showSaving()},registerListeners:function(){this._listeners={};var a;$H(Ajax.InPlaceEditor.Listeners).each(function(b){a=this[b.value].bind(this);this._listeners[b.key]=a;this.options.externalControlOnly||this.element.observe(b.key,a);this.options.externalControl&&this.options.externalControl.observe(b.key,
a)}.bind(this))},removeForm:function(){this._form&&(this._form.remove(),this._form=null,this._controls={})},showSaving:function(){this._oldInnerHTML=this.element.innerHTML;this.element.innerHTML=this.options.savingText;this.element.addClassName(this.options.savingClassName);this.element.style.backgroundColor=this._originalBackground;this.element.show()},triggerCallback:function(a,b){if("function"==typeof this.options[a])this.options[a](this,b)},unregisterListeners:function(){$H(this._listeners).each(function(a){this.options.externalControlOnly||
this.element.stopObserving(a.key,a.value);this.options.externalControl&&this.options.externalControl.stopObserving(a.key,a.value)}.bind(this))},wrapUp:function(a){this.leaveEditMode();this._boundComplete(a,this.element)}});Object.extend(Ajax.InPlaceEditor.prototype,{dispose:Ajax.InPlaceEditor.prototype.destroy});
Ajax.InPlaceCollectionEditor=Class.create(Ajax.InPlaceEditor,{initialize:function($super,b,c,d){this._extraDefaultOptions=Ajax.InPlaceCollectionEditor.DefaultOptions;$super(b,c,d)},createEditField:function(){var a=document.createElement("select");a.name=this.options.paramName;a.size=1;this._controls.editor=a;this._collection=this.options.collection||[];this.options.loadCollectionURL?this.loadCollection():this.checkForExternalText();this._form.appendChild(this._controls.editor)},loadCollection:function(){this._form.addClassName(this.options.loadingClassName);
this.showLoadingText(this.options.loadingCollectionText);var a=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(a,{parameters:"editorId="+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(a){a=a.responseText.strip();if(!/^\[.*\]$/.test(a))throw"Server returned an invalid collection representation.";this._collection=eval(a);this.checkForExternalText()}.bind(this),onFailure:this.onFailure});new Ajax.Request(this.options.loadCollectionURL,a)},
showLoadingText:function(a){this._controls.editor.disabled=!0;var b=this._controls.editor.firstChild;b||(b=document.createElement("option"),b.value="",this._controls.editor.appendChild(b),b.selected=!0);b.update((a||"").stripScripts().stripTags())},checkForExternalText:function(){this._text=this.getText();this.options.loadTextURL?this.loadExternalText():this.buildOptionList()},loadExternalText:function(){this.showLoadingText(this.options.loadingText);var a=Object.extend({method:"get"},this.options.ajaxOptions);
Object.extend(a,{parameters:"editorId="+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(a){this._text=a.responseText.strip();this.buildOptionList()}.bind(this),onFailure:this.onFailure});new Ajax.Request(this.options.loadTextURL,a)},buildOptionList:function(){this._form.removeClassName(this.options.loadingClassName);this._collection=this._collection.map(function(a){return 2===a.length?a:[a,a].flatten()});var a="value"in this.options?this.options.value:this._text,
b=this._collection.any(function(b){return b[0]==a}.bind(this));this._controls.editor.update("");var c;this._collection.each(function(d,e){c=document.createElement("option");c.value=d[0];c.selected=b?d[0]==a:0==e;c.appendChild(document.createTextNode(d[1]));this._controls.editor.appendChild(c)}.bind(this));this._controls.editor.disabled=!1;Field.scrollFreeActivate(this._controls.editor)}});
Ajax.InPlaceEditor.prototype.initialize.dealWithDeprecatedOptions=function(a){function b(b,d){b in a||void 0===d||(a[b]=d)}a&&(b("cancelControl",a.cancelLink?"link":a.cancelButton?"button":a.cancelLink==a.cancelButton==0?!1:void 0),b("okControl",a.okLink?"link":a.okButton?"button":a.okLink==a.okButton==0?!1:void 0),b("highlightColor",a.highlightcolor),b("highlightEndColor",a.highlightendcolor))};
Object.extend(Ajax.InPlaceEditor,{DefaultOptions:{ajaxOptions:{},autoRows:3,cancelControl:"link",cancelText:"cancel",clickToEditText:"Click to edit",externalControl:null,externalControlOnly:!1,fieldPostCreation:"activate",formClassName:"inplaceeditor-form",formId:null,highlightColor:"#ffff99",highlightEndColor:"#ffffff",hoverClassName:"",htmlResponse:!0,loadingClassName:"inplaceeditor-loading",loadingText:"Loading...",okControl:"button",okText:"ok",paramName:"value",rows:1,savingClassName:"inplaceeditor-saving",
savingText:"Saving...",size:0,stripLoadedTextTags:!1,submitOnBlur:!1,textAfterControls:"",textBeforeControls:"",textBetweenControls:""},DefaultCallbacks:{callback:function(a){return Form.serialize(a)},onComplete:function(a,b){new Effect.Highlight(b,{startcolor:this.options.highlightColor,keepBackgroundImage:!0})},onEnterEditMode:null,onEnterHover:function(a){a.element.style.backgroundColor=a.options.highlightColor;a._effect&&a._effect.cancel()},onFailure:function(a,b){alert("Error communication with the server: "+
a.responseText.stripTags())},onFormCustomization:null,onLeaveEditMode:null,onLeaveHover:function(a){a._effect=new Effect.Highlight(a.element,{startcolor:a.options.highlightColor,endcolor:a.options.highlightEndColor,restorecolor:a._originalBackground,keepBackgroundImage:!0})}},Listeners:{click:"enterEditMode",keydown:"checkForEscapeOrReturn",mouseover:"enterHover",mouseout:"leaveHover"}});Ajax.InPlaceCollectionEditor.DefaultOptions={loadingCollectionText:"Loading options..."};
Form.Element.DelayedObserver=Class.create({initialize:function(a,b,c){this.delay=b||.5;this.element=$(a);this.callback=c;this.timer=null;this.lastValue=$F(this.element);Event.observe(this.element,"keyup",this.delayedListener.bindAsEventListener(this))},delayedListener:function(a){this.lastValue!=$F(this.element)&&(this.timer&&clearTimeout(this.timer),this.timer=setTimeout(this.onTimerEvent.bind(this),1E3*this.delay),this.lastValue=$F(this.element))},onTimerEvent:function(){this.timer=null;this.callback(this.element,
$F(this.element))}});if(Object.isUndefined(Effect))throw"dragdrop.js requires including script.aculo.us' effects.js library";
var Droppables={drops:[],remove:function(a){this.drops=this.drops.reject(function(b){return b.element==$(a)})},add:function(a,b){a=$(a);var c=Object.extend({greedy:!0,hoverclass:null,tree:!1},b||{});c.containment&&(c._containers=[],b=c.containment,Object.isArray(b)?b.each(function(a){c._containers.push($(a))}):c._containers.push($(b)));c.accept&&(c.accept=[c.accept].flatten());Element.makePositioned(a);c.element=a;this.drops.push(c)},findDeepestChild:function(a){deepest=a[0];for(i=1;i<a.length;++i)Element.isParent(a[i].element,
deepest.element)&&(deepest=a[i]);return deepest},isContained:function(a,b){var c=b.tree?a.treeNode:a.parentNode;return b._containers.detect(function(a){return c==a})},isAffected:function(a,b,c){return c.element!=b&&(!c._containers||this.isContained(b,c))&&(!c.accept||Element.classNames(b).detect(function(a){return c.accept.include(a)}))&&Position.within(c.element,a[0],a[1])},deactivate:function(a){a.hoverclass&&Element.removeClassName(a.element,a.hoverclass);this.last_active=null},activate:function(a){a.hoverclass&&
Element.addClassName(a.element,a.hoverclass);this.last_active=a},show:function(a,b){if(this.drops.length){var c,d=[];this.drops.each(function(c){Droppables.isAffected(a,b,c)&&d.push(c)});0<d.length&&(c=Droppables.findDeepestChild(d));this.last_active&&this.last_active!=c&&this.deactivate(this.last_active);if(c){Position.within(c.element,a[0],a[1]);if(c.onHover)c.onHover(b,c.element,Position.overlap(c.overlap,c.element));c!=this.last_active&&Droppables.activate(c)}}},fire:function(a,b){if(this.last_active&&
(Position.prepare(),this.isAffected([Event.pointerX(a),Event.pointerY(a)],b,this.last_active)&&this.last_active.onDrop))return this.last_active.onDrop(b,this.last_active.element,a),!0},reset:function(){this.last_active&&this.deactivate(this.last_active)}},Draggables={drags:[],observers:[],register:function(a){0==this.drags.length&&(this.eventMouseUp=this.endDrag.bindAsEventListener(this),this.eventMouseMove=this.updateDrag.bindAsEventListener(this),this.eventKeypress=this.keyPress.bindAsEventListener(this),
Event.observe(document,"mouseup",this.eventMouseUp),Event.observe(document,"mousemove",this.eventMouseMove),Event.observe(document,"keypress",this.eventKeypress));this.drags.push(a)},unregister:function(a){this.drags=this.drags.reject(function(b){return b==a});0==this.drags.length&&(Event.stopObserving(document,"mouseup",this.eventMouseUp),Event.stopObserving(document,"mousemove",this.eventMouseMove),Event.stopObserving(document,"keypress",this.eventKeypress))},activate:function(a){a.options.delay?
this._timeout=setTimeout(function(){Draggables._timeout=null;window.focus();Draggables.activeDraggable=a}.bind(this),a.options.delay):(window.focus(),this.activeDraggable=a)},deactivate:function(){this.activeDraggable=null},updateDrag:function(a){if(this.activeDraggable){var b=[Event.pointerX(a),Event.pointerY(a)];this._lastPointer&&this._lastPointer.inspect()==b.inspect()||(this._lastPointer=b,this.activeDraggable.updateDrag(a,b))}},endDrag:function(a){this._timeout&&(clearTimeout(this._timeout),
this._timeout=null);this.activeDraggable&&(this._lastPointer=null,this.activeDraggable.endDrag(a),this.activeDraggable=null)},keyPress:function(a){this.activeDraggable&&this.activeDraggable.keyPress(a)},addObserver:function(a){this.observers.push(a);this._cacheObserverCallbacks()},removeObserver:function(a){this.observers=this.observers.reject(function(b){return b.element==a});this._cacheObserverCallbacks()},notify:function(a,b,c){0<this[a+"Count"]&&this.observers.each(function(d){if(d[a])d[a](a,
b,c)});if(b.options[a])b.options[a](b,c)},_cacheObserverCallbacks:function(){["onStart","onEnd","onDrag"].each(function(a){Draggables[a+"Count"]=Draggables.observers.select(function(b){return b[a]}).length})}},Draggable=Class.create({initialize:function(a,b){var c={handle:!1,reverteffect:function(a,b,c){new Effect.Move(a,{x:-c,y:-b,duration:.02*Math.sqrt(Math.abs(b^2)+Math.abs(c^2)),queue:{scope:"_draggable",position:"end"}})},endeffect:function(a){var b=Object.isNumber(a._opacity)?a._opacity:1;new Effect.Opacity(a,
{duration:.2,from:.7,to:b,queue:{scope:"_draggable",position:"end"},afterFinish:function(){Draggable._dragging[a]=!1}})},zindex:1E3,revert:!1,quiet:!1,scroll:!1,scrollSensitivity:20,scrollSpeed:15,snap:!1,delay:0};b&&!Object.isUndefined(b.endeffect)||Object.extend(c,{starteffect:function(a){a._opacity=Element.getOpacity(a);Draggable._dragging[a]=!0;new Effect.Opacity(a,{duration:.2,from:a._opacity,to:.7})}});b=Object.extend(c,b||{});this.element=$(a);b.handle&&Object.isString(b.handle)&&(this.handle=
this.element.down("."+b.handle,0));this.handle||(this.handle=$(b.handle));this.handle||(this.handle=this.element);!b.scroll||b.scroll.scrollTo||b.scroll.outerHTML||(b.scroll=$(b.scroll),this._isScrollChild=Element.childOf(this.element,b.scroll));Element.makePositioned(this.element);this.options=b;this.dragging=!1;this.eventMouseDown=this.initDrag.bindAsEventListener(this);Event.observe(this.handle,"mousedown",this.eventMouseDown);Draggables.register(this)},destroy:function(){Event.stopObserving(this.handle,
"mousedown",this.eventMouseDown);Draggables.unregister(this)},currentDelta:function(){return[parseInt(Element.getStyle(this.element,"left")||"0"),parseInt(Element.getStyle(this.element,"top")||"0")]},initDrag:function(a){if((Object.isUndefined(Draggable._dragging[this.element])||!Draggable._dragging[this.element])&&Event.isLeftClick(a)&&(!(tag_name=Event.element(a).tagName.toUpperCase())||"INPUT"!=tag_name&&"SELECT"!=tag_name&&"OPTION"!=tag_name&&"BUTTON"!=tag_name&&"TEXTAREA"!=tag_name)){var b=[Event.pointerX(a),
Event.pointerY(a)],c=Position.cumulativeOffset(this.element);this.offset=[0,1].map(function(a){return b[a]-c[a]});Draggables.activate(this);Event.stop(a)}},startDrag:function(a){this.dragging=!0;this.delta||(this.delta=this.currentDelta());this.options.zindex&&(this.originalZ=parseInt(Element.getStyle(this.element,"z-index")||0),this.element.style.zIndex=this.options.zindex);this.options.ghosting&&(this._clone=this.element.cloneNode(!0),(this._originallyAbsolute="absolute"==this.element.getStyle("position"))||
Position.absolutize(this.element),this.element.parentNode.insertBefore(this._clone,this.element));if(this.options.scroll)if(this.options.scroll==window){var b=this._getWindowScroll(this.options.scroll);this.originalScrollLeft=b.left;this.originalScrollTop=b.top}else this.originalScrollLeft=this.options.scroll.scrollLeft,this.originalScrollTop=this.options.scroll.scrollTop;Draggables.notify("onStart",this,a);this.options.starteffect&&this.options.starteffect(this.element)},updateDrag:function(a,b){this.dragging||
this.startDrag(a);this.options.quiet||(Position.prepare(),Droppables.show(b,this.element));Draggables.notify("onDrag",this,a);this.draw(b);this.options.change&&this.options.change(this);if(this.options.scroll){this.stopScrolling();if(this.options.scroll==window)with(this._getWindowScroll(this.options.scroll))var c=[left,top,left+width,top+height];else c=Position.page(this.options.scroll),c[0]+=this.options.scroll.scrollLeft+Position.deltaX,c[1]+=this.options.scroll.scrollTop+Position.deltaY,c.push(c[0]+
this.options.scroll.offsetWidth),c.push(c[1]+this.options.scroll.offsetHeight);var d=[0,0];b[0]<c[0]+this.options.scrollSensitivity&&(d[0]=b[0]-(c[0]+this.options.scrollSensitivity));b[1]<c[1]+this.options.scrollSensitivity&&(d[1]=b[1]-(c[1]+this.options.scrollSensitivity));b[0]>c[2]-this.options.scrollSensitivity&&(d[0]=b[0]-(c[2]-this.options.scrollSensitivity));b[1]>c[3]-this.options.scrollSensitivity&&(d[1]=b[1]-(c[3]-this.options.scrollSensitivity));this.startScrolling(d)}Prototype.Browser.WebKit&&
window.scrollBy(0,0);Event.stop(a)},finishDrag:function(a,b){this.dragging=!1;if(this.options.quiet){Position.prepare();var c=[Event.pointerX(a),Event.pointerY(a)];Droppables.show(c,this.element)}this.options.ghosting&&(this._originallyAbsolute||Position.relativize(this.element),delete this._originallyAbsolute,Element.remove(this._clone),this._clone=null);c=!1;b&&((c=Droppables.fire(a,this.element))||(c=!1));if(c&&this.options.onDropped)this.options.onDropped(this.element);Draggables.notify("onEnd",
this,a);(a=this.options.revert)&&Object.isFunction(a)&&(a=a(this.element));b=this.currentDelta();a&&this.options.reverteffect?(0==c||"failure"!=a)&&this.options.reverteffect(this.element,b[1]-this.delta[1],b[0]-this.delta[0]):this.delta=b;this.options.zindex&&(this.element.style.zIndex=this.originalZ);this.options.endeffect&&this.options.endeffect(this.element);Draggables.deactivate(this);Droppables.reset()},keyPress:function(a){a.keyCode==Event.KEY_ESC&&(this.finishDrag(a,!1),Event.stop(a))},endDrag:function(a){this.dragging&&
(this.stopScrolling(),this.finishDrag(a,!0),Event.stop(a))},draw:function(a){var b=Position.cumulativeOffset(this.element);if(this.options.ghosting){var c=Position.realOffset(this.element);b[0]+=c[0]-Position.deltaX;b[1]+=c[1]-Position.deltaY}c=this.currentDelta();b[0]-=c[0];b[1]-=c[1];this.options.scroll&&this.options.scroll!=window&&this._isScrollChild&&(b[0]-=this.options.scroll.scrollLeft-this.originalScrollLeft,b[1]-=this.options.scroll.scrollTop-this.originalScrollTop);c=[0,1].map(function(c){return a[c]-
b[c]-this.offset[c]}.bind(this));this.options.snap&&(c=Object.isFunction(this.options.snap)?this.options.snap(c[0],c[1],this):Object.isArray(this.options.snap)?c.map(function(a,b){return(a/this.options.snap[b]).round()*this.options.snap[b]}.bind(this)):c.map(function(a){return(a/this.options.snap).round()*this.options.snap}.bind(this)));var d=this.element.style;this.options.constraint&&"horizontal"!=this.options.constraint||(d.left=c[0]+"px");this.options.constraint&&"vertical"!=this.options.constraint||
(d.top=c[1]+"px");"hidden"==d.visibility&&(d.visibility="")},stopScrolling:function(){this.scrollInterval&&(clearInterval(this.scrollInterval),this.scrollInterval=null,Draggables._lastScrollPointer=null)},startScrolling:function(a){if(a[0]||a[1])this.scrollSpeed=[a[0]*this.options.scrollSpeed,a[1]*this.options.scrollSpeed],this.lastScrolled=new Date,this.scrollInterval=setInterval(this.scroll.bind(this),10)},scroll:function(){var a=new Date,b=a-this.lastScrolled;this.lastScrolled=a;if(this.options.scroll==
window)with(this._getWindowScroll(this.options.scroll)){if(this.scrollSpeed[0]||this.scrollSpeed[1])a=b/1E3,this.options.scroll.scrollTo(left+a*this.scrollSpeed[0],top+a*this.scrollSpeed[1])}else this.options.scroll.scrollLeft+=this.scrollSpeed[0]*b/1E3,this.options.scroll.scrollTop+=this.scrollSpeed[1]*b/1E3;Position.prepare();Droppables.show(Draggables._lastPointer,this.element);Draggables.notify("onDrag",this);this._isScrollChild&&(Draggables._lastScrollPointer=Draggables._lastScrollPointer||$A(Draggables._lastPointer),
Draggables._lastScrollPointer[0]+=this.scrollSpeed[0]*b/1E3,Draggables._lastScrollPointer[1]+=this.scrollSpeed[1]*b/1E3,0>Draggables._lastScrollPointer[0]&&(Draggables._lastScrollPointer[0]=0),0>Draggables._lastScrollPointer[1]&&(Draggables._lastScrollPointer[1]=0),this.draw(Draggables._lastScrollPointer));this.options.change&&this.options.change(this)},_getWindowScroll:function(a){with(a.document){if(a.document.documentElement&&documentElement.scrollTop){var b=documentElement.scrollTop;var c=documentElement.scrollLeft}else a.document.body&&
(b=body.scrollTop,c=body.scrollLeft);if(a.innerWidth){var d=a.innerWidth;a=a.innerHeight}else a.document.documentElement&&documentElement.clientWidth?(d=documentElement.clientWidth,a=documentElement.clientHeight):(d=body.offsetWidth,a=body.offsetHeight)}return{top:b,left:c,width:d,height:a}}});Draggable._dragging={};
var SortableObserver=Class.create({initialize:function(a,b){this.element=$(a);this.observer=b;this.lastValue=Sortable.serialize(this.element)},onStart:function(){this.lastValue=Sortable.serialize(this.element)},onEnd:function(){Sortable.unmark();this.lastValue!=Sortable.serialize(this.element)&&this.observer(this.element)}}),Sortable={SERIALIZE_RULE:/^[^_\-](?:[A-Za-z0-9\-_]*)[_](.*)$/,sortables:{},_findRootElement:function(a){for(;"BODY"!=a.tagName.toUpperCase();){if(a.id&&Sortable.sortables[a.id])return a;
a=a.parentNode}},options:function(a){if(a=Sortable._findRootElement($(a)))return Sortable.sortables[a.id]},destroy:function(a){a=$(a);if(a=Sortable.sortables[a.id])Draggables.removeObserver(a.element),a.droppables.each(function(a){Droppables.remove(a)}),a.draggables.invoke("destroy"),delete Sortable.sortables[a.element.id]},create:function(a,b){a=$(a);var c=Object.extend({element:a,tag:"li",dropOnEmpty:!1,tree:!1,treeTag:"ul",overlap:"vertical",constraint:"vertical",containment:a,handle:!1,only:!1,
delay:0,hoverclass:null,ghosting:!1,quiet:!1,scroll:!1,scrollSensitivity:20,scrollSpeed:15,format:this.SERIALIZE_RULE,elements:!1,handles:!1,onChange:Prototype.emptyFunction,onUpdate:Prototype.emptyFunction},b||{});this.destroy(a);var d={revert:!0,quiet:c.quiet,scroll:c.scroll,scrollSpeed:c.scrollSpeed,scrollSensitivity:c.scrollSensitivity,delay:c.delay,ghosting:c.ghosting,constraint:c.constraint,handle:c.handle};c.starteffect&&(d.starteffect=c.starteffect);c.reverteffect?d.reverteffect=c.reverteffect:
c.ghosting&&(d.reverteffect=function(a){a.style.top=0;a.style.left=0});c.endeffect&&(d.endeffect=c.endeffect);c.zindex&&(d.zindex=c.zindex);var e={overlap:c.overlap,containment:c.containment,tree:c.tree,hoverclass:c.hoverclass,onHover:Sortable.onHover},f={onHover:Sortable.onEmptyHover,overlap:c.overlap,containment:c.containment,hoverclass:c.hoverclass};Element.cleanWhitespace(a);c.draggables=[];c.droppables=[];if(c.dropOnEmpty||c.tree)Droppables.add(a,f),c.droppables.push(a);(c.elements||this.findElements(a,
c)||[]).each(function(b,f){f=c.handles?$(c.handles[f]):c.handle?$(b).select("."+c.handle)[0]:b;c.draggables.push(new Draggable(b,Object.extend(d,{handle:f})));Droppables.add(b,e);c.tree&&(b.treeNode=a);c.droppables.push(b)});c.tree&&(Sortable.findTreeElements(a,c)||[]).each(function(b){Droppables.add(b,f);b.treeNode=a;c.droppables.push(b)});this.sortables[a.id]=c;Draggables.addObserver(new SortableObserver(a,c.onUpdate))},findElements:function(a,b){return Element.findChildren(a,b.only,b.tree?!0:!1,
b.tag)},findTreeElements:function(a,b){return Element.findChildren(a,b.only,b.tree?!0:!1,b.treeTag)},onHover:function(a,b,c){if(!(Element.isParent(b,a)||.33<c&&.66>c&&Sortable.options(b).tree))if(.5<c){if(Sortable.mark(b,"before"),b.previousSibling!=a){c=a.parentNode;a.style.visibility="hidden";b.parentNode.insertBefore(a,b);if(b.parentNode!=c)Sortable.options(c).onChange(a);Sortable.options(b.parentNode).onChange(a)}}else{Sortable.mark(b,"after");var d=b.nextSibling||null;if(d!=a){c=a.parentNode;
a.style.visibility="hidden";b.parentNode.insertBefore(a,d);if(b.parentNode!=c)Sortable.options(c).onChange(a);Sortable.options(b.parentNode).onChange(a)}}},onEmptyHover:function(a,b,c){var d=a.parentNode,e=Sortable.options(b);if(!Element.isParent(b,a)){var f=Sortable.findElements(b,{tag:e.tag,only:e.only}),h=null;if(f){var l=Element.offsetSize(b,e.overlap)*(1-c);for(c=0;c<f.length;c+=1)if(0<=l-Element.offsetSize(f[c],e.overlap))l-=Element.offsetSize(f[c],e.overlap);else{h=0<=l-Element.offsetSize(f[c],
e.overlap)/2?c+1<f.length?f[c+1]:null:f[c];break}}b.insertBefore(a,h);Sortable.options(d).onChange(a);e.onChange(a)}},unmark:function(){Sortable._marker&&Sortable._marker.hide()},mark:function(a,b){var c=Sortable.options(a.parentNode);if(!c||c.ghosting){Sortable._marker||(Sortable._marker=($("dropmarker")||Element.extend(document.createElement("DIV"))).hide().addClassName("dropmarker").setStyle({position:"absolute"}),document.getElementsByTagName("body").item(0).appendChild(Sortable._marker));var d=
Position.cumulativeOffset(a);Sortable._marker.setStyle({left:d[0]+"px",top:d[1]+"px"});"after"==b&&("horizontal"==c.overlap?Sortable._marker.setStyle({left:d[0]+a.clientWidth+"px"}):Sortable._marker.setStyle({top:d[1]+a.clientHeight+"px"}));Sortable._marker.show()}},_tree:function(a,b,c){for(var d=Sortable.findElements(a,b)||[],e=0;e<d.length;++e){var f=d[e].id.match(b.format);f&&(f={id:encodeURIComponent(f?f[1]:null),element:a,parent:c,children:[],position:c.children.length,container:$(d[e]).down(b.treeTag)},
f.container&&this._tree(f.container,b,f),c.children.push(f))}return c},tree:function(a,b){a=$(a);var c=this.options(a);b=Object.extend({tag:c.tag,treeTag:c.treeTag,only:c.only,name:a.id,format:c.format},b||{});return Sortable._tree(a,b,{id:null,parent:null,children:[],container:a,position:0})},_constructIndex:function(a){var b="";do a.id&&(b="["+a.position+"]"+b);while(null!=(a=a.parent));return b},sequence:function(a,b){a=$(a);var c=Object.extend(this.options(a),b||{});return $(this.findElements(a,
c)||[]).map(function(a){return a.id.match(c.format)?a.id.match(c.format)[1]:""})},setSequence:function(a,b,c){a=$(a);var d=Object.extend(this.options(a),c||{}),e={};this.findElements(a,d).each(function(a){a.id.match(d.format)&&(e[a.id.match(d.format)[1]]=[a,a.parentNode]);a.parentNode.removeChild(a)});b.each(function(a){var b=e[a];b&&(b[1].appendChild(b[0]),delete e[a])})},serialize:function(a,b){a=$(a);var c=Object.extend(Sortable.options(a),b||{}),d=encodeURIComponent(b&&b.name?b.name:a.id);return c.tree?
Sortable.tree(a,b).children.map(function(a){return[d+Sortable._constructIndex(a)+"[id]="+encodeURIComponent(a.id)].concat(a.children.map(arguments.callee))}).flatten().join("&"):Sortable.sequence(a,b).map(function(a){return d+"[]="+encodeURIComponent(a)}).join("&")}};Element.isParent=function(a,b){return a.parentNode&&a!=b?a.parentNode==b?!0:Element.isParent(a.parentNode,b):!1};
Element.findChildren=function(a,b,c,d){if(!a.hasChildNodes())return null;d=d.toUpperCase();b&&(b=[b].flatten());var e=[];$A(a.childNodes).each(function(a){!a.tagName||a.tagName.toUpperCase()!=d||b&&!Element.classNames(a).detect(function(a){return b.include(a)})||e.push(a);c&&(a=Element.findChildren(a,b,c,d))&&e.push(a)});return 0<e.length?e.flatten():[]};Element.offsetSize=function(a,b){return a["offset"+("vertical"==b||"height"==b?"Height":"Width")]};
Array.prototype.some=function(a,b){a=a||Prototype.K;for(var c=0,d=this.length;c<d;c++)if(c in this&&a.call(b,this[c],c,this))return!0;return!1};Prototype.Browser.IE6=-1<navigator.userAgent.indexOf("MSIE 6.");Prototype.Browser.IE7=-1<navigator.userAgent.indexOf("MSIE 7.");Prototype.Browser.IE8=-1<navigator.userAgent.indexOf("MSIE 8.");Prototype.Browser.IE9=-1<navigator.userAgent.indexOf("MSIE 9.");Prototype.Browser.IE10=-1<navigator.userAgent.indexOf("MSIE 10.");
Prototype.Browser.IE8&&(Element._attributeTranslations.write.names["class"]=void 0);if(Prototype.Browser.WebKit){var indexOfVersion=navigator.userAgent.indexOf("Version");if(-1<indexOfVersion){var versionString=navigator.userAgent.substr(indexOfVersion,13),version=versionString.split("/")[1];version&&(version=parseInt(version.gsub(".","")),503<=version&&(Prototype.Browser.Safari503=!0))}}Ajax.CachedAutocompleter=Class.create();
Object.extend(Object.extend(Ajax.CachedAutocompleter.prototype,Autocompleter.Base.prototype),{initialize:function(a,b,c,d){this.baseInitialize(a,b,d);this.options.asynchronous=!0;this.options.onComplete=this.onComplete.bind(this);this.options.defaultParams=this.options.parameters||null;this.url=c;this.cache={};this.options.forceActivation&&(Event.stopObserving(this.element,"keydown"),Event.observe(this.element,"keydown",this.onKeyPressWithForcedActivation.bindAsEventListener(this)),Event.observe(this.element,
"focus",this.onFocus.bindAsEventListener(this)))},getUpdatedChoices:function(){var a=this.getToken().toLowerCase();this.cache[a]?this.updateChoices(this.cache[a]):(this.startIndicator(),entry=encodeURIComponent(this.options.paramName)+"="+encodeURIComponent(a),this.options.parameters=this.options.callback?this.options.callback(this.element,entry):entry,this.options.defaultParams&&(this.options.parameters+="&"+this.options.defaultParams),new Ajax.Request(this.url,this.options))},onComplete:function(a){this.updateChoices(this.cache[a.request.parameters.search]=
a.responseText)},markPrevious:function(){0<this.index?this.index--:(this.index=this.entryCount-1,this.update.scrollTop=this.update.scrollHeight);selection=this.getEntry(this.index);selection_top=selection.offsetTop;selection_top<this.update.scrollTop&&(this.update.scrollTop-=selection.offsetHeight)},markNext:function(){this.index<this.entryCount-1?this.index++:(this.index=0,this.update.scrollTop=0);selection=this.getEntry(this.index);selection_bottom=selection.offsetTop+selection.offsetHeight;selection_bottom>
this.update.scrollTop+this.update.offsetHeight&&(this.update.scrollTop+=selection.offsetHeight)},selectEntry:function(){if(0<=this.index)this.active=!1,this.updateElement(this.getCurrentEntry());else{try{this.element.form.onsubmit()}catch(a){}this.element.form.submit()}},onFocus:function(a){this.hasFocus=!0;this.oldElementValue==this.element.value&&this.element.value.length>=this.options.minChars&&(0<this.entryCount?this.render():this.show())},onKeyPressWithForcedActivation:function(a){var b=a.keyCode==
Event.KEY_TAB||a.keyCode==Event.KEY_RETURN||0<Prototype.Browser.WebKit&&0===a.keyCode,c=this.element.value.length>=this.options.minChars;if(!this.active&&b&&c)Event.stop(a),this.observer&&clearTimeout(this.observer),this.changed=!1,this.hasFocus=!0,this.getUpdatedChoices();else this.onKeyPress(a)},updateChoices:function(a){if(!this.changed&&this.hasFocus){this.update.innerHTML=a;Element.cleanWhitespace(this.update);Element.cleanWhitespace(this.update.down());if(this.update.firstChild&&this.update.down().childNodes)for(this.entryCount=
this.update.down().childNodes.length,a=0;a<this.entryCount;a++){var b=this.getEntry(a);b.autocompleteIndex=a;this.addObservers(b)}else this.entryCount=0;this.stopIndicator();this.update.scrollTop=0;this.index=this.options.noAutoDefault?-1:0;1==this.entryCount&&this.options.autoSelect?(this.selectEntry(),this.hide()):this.render()}}});
Element.collectTextNodesIgnoreClass=function(a,b){return $A($(a).childNodes).collect(function(a){return 3==a.nodeType?a.nodeValue:a.hasChildNodes()&&!Element.hasClassName(a,b)?Element.collectTextNodesIgnoreClass(a,b):""}).flatten().join("").strip()};Element.Methods.collectTextNodesIgnoreClass=Element.collectTextNodesIgnoreClass;Element.addMethods(Element.Methods);HandlerQueue=function(){var a=[];return{add:function(b){a.push(b)},handle:function(){for(var b=a.length-1;0<=b;b--)a[b].apply(this,arguments)}}};
Number.prototype.withDelimiters=function(a,b){a||(a=",");b||(b=1E3);for(var c=[],d=Math.floor(this);d;)c.unshift(d%b),d=Math.floor(d/b);return[c.shift()].concat(c.map(function(a){return a.toPaddedString((b-1+"").length)})).join(a)};Ajax.Poller=function(a,b,c,d){this.initialize(a,b,c,d)};
Ajax.Poller.prototype={initialize:function(a,b,c,d){this._stopped=!0;c=c||5E3;d=d||3E4;var e=this,f=Object.extend(Object.extend({method:"get"},b),{on202:function(){e._stopped||(setTimeout(e._poll,c),b.on202&&b.on202.apply(b,arguments))},onFailure:function(){e._stopped||(setTimeout(e._poll,d),b.onFailure&&b.onFailure.apply(b,arguments))}});this._poll=function(){new Ajax.Request(a,f)}},start:function(a){this._stopped=!1;setTimeout(this._poll.bind(this),a||0)},stop:function(){this._stopped=!0}};
Element.Methods.selectedOptionValue=function(a){a=$(a);if("SELECT"===a.tagName)return(a=a.select("option")[a.selectedIndex])&&a.readAttribute("value")};Element.Methods.selectOptionValue=function(a,b){a=$(a);"SELECT"==a.tagName&&(a.selectedIndex=a.select("option").pluck("value").indexOf(b))};Element.addMethods(Element.Methods);(function(a,b){var c=0;b.prototype.toGlobalReference=function(){var b=this;var e="_tgrFn"+c++;a[e]=function(){try{delete a[e]}catch(f){a[e]=void 0}b()};return e}})(this,Function);
jQuery.ajaxPrefilter(function(a,b,c){a.crossDomain||(a=jQuery('meta[name="csrf-token"]').attr("content"))&&c.setRequestHeader("X-CSRF-Token",a)});jQuery.csrfPost=function(a){a=jQuery.extend({},a,{type:"POST",beforeSend:function(a){a.setRequestHeader("X-CSRF-Token",jQuery('meta[name="csrf-token"]').attr("content"))}});return jQuery.ajax(a)};
jQuery.csrfDelete=function(a){a=jQuery.extend({},a,{type:"DELETE",beforeSend:function(a){a.setRequestHeader("X-CSRF-Token",jQuery('meta[name="csrf-token"]').attr("content"))}});return jQuery.ajax(a)};var RFC822SingleEmailRegex=/^(?:[^\x00-\x2a\x2c\x2e\x2f\x3a-\x40\x5b-\x5e\x60\x7b-\xff]+|\x22(?:[^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22)(?:\x2e(?:[^\x00-\x2a\x2c\x2e\x2f\x3a-\x40\x5b-\x5e\x60\x7b-\xff]+|\x22(?:[^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22))*\x40(?:[^\x00-\x2a\x2c\x2e\x2f\x3a-\x40\x5b-\x5e\x60\x7b-\xff]+|\x5b(?:[^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d)(?:\x2e(?:[^\x00-\x2a\x2c\x2e\x2f\x3a-\x40\x5b-\x5e\x60\x7b-\xff]+|\x5b(?:[^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d))+$/;
document.onunload||(document.onunload=function(){});function makeDynamicFrameTarget(a){var b="dynamic_frame_"+ +new Date,c=(new Element("iframe",{name:b})).setStyle({display:"none"});$(document.body).insert(c);a.target=b}function makeDynamicFrameTargetForUrl(a){a=(new Element("form",{action:a,method:"post"})).setStyle({display:"none"});$(document.body).insert(a);makeDynamicFrameTarget(a);return a}var lastFacebookStatus="unknown";
function disableFacebookButtons(){$$("a.sprite_facebook").each(function(a){a.hide();if(!a.next(".spinner")){var b=a.hasClassName("no_inverse");a.insert({after:'<span class="spinner facebook_spinner'+(b?"":" spinner_inverse")+'">loading&hellip;</span>'})}})}function reenableFacebookButtons(){$$("a.sprite_facebook").each(function(a){a.show();(a=a.next(".spinner"))&&a.remove()})}
function showFacebookErrorLightbox(){if(active_user.isAuthenticated())var a='<h1 class="phl">There\'s been an error!</h1><p class="regtext mhl mvm">The connection with Facebook\'s servers has timed out. Please refresh your page and try the linking process again.</p>';else{a='<h1 class="phl">There\'s been an error!</h1><p class="regtext mhl mvm">We were unable to create a Kongregate account with Facebook.</p><p class="regtext mhl mvm">Click on "Create My Account" below to create a Kongregate account using your email address instead.</p><a id="error_signup_link" href="#" class="submission_button mhl mvm">Create My Account</a>';
var b=function(){$("error_signup_link").observe("click",function(a){a.preventDefault();try{lightbox.prototype.shutdown()}catch(d){}lightbox.prototype.initializeKongregateLightboxFromAjax("/accounts/new/behind_login?no_facebook_connect=true&game_id="+active_user.gameId(),{afterStaticContentLoad:function(){lightbox.prototype.toggleRegistration();$("lightbox_email_register").show();$("lightbox_facebook_register").hide();$("lightbox").removeClassName("lightbox_login")}})})}}try{lightbox.prototype.shutdown()}catch(c){}lightbox.prototype.initializeKongregateLightboxFromContent(a,
{done_class_name:"lightbox_login",afterStaticContentLoad:b});reenableFacebookButtons()}function showMatchingUserForm(a,b,c){a="/facebook_connection/login_lightbox?username="+a+"&matched_on="+b;active_user.gameId()&&(a+="&game_id="+active_user.gameId());try{lightbox.prototype.shutdown()}catch(d){}lightbox.prototype.initializeKongregateLightboxFromAjax(a,{done_class_name:"lightbox_login"})}function write_to_document(a){document.write(a)}
function toggleTabs(a,b){Element.show(a);Element.show(a+"_title");Element.show(b+"_link");Element.hide(b);Element.hide(b+"_title");Element.hide(a+"_link");$(a+"_tab").className="tab current";$(b+"_tab").className="tab"}function showChatSelector(a,b){new lightbox("/rooms/change?game_rooms="+a+"&game_id="+b)}function limitText(a,b){a.value.length>b&&(a.value=a.value.substring(0,b))}function limitCheckedBoxes(a,b,c){for(var d=0,e=0;e<a.length;e++)d+=a[e].checked?1:0;d>b&&(a[c].checked=!1)}
function observePopup(a,b,c,d){var e=window.open(a,"",c||""),f=setInterval(function(){try{e.closed&&(clearInterval(f),d())}catch(h){clearInterval(f)}},100);return e}Prototype.Platform={Windows:!!navigator.platform.match(/Win/),Macintosh:!!navigator.platform.match(/Mac/),Linux:!!navigator.platform.match(/Linux/)};Hash.prototype.getWithDefault=function(a,b){var c=this.get(a);return void 0===c?this.set(a,b()):c};
Hash.prototype.getOrSet=function(a,b){var c=this.get(a);return void 0===c?this.set(a,b):c};Element.addMethods("textarea",{positionCaretAtEnd:function(a){a=$(a);if(a.createTextRange){var b=a.createTextRange();b.move("character",a.value.length);b.select()}else null!==a.selectionStart?(b=a.value.length,a.focus(),a.setSelectionRange(b,b)):(a.focus(),a.value+="");return a}});
Element.addMethods({ieHappyHide:function(a){a=$(a);a.style.display="none";a.style.visibility="hidden";return a},ieHappyShow:function(a){a=$(a);a.style.display="";a.style.visibility="visible";return a},setText:function(a,b){a=$(a);a[Prototype.Browser.Gecko?"textContent":"innerText"]=b;return a}});
function autoTruncate(a,b){b||(b=1);$$("."+a).each(function(a){var c=a.down("a"),e=c.getStyle("font-size");a=a.getWidth();var f=11;e&&(f=parseInt(e.sub("px",""),10));c.update(c.innerHTML.truncate(Math.round(a/(f-4.5)*b)))})}function insertTrackingPixelWithTimestamp(a){stamp=+new Date;document.write('<img src="'+a+stamp+'?"/>')}
Prototype.Browser.Gecko&&function(){Event.observe(document,"keypress",function(a){if(a.keyCode==Event.KEY_TAB&&-1<"select,input,button,textarea".indexOf(a.target.nodeName.toLowerCase())){var b=$(a.target),c=b.up("form").getElements().findAll(function(a){return"hidden"!=a.type&&!a.disabled});b=c.indexOf(b);var d=null;if(d=a.shiftKey?0<=b-1?c[b-1]:null:b+1<c.length?c[b+1]:null)a.stop(),d.focus()}})}();"undefined"==typeof Control&&(Control={});
var $proc=function(a){return"function"==typeof a?a:function(){return a}},$value=function(a){return"function"==typeof a?a():a};
Object.Event={extend:function(a){a._objectEventSetup=function(a){this._observers=this._observers||{};this._observers[a]=this._observers[a]||[]};a.observe=function(a,c){if("string"==typeof a&&"undefined"!=typeof c)this._objectEventSetup(a),this._observers[a].include(c)||this._observers[a].push(c);else for(var b in a)this.observe(b,a[b])};a.stopObserving=function(a,c){this._objectEventSetup(a);a&&c?this._observers[a]=this._observers[a].without(c):a?this._observers[a]=[]:this._observers={}};a.observeOnce=
function(a,c){var b=function(){c.apply(this,arguments);this.stopObserving(a,b)}.bind(this);this._objectEventSetup(a);this._observers[a].push(b)};a.notify=function(a){this._objectEventSetup(a);var b=[],d=$A(arguments).slice(1);try{for(var e=0;e<this._observers[a].length;++e)b.push(this._observers[a][e].apply(this._observers[a][e],d)||null)}catch(f){if(f==$break)return!1;throw f;}return b};a.prototype&&(a.prototype._objectEventSetup=a._objectEventSetup,a.prototype.observe=a.observe,a.prototype.stopObserving=
a.stopObserving,a.prototype.observeOnce=a.observeOnce,a.prototype.notify=function(b){if(a.notify){var c=$A(arguments).slice(1);c.unshift(this);c.unshift(b);a.notify.apply(a,c)}this._objectEventSetup(b);c=$A(arguments).slice(1);var d=[];try{this.options&&this.options[b]&&"function"==typeof this.options[b]&&d.push(this.options[b].apply(this,c)||null);for(var e=0;e<this._observers[b].length;++e)d.push(this._observers[b][e].apply(this._observers[b][e],c)||null)}catch(f){if(f==$break)return!1;throw f;
}return d})}};Element.addMethods({observeOnce:function(a,b,c){var d=function(){c.apply(this,arguments);Element.stopObserving(a,b,d)};Element.observe(a,b,d)}});(function(){document.observe("mousewheel",function(a){var b;a.wheelDelta?b=a.wheelDelta/120:a.detail&&(b=-a.detail/3);if(b&&a.element().fire("mouse:wheel",{delta:b}).stopped)return a.stop(),!1})})();
var IframeShim=Class.create({initialize:function(){this.element=new Element("iframe",{style:"position:absolute;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);display:none",src:"javascript:void(0);",frameborder:0});$(document.body).insert(this.element)},hide:function(){this.element.hide();return this},show:function(){this.element.show();return this},positionUnder:function(a){a=$(a);var b=a.cumulativeOffset(),c=a.getDimensions();this.element.setStyle({left:b[0]+"px",top:b[1]+"px",width:c.width+
"px",height:c.height+"px",zIndex:a.getStyle("zIndex")-1}).show();return this},setBounds:function(a){for(prop in a)a[prop]+="px";this.element.setStyle(a);return this},destroy:function(){this.element&&this.element.remove();return this}});
"undefined"!=typeof Draggable&&(Draggable.prototype.draw=function(a){var b=Position.cumulativeOffset(this.element);if(this.options.ghosting){var c=Position.realOffset(this.element);b[0]+=c[0]-Position.deltaX;b[1]+=c[1]-Position.deltaY}c=this.currentDelta();b[0]-=c[0];b[1]-=c[1];this.options.scroll&&this.options.scroll!=window&&this._isScrollChild&&(b[0]-=this.options.scroll.scrollLeft-this.originalScrollLeft,b[1]-=this.options.scroll.scrollTop-this.originalScrollTop);c=[0,1].map(function(c){return a[c]-
b[c]-this.offset[c]}.bind(this));this.options.snap&&(c="function"==typeof this.options.snap?this.options.snap(c[0],c[1],this):this.options.snap instanceof Array?c.map(function(a,b){return Math.round(a/this.options.snap[b])*this.options.snap[b]}.bind(this)):c.map(function(a){return Math.round(a/this.options.snap)*this.options.snap}.bind(this)));if(this.options.onDraw)this.options.onDraw.bind(this)(c);else{var d=this.element.style;if(this.options.constrainToViewport){var e=document.viewport.getDimensions(),
f=this.element.getDimensions(),h=parseInt(this.element.getStyle("margin-top")),l=parseInt(this.element.getStyle("margin-left"));e=[[0-l,0-h],[e.width-f.width-l,e.height-f.height-h]];this.options.constraint&&"horizontal"!=this.options.constraint||(this.element.style.left=c[0]>=e[0][0]&&c[0]<=e[1][0]?c[0]+"px":(c[0]<e[0][0]?e[0][0]:e[1][0])+"px");this.options.constraint&&"vertical"!=this.options.constraint||(this.element.style.top=c[1]>=e[0][1]&&c[1]<=e[1][1]?c[1]+"px":(c[1]<=e[0][1]?e[0][1]:e[1][1])+
"px")}else this.options.constraint&&"horizontal"!=this.options.constraint||(d.left=c[0]+"px"),this.options.constraint&&"vertical"!=this.options.constraint||(d.top=c[1]+"px");"hidden"==d.visibility&&(d.visibility="")}});if("undefined"==typeof Prototype)throw"Control.Window requires Prototype to be loaded.";if("undefined"==typeof IframeShim)throw"Control.Window requires IframeShim to be loaded.";if("undefined"==typeof Object.Event)throw"Control.Window requires Object.Event to be loaded.";
Control.Window=Class.create({initialize:function(a,b){Control.Window.windows.push(this);this.remoteContentLoaded=this.ajaxRequest=this.sourceContainer=this.href=this.isOpen=this.container=!1;this.numberInSequence=Control.Window.windows.length+1;this.indicator=!1;this.effects={fade:!1,appear:!1};this.indicatorEffects={fade:!1,appear:!1};this.options=Object.extend({beforeOpen:Prototype.emptyFunction,afterOpen:Prototype.emptyFunction,beforeClose:Prototype.emptyFunction,afterClose:Prototype.emptyFunction,
height:null,width:null,className:!1,position:"center",offsetLeft:0,offsetTop:0,iframe:!1,hover:!1,indicator:!1,closeOnClick:!1,iframeshim:!0,fade:!1,fadeDuration:.75,draggable:!1,onDrag:Prototype.emptyFunction,resizable:!1,minHeight:!1,minWidth:!1,maxHeight:!1,maxWidth:!1,onResize:Prototype.emptyFunction,constrainToViewport:!1,method:"post",parameters:{},onComplete:Prototype.emptyFunction,onSuccess:Prototype.emptyFunction,onFailure:Prototype.emptyFunction,onException:Prototype.emptyFunction,onRemoteContentLoaded:Prototype.emptyFunction,
insertRemoteContentAt:!1},b||{});this.indicator=this.options.indicator?$(this.options.indicator):!1;a&&("string"==typeof a&&a.match(Control.Window.uriRegex)?this.href=a:(this.container=$(a),this.createDefaultContainer(a),this.container&&(this.container.readAttribute("href")&&""!=this.container.readAttribute("href")||this.options.hover&&!0!==this.options.hover)&&(this.options.hover&&!0!==this.options.hover?this.sourceContainer=$(this.options.hover):(this.sourceContainer=this.container,this.href=this.container.readAttribute("href"),
(b=this.href.match(/^#(.+)$/))&&b[1]?(this.container=$(b[1]),this.href=!1):this.container=!1),this.sourceContainerOpenHandler=function(a){this.open(a);a.stop();return!1}.bindAsEventListener(this),this.sourceContainerCloseHandler=function(a){this.close(a)}.bindAsEventListener(this),this.sourceContainerMouseMoveHandler=function(a){this.position(a)}.bindAsEventListener(this),this.options.hover?(this.sourceContainer.observe("mouseenter",this.sourceContainerOpenHandler),this.sourceContainer.observe("mouseleave",
this.sourceContainerCloseHandler),"mouse"==this.options.position&&this.sourceContainer.observe("mousemove",this.sourceContainerMouseMoveHandler)):this.sourceContainer.observe("click",this.sourceContainerOpenHandler))));this.createDefaultContainer(a);!1===this.options.insertRemoteContentAt&&(this.options.insertRemoteContentAt=this.container);a={margin:0,position:"absolute",zIndex:Control.Window.initialZIndexForWindow()};this.options.width&&(a.width=$value(this.options.width)+"px");this.options.height&&
(a.height=$value(this.options.height)+"px");this.container.setStyle(a);this.options.className&&this.container.addClassName(this.options.className);this.positionHandler=this.position.bindAsEventListener(this);this.outOfBoundsPositionHandler=this.ensureInBounds.bindAsEventListener(this);this.bringToFrontHandler=this.bringToFront.bindAsEventListener(this);this.container.observe("mousedown",this.bringToFrontHandler);this.container.hide();this.closeHandler=this.close.bindAsEventListener(this);this.options.iframeshim&&
(this.iFrameShim=new IframeShim,this.iFrameShim.hide());this.applyResizable();this.applyDraggable();Event.observe(window,"resize",this.outOfBoundsPositionHandler);this.notify("afterInitialize")},open:function(a){if(this.isOpen)return this.bringToFront(),!1;if(!1===this.notify("beforeOpen"))return!1;this.options.closeOnClick&&(!0===this.options.closeOnClick?this.closeOnClickContainer=$(document.body):"container"==this.options.closeOnClick?this.closeOnClickContainer=this.container:"overlay"==this.options.closeOnClick?
(Control.Overlay.load(),this.closeOnClickContainer=Control.Overlay.container):this.closeOnClickContainer=$(this.options.closeOnClick),this.closeOnClickContainer.observe("click",this.closeHandler));if(this.href&&!this.options.iframe&&!this.remoteContentLoaded)return this.remoteContentLoaded=!0,this.href.match(/\.(jpe?g|gif|png|tiff?)$/i)?(a=new Element("img"),a.observe("load",function(a){this.getRemoteContentInsertionTarget().insert(a);this.position();!1!==this.notify("onRemoteContentLoaded")&&(this.options.indicator&&
this.hideIndicator(),this.finishOpen())}.bind(this,a)),a.writeAttribute("src",this.href)):this.ajaxRequest||(this.options.indicator&&this.showIndicator(),this.ajaxRequest=new Ajax.Request(this.href,{method:this.options.method,parameters:this.options.parameters,onComplete:function(a){this.notify("onComplete",a);this.ajaxRequest=!1}.bind(this),onSuccess:function(a){this.getRemoteContentInsertionTarget().insert(a.responseText);this.notify("onSuccess",a);!1!==this.notify("onRemoteContentLoaded")&&(this.options.indicator&&
this.hideIndicator(),this.finishOpen())}.bind(this),onFailure:function(a){this.notify("onFailure",a);this.options.indicator&&this.hideIndicator()}.bind(this),onException:function(a,b){this.notify("onException",a,b);this.options.indicator&&this.hideIndicator()}.bind(this)})),!0;if(this.options.iframe&&!this.remoteContentLoaded){this.remoteContentLoaded=!0;this.options.indicator&&this.showIndicator();this.getRemoteContentInsertionTarget().insert(Control.Window.iframeTemplate.evaluate({href:this.href}));
var b=this.container.down("iframe");b.onload=function(){this.notify("onRemoteContentLoaded");this.options.indicator&&this.hideIndicator();b.onload=null}.bind(this)}this.finishOpen(a);return!0},close:function(a){if(!this.isOpen||!1===this.notify("beforeClose",a))return!1;this.options.closeOnClick&&this.closeOnClickContainer.stopObserving("click",this.closeHandler);this.options.fade?this.effects.fade=new Effect.Fade(this.container,{queue:{position:"front",scope:"Control.Window"+this.numberInSequence},
from:1,to:0,duration:this.options.fadeDuration/2,afterFinish:function(){this.iFrameShim&&this.iFrameShim.hide();this.isOpen=!1;this.notify("afterClose")}.bind(this)}):(this.container.hide(),this.iFrameShim&&this.iFrameShim.hide());this.ajaxRequest&&this.ajaxRequest.transport.abort();this.options.draggable||this.options.resizable||"center"!=this.options.position||Event.stopObserving(window,"resize",this.positionHandler);this.options.draggable||"center"!=this.options.position||Event.stopObserving(window,
"scroll",this.positionHandler);this.options.indicator&&this.hideIndicator();this.options.fade||(this.isOpen=!1,this.notify("afterClose"));return!0},position:function(a){if("mouse"==this.options.position){var b=[Event.pointerX(a),Event.pointerY(a)];this.container.setStyle({top:b[1]+$value(this.options.offsetTop)+"px",left:b[0]+$value(this.options.offsetLeft)+"px"})}else{a=this.container.getDimensions();var c=document.viewport.getDimensions();Position.prepare();var d=Position.deltaX+Math.floor((c.width-
a.width)/2);b=Position.deltaY+(c.height>a.height?Math.floor((c.height-a.height)/2):0);"center"==this.options.position?this.container.setStyle({top:a.height<=c.height?(null!=b&&0<b?b:0)+"px":0,left:a.width<=c.width?(null!=d&&0<d?d:0)+"px":0}):"relative"==this.options.position?(b=this.sourceContainer.cumulativeOffset(),d=b[1]+$value(this.options.offsetTop),b=b[0]+$value(this.options.offsetLeft),this.container.setStyle({top:a.height<=c.height?(this.options.constrainToViewport?Math.max(0,Math.min(c.height-
a.height,d)):d)+"px":0,left:a.width<=c.width?(this.options.constrainToViewport?Math.max(0,Math.min(c.width-a.width,b)):b)+"px":0})):this.options.position.length&&(d=$value(this.options.position[1])+$value(this.options.offsetTop),b=$value(this.options.position[0])+$value(this.options.offsetLeft),this.container.setStyle({top:a.height<=c.height?(this.options.constrainToViewport?Math.max(0,Math.min(c.height-a.height,d)):d)+"px":0,left:a.width<=c.width?(this.options.constrainToViewport?Math.max(0,Math.min(c.width-
a.width,b)):b)+"px":0}));this.iFrameShim&&this.updateIFrameShimZIndex()}},ensureInBounds:function(){if(this.isOpen){var a=document.viewport.getDimensions(),b=this.container.cumulativeOffset(),c=this.container.getDimensions();b.left+c.width>a.width&&this.container.setStyle({left:Math.max(0,a.width-c.width)+"px"});b.top+c.height>a.height&&this.container.setStyle({top:Math.max(0,a.height-c.height)+"px"})}},bringToFront:function(){Control.Window.bringToFront(this);this.notify("bringToFront")},destroy:function(){this.container.stopObserving("mousedown",
this.bringToFrontHandler);this.draggable&&(Resizables.removeObserver(this.container),this.draggable.handle.stopObserving("mousedown",this.bringToFrontHandler),this.draggable.destroy());this.resizable&&(Resizables.removeObserver(this.container),this.resizable.handle.stopObserving("mousedown",this.bringToFrontHandler),this.resizable.destroy());this.container&&!this.sourceContainer&&this.container.remove();this.sourceContainer&&(this.options.hover?(this.sourceContainer.stopObserving("mouseenter",this.sourceContainerOpenHandler),
this.sourceContainer.stopObserving("mouseleave",this.sourceContainerCloseHandler),"mouse"==this.options.position&&this.sourceContainer.stopObserving("mousemove",this.sourceContainerMouseMoveHandler)):this.sourceContainer.stopObserving("click",this.sourceContainerOpenHandler));this.iFrameShim&&this.iFrameShim.destroy();Event.stopObserving(window,"resize",this.outOfBoundsPositionHandler);Control.Window.windows=Control.Window.windows.without(this);this.notify("afterDestroy")},applyResizable:function(){if(this.options.resizable){if("undefined"==
typeof Resizable)throw"Control.Window requires resizable.js to be loaded.";var a=null;!0===this.options.resizable?(a=new Element("div",{className:"resizable_handle"}),this.container.insert(a)):a=$(this.options.resziable);this.resizable=new Resizable(this.container,{handle:a,minHeight:this.options.minHeight,minWidth:this.options.minWidth,maxHeight:this.options.constrainToViewport?function(a){return document.viewport.getDimensions().height-parseInt(a.style.top||0)-(a.getHeight()-parseInt(a.style.height||
0))}:this.options.maxHeight,maxWidth:this.options.constrainToViewport?function(a){return document.viewport.getDimensions().width-parseInt(a.style.left||0)-(a.getWidth()-parseInt(a.style.width||0))}:this.options.maxWidth});this.resizable.handle.observe("mousedown",this.bringToFrontHandler);Resizables.addObserver(new Control.Window.LayoutUpdateObserver(this,function(){this.iFrameShim&&this.updateIFrameShimZIndex();this.notify("onResize")}.bind(this)))}},applyDraggable:function(){if(this.options.draggable){if("undefined"==
typeof Draggables)throw"Control.Window requires dragdrop.js to be loaded.";var a=null;!0===this.options.draggable?(a=new Element("div",{className:"draggable_handle"}),this.container.insert(a)):a=$(this.options.draggable);this.draggable=new Draggable(this.container,{handle:a,constrainToViewport:this.options.constrainToViewport,zindex:this.container.getStyle("z-index"),starteffect:function(){Prototype.Browser.IE&&(this.old_onselectstart=document.onselectstart,document.onselectstart=function(){return!1})}.bind(this),
endeffect:function(){document.onselectstart=this.old_onselectstart}.bind(this)});this.draggable.handle.observe("mousedown",this.bringToFrontHandler);Draggables.addObserver(new Control.Window.LayoutUpdateObserver(this,function(){this.iFrameShim&&this.updateIFrameShimZIndex();this.notify("onDrag")}.bind(this)))}},createDefaultContainer:function(a){this.container||(this.container=new Element("div",{id:"control_window_"+this.numberInSequence}),$(document.body).insert(this.container),"string"!=typeof a||
null!=$(a)||a.match(/^#(.+)$/)||a.match(Control.Window.uriRegex)||this.container.update(a))},finishOpen:function(a){this.bringToFront();if(this.options.fade){if("undefined"==typeof Effect)throw"Control.Window requires effects.js to be loaded.";this.effects.fade&&this.effects.fade.cancel();this.effects.appear=new Effect.Appear(this.container,{queue:{position:"end",scope:"Control.Window."+this.numberInSequence},from:0,to:1,duration:this.options.fadeDuration/2,afterFinish:function(){this.iFrameShim&&
this.updateIFrameShimZIndex();this.isOpen=!0;this.notify("afterOpen")}.bind(this)})}else this.container.show();this.position(a);this.options.draggable||this.options.resizable||"center"!=this.options.position||Event.observe(window,"resize",this.positionHandler,!1);this.options.draggable||"center"!=this.options.position||Event.observe(window,"scroll",this.positionHandler,!1);this.options.fade||(this.isOpen=!0,this.notify("afterOpen"));return!0},showIndicator:function(){this.showIndicatorTimeout=window.setTimeout(function(){this.options.fade?
this.indicatorEffects.appear=new Effect.Appear(this.indicator,{queue:{position:"front",scope:"Control.Window.indicator."+this.numberInSequence},from:0,to:1,duration:this.options.fadeDuration/2}):this.indicator.show()}.bind(this),Control.Window.indicatorTimeout)},hideIndicator:function(){this.showIndicatorTimeout&&window.clearTimeout(this.showIndicatorTimeout);this.indicator.hide()},getRemoteContentInsertionTarget:function(){return"string"==typeof this.options.insertRemoteContentAt?this.container.down(this.options.insertRemoteContentAt):
$(this.options.insertRemoteContentAt)},updateIFrameShimZIndex:function(){this.iFrameShim&&this.iFrameShim.positionUnder(this.container)}});
Object.extend(Control.Window,{windows:[],baseZIndex:1000001,indicatorTimeout:250,iframeTemplate:new Template('<iframe src="#{href}" width="100%" height="100%" frameborder="0"></iframe>'),uriRegex:/^(\/|#|https?:\/\/|[\w]+\/)/,bringToFront:function(a){Control.Window.windows=Control.Window.windows.without(a);Control.Window.windows.push(a);Control.Window.windows.each(function(a,c){c=Control.Window.baseZIndex+c;a.container.setStyle({zIndex:c});a.isOpen&&a.iFrameShim&&a.updateIFrameShimZIndex();a.options.draggable&&
(a.draggable.options.zindex=c)})},open:function(a,b){a=new Control.Window(a,b);a.open();return a},initialZIndexForWindow:function(a){return Control.Window.baseZIndex+(Control.Window.windows.length-1)}});Object.Event.extend(Control.Window);
Control.Window.LayoutUpdateObserver=Class.create({initialize:function(a,b){this.w=a;this.element=$(a.container);this.observer=b},onStart:Prototype.emptyFunction,onEnd:function(a,b){b.element==this.element&&this.iFrameShim&&this.w.updateIFrameShimZIndex()},onResize:function(a,b){b.element==this.element&&this.observer(this.element)},onDrag:function(a,b){b.element==this.element&&this.observer(this.element)}});
Control.Overlay={id:"control_overlay",loaded:!1,container:!1,lastOpacity:0,styles:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:9998},ieStyles:{position:"absolute",top:0,left:0,zIndex:9998},effects:{fade:!1,appear:!1},load:function(){if(Control.Overlay.loaded)return!1;Control.Overlay.loaded=!0;Control.Overlay.container=new Element("div",{id:Control.Overlay.id});$(document.body).insert(Control.Overlay.container);Prototype.Browser.IE?(Control.Overlay.container.setStyle(Control.Overlay.ieStyles),
Event.observe(window,"scroll",Control.Overlay.positionOverlay),Event.observe(window,"resize",Control.Overlay.positionOverlay),Control.Overlay.observe("beforeShow",Control.Overlay.positionOverlay)):Control.Overlay.container.setStyle(Control.Overlay.styles);Control.Overlay.iFrameShim=new IframeShim;Control.Overlay.iFrameShim.hide();Event.observe(window,"resize",Control.Overlay.positionIFrameShim);Control.Overlay.container.hide();return!0},unload:function(){if(!Control.Overlay.loaded)return!1;Event.stopObserving(window,
"resize",Control.Overlay.positionOverlay);Control.Overlay.stopObserving("beforeShow",Control.Overlay.positionOverlay);Event.stopObserving(window,"resize",Control.Overlay.positionIFrameShim);Control.Overlay.iFrameShim.destroy();Control.Overlay.container.remove();Control.Overlay.loaded=!1;return!0},show:function(a,b){if(!1===Control.Overlay.notify("beforeShow"))return!1;Control.Overlay.lastOpacity=a;Control.Overlay.positionIFrameShim();Control.Overlay.iFrameShim.show();if(b){if("undefined"==typeof Effect)throw"Control.Window requires effects.js to be loaded.";
Control.Overlay.effects.fade&&Control.Overlay.effects.fade.cancel();Control.Overlay.effects.appear=new Effect.Appear(Control.Overlay.container,{queue:{position:"end",scope:"Control.Overlay"},afterFinish:function(){Control.Overlay.notify("afterShow")},from:0,to:Control.Overlay.lastOpacity,duration:(!0===b?.75:b)/2})}else Control.Overlay.container.setStyle({opacity:a||1}),Control.Overlay.container.show(),Control.Overlay.notify("afterShow");return!0},hide:function(a){if(!1===Control.Overlay.notify("beforeHide"))return!1;
Control.Overlay.effects.appear&&Control.Overlay.effects.appear.cancel();Control.Overlay.iFrameShim.hide();a?Control.Overlay.effects.fade=new Effect.Fade(Control.Overlay.container,{queue:{position:"front",scope:"Control.Overlay"},afterFinish:function(){Control.Overlay.notify("afterHide")},from:Control.Overlay.lastOpacity,to:0,duration:(!0===a?.75:a)/2}):(Control.Overlay.container.hide(),Control.Overlay.notify("afterHide"));return!0},positionIFrameShim:function(){Control.Overlay.container.visible()&&
Control.Overlay.iFrameShim.positionUnder(Control.Overlay.container)},positionOverlay:function(){Control.Overlay.container.setStyle({width:document.body.clientWidth+"px",height:document.body.clientHeight+"px"})}};Object.Event.extend(Control.Overlay);Control.ToolTip=Class.create(Control.Window,{initialize:function($super,b,c,d){$super(c,Object.extend(Object.extend(Object.clone(Control.ToolTip.defaultOptions),d||{}),{position:"mouse",hover:b}))}});Object.extend(Control.ToolTip,{defaultOptions:{offsetLeft:10}});
Control.Modal=Class.create(Control.Window,{initialize:function($super,b,c){Control.Modal.InstanceMethods.beforeInitialize.bind(this)();$super(b,Object.extend(Object.clone(Control.Modal.defaultOptions),c||{}))}});
Object.extend(Control.Modal,{defaultOptions:{overlayOpacity:.5,closeOnClick:"overlay"},current:!1,open:function(a,b){a=new Control.Modal(a,b);a.open();return a},close:function(){Control.Modal.current&&Control.Modal.current.close()},InstanceMethods:{beforeInitialize:function(){Control.Overlay.load();this.overlayFinishedOpening=!1;this.observe("beforeOpen",Control.Modal.Observers.beforeOpen.bind(this));this.observe("afterOpen",Control.Modal.Observers.afterOpen.bind(this));this.observe("afterClose",
Control.Modal.Observers.afterClose.bind(this))}},Observers:{beforeOpen:function(){if(this.overlayFinishedOpening)Control.Window.windows.without(this).invoke("close");else throw Control.Overlay.observeOnce("afterShow",function(){this.overlayFinishedOpening=!0;this.open()}.bind(this)),Control.Overlay.show(this.options.overlayOpacity,this.options.fade?this.options.fadeDuration:!1),$break;},afterOpen:function(){Control.Modal.current=this},afterClose:function(){Control.Overlay.hide(this.options.fade?this.options.fadeDuration:
!1);this.overlayFinishedOpening=Control.Modal.current=!1}}});
Control.LightBox=Class.create(Control.Window,{initialize:function($super,b,c){this.allImagesLoaded=!1;c.modal?(c=Object.extend(Object.clone(Control.LightBox.defaultOptions),c||{}),c=Object.extend(Object.clone(Control.Modal.defaultOptions),c),c=Control.Modal.InstanceMethods.beforeInitialize.bind(this)(c),$super(b,c)):$super(b,Object.extend(Object.clone(Control.LightBox.defaultOptions),c||{}));(this.hasRemoteContent=this.href&&!this.options.iframe)?this.observe("onRemoteContentLoaded",Control.LightBox.Observers.onRemoteContentLoaded.bind(this)):
this.applyImageObservers();this.observe("beforeOpen",Control.LightBox.Observers.beforeOpen.bind(this))},applyImageObservers:function(){var a=this.getImages();this.numberImagesToLoad=a.length;this.numberofImagesLoaded=0;a.each(function(a){a.observe("load",function(a){++this.numberofImagesLoaded;this.numberImagesToLoad==this.numberofImagesLoaded&&(this.allImagesLoaded=!0,this.onAllImagesLoaded())}.bind(this,a));a.hide()}.bind(this))},onAllImagesLoaded:function(){this.getImages().each(function(a){this.showImage(a)}.bind(this));
this.hasRemoteContent?(this.options.indicator&&this.hideIndicator(),this.finishOpen()):this.open()},getImages:function(){return this.container.select(Control.LightBox.imageSelector)},showImage:function(a){a.show()}});Object.extend(Control.LightBox,{imageSelector:"img",defaultOptions:{},Observers:{beforeOpen:function(){if(!this.hasRemoteContent&&!this.allImagesLoaded)throw $break;},onRemoteContentLoaded:function(){this.applyImageObservers();if(!this.allImagesLoaded)throw $break;}}});
function CommentsController(a){this.initialize(a)}
CommentsController.prototype={initialize:function(a){this._comments_path=a.comments_path;this._hidden_threshold=a.hidden_threshold;this._active_user=a.active_user;this._comment_ids=a.comment_ids;this._top_comments=a.top_comments;this._show_blog_comment=a.show_blog_comment;this._developers=a.developers;this._call_to_action=a.call_to_action},showNewCommentForm:function(a){void 0===a&&(a="");if(this._call_to_action||this._active_user.isAuthenticated()){try{holodeck.recordAnalyticsEvent("Comments","Add")}catch(b){}$("commentutility")&&
Element.hide("commentutility"+a);Element.show("comment_new"+a)}},showReplyToCommentForm:function(a){$("reply_to_comment").show();$("comment_"+a).insert($("reply_to_comment"));$("response_content").value="";$("reply_to_comment_submit").stopObserving("click");$("reply_to_comment_submit").on("click",function(){comments_controller.replyToComment(a)})},showEditReplyToCommentForm:function(a){$("reply_to_comment").show();$("comment_response_"+a).insert($("reply_to_comment"));$("response_content").value=
$("comment_response_content_"+a).innerHTML;$("reply_to_comment_submit").stopObserving("click");$("reply_to_comment_submit").on("click",function(){comments_controller.replyToComment(a)})},resetNewCommentForm:function(a){void 0===a&&(a="");$("comment_content"+a).value="";$("comment_errors"+a).hide();Element.hide("comment_new"+a);this.reenableNewCommentForm(a);$("commentutility")&&$("commentutility"+a).show()},reenableNewCommentForm:function(a){void 0===a&&(a="");Element.hide("comment_indicator"+a);
$("post_comment_submit"+a).disabled=!1},submitNewCommentForm:function(a,b){void 0===b&&(b="");var c=this;Element.show("comment_indicator"+b);$("post_comment_submit"+b).disabled=!0;c._call_to_action&&$("post_comment_submit"+b).hide();$(a).request({method:"post",onSuccess:function(a){var d;c._call_to_action?((d=$("added_comments_list"))&&d.insert({top:a.responseText}),window.location.hash="_",window.location.hash="recent_comments",a=d.down(),new Effect.Highlight(a,{})):(d=$$(".comment_list").first()||
$("comments_list"))&&d.insert(a.responseText);$("no_comments").hide();c.resetNewCommentForm(b);c._call_to_action&&($("comment_indicator"+b).hide(),$("post_comment_submit"+b).show(),c.showNewCommentForm(b));urchinTracker("/new_comment")},on400:function(a){c.showNewCommentErrors(a.responseText,b)},on500:function(a){c.showNewCommentErrors("A server error occured.",b)}})},showNewCommentErrors:function(a,b){void 0===b&&(b="");var c=$("comment_errors"+b);c.show();c.update(a);this._call_to_action&&($("comment_indicator"+
b).hide(),$("post_comment_submit"+b).show());this.reenableNewCommentForm(b)},userSilenced:function(){var a=$("comment_user_silenced");$("comment_add_a_comment").hide();a.update(this._active_user.silencedMessage());a.show()},checkUserSilenced:function(){this._active_user.isSilenced()&&this.userSilenced()},lightUpSingleComment:function(a,b){a=$("comment_"+a);a.removeClassName("rated_negative");a.removeClassName("rated_positive");a.addClassName(b?"rated_positive":"rated_negative")},currentRating:function(a){var b=
$("comment_current_rating_"+a).innerHTML;return isNaN(b)?NaN:parseInt($("comment_current_rating_"+a).innerHTML,10)},opinionForComment:function(a){a=$("comment_"+a);return a.hasClassName("rated_negative")?!1:a.hasClassName("rated_positive")?!0:null},rateComment:function(a,b){var c=this.opinionForComment(a);if(c!==b){var d=this.currentRating(a);!0===c?--d:!1===c&&(d+=1);!0===b?d+=1:!1===b&&--d;c=$("comment_"+a);$("comment_rating_area_"+a);var e=this;this.hideRatingLinks(a);isNaN(d)||$("comment_current_rating_"+
a).update(d);c.removeClassName("below_threshold");c.removeClassName("above_threshold");c.addClassName(d>this._hidden_threshold||isNaN(d)?"above_threshold":"below_threshold");this.lightUpSingleComment(a,b);new Ajax.Request(this._comments_path+"/"+a+"/ratings.js",{parameters:{opinion:b},onComplete:function(b){e.showRatingLinks(a)}})}},flagComment:function(a){var b=this;this.hideRatingLinks(a);new Ajax.Request(this._comments_path+"/"+a+"/flaggings.js",{onComplete:function(c){b.showRatingLinks(a);$("comment_flagged_"+
a).show();$("comment_flagged_"+a).update("<span>This comment has been flagged for review.</span>")}})},hideRatingLinks:function(a){var b=$("comment_rating_links_"+a),c=$("flag_indicator_"+a);a=$("comment_status_"+a);c.show();a.hide();b.hide()},showRatingLinks:function(a){var b=$("comment_rating_links_"+a),c=$("flag_indicator_"+a);a=$("comment_status_"+a);c.hide();b.show();a.show()},showCommentContent:function(a){Element.hide("show_comment_content_"+a);Element.show("hide_comment_content_"+a);Element.show("comment_content_"+
a)},hideCommentContent:function(a){Element.show("show_comment_content_"+a);Element.hide("hide_comment_content_"+a);Element.hide("comment_content_"+a)},removeComment:function(a){var b=this._comments_path+"/"+a+".js",c=$("flag_indicator_"+a),d=$("remove_comment_"+a),e=$("comment_"+a);c.show();d.hide();new Ajax.Request(b,{method:"delete",onSuccess:function(a){e.remove()}})},spamComment:function(a){var b=this._comments_path+"/"+a+"/spam.js",c=$("flag_indicator_"+a),d=$("spam_comment_"+a),e=$("comment_"+
a);c.show();d.hide();new Ajax.Request(b,{method:"post",onSuccess:function(a){e.remove()}})},replyToComment:function(a){var b=this._comments_path+"/"+a+"/reply",c=$("flag_indicator_"+a),d=$("reply_to_comment_"+a),e=$("comment_"+a);c.show();d&&d.hide();new Ajax.Request(b,{method:"post",parameters:{response_content:$("response_content").value,show_blog_comment:this._show_blog_comment},onSuccess:function(a){var b=$("reply_to_comment");b.hide();$$(".user_message").last().insert({after:b});e.replace(a.responseText);
comments_controller.showAdminControls();c.hide()}})},cancelReply:function(){$("reply_to_comment").hide();$("response_content").value=""},checkUserRatingStatus:function(){var a=this;(function(){new Ajax.Request(this._active_user.accountUrl()+"/comment_ratings.json",{method:"get",parameters:{comment_ids:Object.toJSON(this._comment_ids),game_id:this._active_user.gameId(),top_comments:this._top_comments?!0:""},onSuccess:function(b){a.lightUpComments(b.responseJSON)}})}).bind(this).runWhenDomLoaded(!0)},
clearReply:function(a){var b=this._comments_path+"/"+a+"/clear_reply",c=$("flag_indicator_"+a),d=$("clear_reply_to_comment_"+a),e=$("reply_to_comment_"+a),f=$("comment_"+a);c.show();d.hide();new Ajax.Request(b,{method:"post",onSuccess:function(a){c.hide();e.show();f.down(".comment_reply").remove()}})},lightUpComments:function(a){var b=this;$H(a).each(function(a){b.lightUpSingleComment(a.key,a.value)})},activeUserisDeveloperOrCollaborator:function(){return-1!=this._developers.indexOf(active_user.username())},
showAdminControls:function(){active_user.isAdmin()?($$(".admin_controls").each(Element.show),$$(".developer_controls").each(Element.show)):this.activeUserisDeveloperOrCollaborator()&&$$(".developer_controls").each(Element.show)}};Function.prototype.runWhenDomLoaded=function(a){if(a&&window.gameLoadObserver)this.runWhenGameLoaded();else if(document.loaded)this.defer();else{var b=this;document.observe("dom:loaded",function(){b()})}};
Function.prototype.runWhenReady=function(){if(document.loaded&&document.javascript_loaded)this.defer();else{var a=this;document.observe("dom:loaded",function(){document.loaded&&document.javascript_loaded&&a.defer()});document.observe("dom:javascript_loaded",function(){document.loaded&&document.javascript_loaded&&a.defer()})}};
Cookie={set:function(a,b,c,d){a=encodeURIComponent(a)+"="+encodeURIComponent(b||"");void 0!==c&&(b=new Date,b.setTime(b.getTime()+864E5*parseFloat(c)),a+="; expires="+b.toGMTString());return document.cookie=d?a+("; path="+d):a+"; path=/"},setWithDate:function(a,b,c){a=encodeURIComponent(a)+"="+encodeURIComponent(b||"");void 0!==c&&(a+="; expires="+c.toGMTString());return document.cookie=a+"; path=/"},get:function(a){return(a=document.cookie.match(new RegExp("(^|;)\\s*"+encodeURIComponent(a)+"=([^;\\s]*)")))?
decodeURIComponent(a[2].gsub(/\+/," ")):null},erase:function(a,b){var c=Cookie.get(a)||!0;Cookie.set(a,"",-1,b);return c},accept:function(){if("boolean"==typeof navigator.cookieEnabled)return navigator.cookieEnabled;Cookie.set("_test","1");return"1"===Cookie.erase("_test")}};
var swfobject=function(){function a(){if(!W){try{var a=u.getElementsByTagName("body")[0].appendChild(u.createElement("span"));a.parentNode.removeChild(a)}catch(K){return}W=!0;a=N.length;for(var b=0;b<a;b++)N[b]()}}function b(a){W?a():N[N.length]=a}function c(a){if("undefined"!=typeof v.addEventListener)v.addEventListener("load",a,!1);else if("undefined"!=typeof u.addEventListener)u.addEventListener("load",a,!1);else if("undefined"!=typeof v.attachEvent)F(v,"onload",a);else if("function"==typeof v.onload){var b=
v.onload;v.onload=function(){b();a()}}else v.onload=a}function d(){var a=u.getElementsByTagName("body")[0],b=u.createElement("object");b.setAttribute("type","application/x-shockwave-flash");var c=a.appendChild(b);if(c){var d=0;(function(){if("undefined"!=typeof c.GetVariable){var f=c.GetVariable("$version");f&&(f=f.split(" ")[1].split(","),B.pv=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)])}else if(10>d){d++;setTimeout(arguments.callee,10);return}a.removeChild(b);c=null;e()})()}else e()}
function e(){var a=H.length;if(0<a)for(var b=0;b<a;b++){var c=H[b].id,d=H[b].callbackFn,e={success:!1,id:c};if(0<B.pv[0]){var n=x(c);if(n)if(!t(H[b].swfVersion)||B.wk&&312>B.wk)if(H[b].expressInstall&&h()){e={};e.data=H[b].expressInstall;e.width=n.getAttribute("width")||"0";e.height=n.getAttribute("height")||"0";n.getAttribute("class")&&(e.styleclass=n.getAttribute("class"));n.getAttribute("align")&&(e.align=n.getAttribute("align"));var v={};n=n.getElementsByTagName("param");for(var u=n.length,w=
0;w<u;w++)"movie"!=n[w].getAttribute("name").toLowerCase()&&(v[n[w].getAttribute("name")]=n[w].getAttribute("value"));l(e,v,c,d)}else m(n),d&&d(e);else q(c,!0),d&&(e.success=!0,e.ref=f(c),d(e))}else q(c,!0),d&&((c=f(c))&&"undefined"!=typeof c.SetVariable&&(e.success=!0,e.ref=c),d(e))}}function f(a){var b=null;(a=x(a))&&"OBJECT"==a.nodeName&&("undefined"!=typeof a.SetVariable?b=a:(a=a.getElementsByTagName("object")[0])&&(b=a));return b}function h(){return!ia&&t("6.0.65")&&(B.win||B.mac)&&!(B.wk&&312>
B.wk)}function l(a,b,c,d){ia=!0;Q=d||null;R={success:!1,id:c};var e=x(c);if(e){"OBJECT"==e.nodeName?(ea=n(e),V=null):(ea=e,V=c);a.id="SWFObjectExprInst";if("undefined"==typeof a.width||!/%$/.test(a.width)&&310>parseInt(a.width,10))a.width="310";if("undefined"==typeof a.height||!/%$/.test(a.height)&&137>parseInt(a.height,10))a.height="137";u.title=u.title.slice(0,47)+" - Flash Player Installation";d=B.ie&&B.win?"ActiveX":"PlugIn";d="MMredirectURL="+encodeURI(v.location).toString().replace(/&/g,"%26")+
"&MMplayerType="+d+"&MMdoctitle="+u.title;b.flashvars="undefined"!=typeof b.flashvars?b.flashvars+("&"+d):d;B.ie&&B.win&&4!=e.readyState&&(d=u.createElement("div"),c+="SWFObjectNew",d.setAttribute("id",c),e.parentNode.insertBefore(d,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}());z(a,b,c)}}function m(a){if(B.ie&&B.win&&4!=a.readyState){var b=u.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(n(a),b);
a.style.display="none";(function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(n(a),a)}function n(a){var b=u.createElement("div");if(B.win&&B.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName("object")[0])if(a=a.childNodes)for(var c=a.length,d=0;d<c;d++)1==a[d].nodeType&&"PARAM"==a[d].nodeName||8==a[d].nodeType||b.appendChild(a[d].cloneNode(!0));return b}function z(a,b,c){var d=x(c);if(B.wk&&312>B.wk)return l;if(d)if("undefined"==
typeof a.id&&(a.id=c),B.ie&&B.win){var e="";for(f in a)a[f]!=Object.prototype[f]&&("data"==f.toLowerCase()?b.movie=a[f]:"styleclass"==f.toLowerCase()?e+=' class="'+a[f]+'"':"classid"!=f.toLowerCase()&&(e+=" "+f+'="'+a[f]+'"'));var f="";for(var h in b)b[h]!=Object.prototype[h]&&(f+='<param name="'+h+'" value="'+b[h]+'" />');d.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+e+">"+f+"</object>";L[L.length]=a.id;var l=x(a.id)}else{h=u.createElement("object");h.setAttribute("type",
"application/x-shockwave-flash");for(var m in a)a[m]!=Object.prototype[m]&&("styleclass"==m.toLowerCase()?h.setAttribute("class",a[m]):"classid"!=m.toLowerCase()&&h.setAttribute(m,a[m]));for(e in b)b[e]!=Object.prototype[e]&&"movie"!=e.toLowerCase()&&(a=h,f=e,m=b[e],c=u.createElement("param"),c.setAttribute("name",f),c.setAttribute("value",m),a.appendChild(c));d.parentNode.replaceChild(h,d);l=h}return l}function C(a){var b=x(a);b&&"OBJECT"==b.nodeName&&(B.ie&&B.win?(b.style.display="none",function(){if(4==
b.readyState){var c=x(a);if(c){for(var d in c)"function"==typeof c[d]&&(c[d]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function x(a){var b=null;try{b=u.getElementById(a)}catch(K){}return b}function F(a,b,c){a.attachEvent(b,c);U[U.length]=[a,b,c]}function t(a){var b=B.pv;a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:
!1}function D(a,b,c,d){if(!B.ie||!B.mac){var e=u.getElementsByTagName("head")[0];e&&(c=c&&"string"==typeof c?c:"screen",d&&(ha=T=null),T&&ha==c||(d=u.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("media",c),T=e.appendChild(d),B.ie&&B.win&&"undefined"!=typeof u.styleSheets&&0<u.styleSheets.length&&(T=u.styleSheets[u.styleSheets.length-1]),ha=c),B.ie&&B.win?T&&"object"==typeof T.addRule&&T.addRule(a,b):T&&"undefined"!=typeof u.createTextNode&&T.appendChild(u.createTextNode(a+
" {"+b+"}")))}}function q(a,b){ta&&(b=b?"visible":"hidden",W&&x(a)?x(a).style.visibility=b:D("#"+a,"visibility:"+b))}function w(a){return null!=/[\\"<>\.;]/.exec(a)&&"undefined"!=typeof encodeURIComponent?encodeURIComponent(a):a}var v=window,u=document,E=navigator,G=!1,N=[function(){G?d():e()}],H=[],L=[],U=[],ea,V,Q,R,W=!1,ia=!1,T,ha,ta=!0,B=function(){var a="undefined"!=typeof u.getElementById&&"undefined"!=typeof u.getElementsByTagName&&"undefined"!=typeof u.createElement,b=E.userAgent.toLowerCase(),
c=E.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b);c=c?/mac/.test(c):/mac/.test(b);b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1;var e=!+"\v1",f=[0,0,0],h=null;if("undefined"!=typeof E.plugins&&"object"==typeof E.plugins["Shockwave Flash"])!(h=E.plugins["Shockwave Flash"].description)||"undefined"!=typeof E.mimeTypes&&E.mimeTypes["application/x-shockwave-flash"]&&!E.mimeTypes["application/x-shockwave-flash"].enabledPlugin||(G=!0,e=!1,h=h.replace(/^.*\s+(\S+\s+\S+$)/,
"$1"),f[0]=parseInt(h.replace(/^(.*)\..*$/,"$1"),10),f[1]=parseInt(h.replace(/^.*\.(.*)\s.*$/,"$1"),10),f[2]=/[a-zA-Z]/.test(h)?parseInt(h.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if("undefined"!=typeof v.ActiveXObject)try{if(h=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version"))e=!0,h=h.split(" ")[1].split(","),f=[parseInt(h[0],10),parseInt(h[1],10),parseInt(h[2],10)]}catch(Aa){}return{w3:a,pv:f,wk:b,ie:e,win:d,mac:c}}();(function(){B.w3&&(("undefined"!=typeof u.readyState&&
"complete"==u.readyState||"undefined"==typeof u.readyState&&(u.getElementsByTagName("body")[0]||u.body))&&a(),W||("undefined"!=typeof u.addEventListener&&u.addEventListener("DOMContentLoaded",a,!1),B.ie&&B.win&&(u.attachEvent("onreadystatechange",function(){"complete"==u.readyState&&(u.detachEvent("onreadystatechange",arguments.callee),a())}),v==top&&function(){if(!W){try{u.documentElement.doScroll("left")}catch(P){setTimeout(arguments.callee,0);return}a()}}()),B.wk&&function(){W||(/loaded|complete/.test(u.readyState)?
a():setTimeout(arguments.callee,0))}(),c(a)))})();(function(){B.ie&&B.win&&window.attachEvent("onunload",function(){for(var a=U.length,b=0;b<a;b++)U[b][0].detachEvent(U[b][1],U[b][2]);a=L.length;for(b=0;b<a;b++)C(L[b]);for(var c in B)B[c]=null;B=null;for(var d in swfobject)swfobject[d]=null;swfobject=null})})();return{registerObject:function(a,b,c,d){if(B.w3&&a&&b){var e={};e.id=a;e.swfVersion=b;e.expressInstall=c;e.callbackFn=d;H[H.length]=e;q(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(B.w3)return f(a)},
embedSWF:function(a,c,d,e,f,m,n,v,u,w){var x={success:!1,id:c};B.w3&&!(B.wk&&312>B.wk)&&a&&c&&d&&e&&f?(q(c,!1),b(function(){d+="";e+="";var b={};if(u&&"object"===typeof u)for(var E in u)b[E]=u[E];b.data=a;b.width=d;b.height=e;E={};if(v&&"object"===typeof v)for(var D in v)E[D]=v[D];if(n&&"object"===typeof n)for(var A in n)E.flashvars="undefined"!=typeof E.flashvars?E.flashvars+("&"+A+"="+n[A]):A+"="+n[A];if(t(f))D=z(b,E,c),b.id==c&&q(c,!0),x.success=!0,x.ref=D;else{if(m&&h()){b.data=m;l(b,E,c,w);return}q(c,
!0)}w&&w(x)})):w&&w(x)},switchOffAutoHideShow:function(){ta=!1},ua:B,getFlashPlayerVersion:function(){return{major:B.pv[0],minor:B.pv[1],release:B.pv[2]}},hasFlashPlayerVersion:t,createSWF:function(a,b,c){if(B.w3)return z(a,b,c)},showExpressInstall:function(a,b,c,d){B.w3&&h()&&l(a,b,c,d)},removeSWF:function(a){B.w3&&C(a)},createCSS:function(a,b,c,d){B.w3&&D(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=u.location.search||u.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);
if(null==a)return w(b);b=b.split("&");for(var c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return w(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(ia){var a=x("SWFObjectExprInst");a&&ea&&(a.parentNode.replaceChild(ea,a),V&&(q(V,!0),B.ie&&B.win&&(ea.style.display="block")),Q&&Q(R));ia=!1}}}}();
(function(a){function b(){if(h.jStorage)try{f=z(String(h.jStorage))}catch(t){h.jStorage="{}"}else h.jStorage="{}";m=h.jStorage?String(h.jStorage).length:0}function c(){try{h.jStorage=n(f),l&&(l.setAttribute("jStorage",h.jStorage),l.save("jStorage")),m=h.jStorage?String(h.jStorage).length:0}catch(t){}}function d(a){if(!a||"string"!=typeof a&&"number"!=typeof a)throw new TypeError("Key name must be string or numeric");if("__jstorage_meta"==a)throw new TypeError("Reserved key name");return!0}function e(){var a,
b=Infinity,d=!1;clearTimeout(x);if(f.__jstorage_meta&&"object"==typeof f.__jstorage_meta.TTL){var h=+new Date;var l=f.__jstorage_meta.TTL;for(a in l)l.hasOwnProperty(a)&&(l[a]<=h?(delete l[a],delete f[a],d=!0):l[a]<b&&(b=l[a]));Infinity!=b&&(x=setTimeout(e,b-h));d&&c()}}if(!a||!(a.toJSON||Object.toJSON||window.JSON))throw Error("jQuery, MooTools or Prototype needs to be loaded before jStorage!");var f={},h={jStorage:"{}"},l=null,m=0,n=a.toJSON||Object.toJSON||window.JSON&&(JSON.encode||JSON.stringify),
z=a.evalJSON||window.JSON&&(JSON.decode||JSON.parse)||function(a){return String(a).evalJSON()},C=!1,x,F={isXML:function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?"HTML"!==a.nodeName:!1},encode:function(a){if(!this.isXML(a))return!1;try{return(new XMLSerializer).serializeToString(a)}catch(D){try{return a.xml}catch(q){}}return!1},decode:function(a){var b="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(a){var b=new ActiveXObject("Microsoft.XMLDOM");b.async=
"false";b.loadXML(a);return b};if(!b)return!1;a=b.call("DOMParser"in window&&new DOMParser||window,a,"text/xml");return this.isXML(a)?a:!1}};a.jStorage={version:"0.1.7.0",set:function(a,b,e){d(a);e=e||{};F.isXML(b)?b={_is_xml:!0,xml:F.encode(b)}:"function"==typeof b?b=null:b&&"object"==typeof b&&(b=z(n(b)));f[a]=b;isNaN(e.TTL)?c():this.setTTL(a,e.TTL);return b},get:function(a,b){d(a);return a in f?f[a]&&"object"==typeof f[a]&&f[a]._is_xml&&f[a]._is_xml?F.decode(f[a].xml):f[a]:"undefined"==typeof b?
null:b},deleteKey:function(a){d(a);return a in f?(delete f[a],f.__jstorage_meta&&"object"==typeof f.__jstorage_meta.TTL&&a in f.__jstorage_meta.TTL&&delete f.__jstorage_meta.TTL[a],c(),!0):!1},setTTL:function(a,b){var h=+new Date;d(a);b=Number(b)||0;return a in f?(f.__jstorage_meta||(f.__jstorage_meta={}),f.__jstorage_meta.TTL||(f.__jstorage_meta.TTL={}),0<b?f.__jstorage_meta.TTL[a]=h+b:delete f.__jstorage_meta.TTL[a],c(),e(),!0):!1},flush:function(){f={};c();return!0},storageObj:function(){function a(){}
a.prototype=f;return new a},index:function(){var a=[],b;for(b in f)f.hasOwnProperty(b)&&"__jstorage_meta"!=b&&a.push(b);return a},storageSize:function(){return m},currentBackend:function(){return C},storageAvailable:function(){return!!C},reInit:function(){if(l&&l.addBehavior){var a=document.createElement("link");l.parentNode.replaceChild(a,l);l=a;l.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(l);l.load("jStorage");a="{}";try{a=l.getAttribute("jStorage")}catch(D){}h.jStorage=
a;C="userDataBehavior"}b()}};(function(){var a=!1;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval"),a=!0,window.localStorage.removeItem("_tmptest")}catch(D){}if(a)try{window.localStorage&&(h=window.localStorage,C="localStorage")}catch(D){}else if("globalStorage"in window)try{window.globalStorage&&(h=window.globalStorage[window.location.hostname],C="globalStorage")}catch(D){}else if(l=document.createElement("link"),l.addBehavior){l.style.behavior="url(#default#userData)";
document.getElementsByTagName("head")[0].appendChild(l);l.load("jStorage");a="{}";try{a=l.getAttribute("jStorage")}catch(D){}h.jStorage=a;C="userDataBehavior"}else{l=null;return}b();e()})()})($||window.jQuery);ActiveUser=function(a){this.initialize(a)};ActiveUser.UPDATE_FREQUENCY=1200;ActiveUser.SILENCED_TEMPLATE=new Template('You have been silenced for #{until}. Click <a href="/pages/silenced">here</a> to read about silences.');ActiveUser.ADMIN_LOAD_TOOLS_PATH="/admin/load_toolbar";
ActiveUser.USER_DATA_LS_KEY="kong_user_data";ActiveUser.SEEN_SHARED_CONTENT_WELCOME_LS_KEY="kong_seen_shared_content";ActiveUser.ANIMATION_THROWDOWN_GAME_ID=258488;
ActiveUser.prototype={initialize:function(a){var b=this;this._dynamic_style_ele=this._holodeck=null;this._attributes=$H();this._game_attributes=$H();this._attribute_observer_handler=new HandlerQueue;this._on_authenticated_handler=new HandlerQueue;this._game_attribute_observer_handler=new HandlerQueue;this._captured_inline_selectors=[];this._domain=a.domain;this._single_cdn_domain=a.single_cdn_domain;this._trusted_domain=a.trusted_domain;this._load_toolbar=a.load_toolbar;this._game_page=a.game_page;
this._debug_level=a.debug_level;this._redirect_capture=a.redirect_capture;this._new_session_url=a.new_session_url;this.updateAttributes(a.kong_user_data);this.split_treatments=this.getAttributes().split_treatments;this._dont_load_user_progress_bar=a.dont_load_user_progress_bar;this._user_progress_bar=null;this._just_registered=this._showing_blue_bar_message=!1;this._klient_auth_token=a.klient_auth_token;this._eligible_for_chip_grant=a.chip_grant;this.addRunWhenAuthenticatedObserver(function(a){a.populateUserSpecificLinks();
a.loadAdminToolbar();a.fetchChipsGrant();a.initializeUserProgressBar.bind(b).runWhenReady();$j(".policy-bar").hide()});this.lightUpBadgeOfTheDayOverlay();this._splitTreatmentPermalinks=(this._splitTreatmentPermalinks=Cookie.get("splitTreatmentPermalinks"))?this._splitTreatmentPermalinks.evalJSON():{};this.showPolicyBar.bind(this).runWhenDomLoaded()},setHolodeck:function(a){this._holodeck=a},isShowingBlueBar:function(){return this._showing_blue_bar_message},showingBlueBar:function(){this._showing_blue_bar_message=
!0;this._user_progress_bar&&this._user_progress_bar.hideForBlueBar()},initializeUserProgressBar:function(){this.getsUserProgressBar()&&!this.isShowingBlueBar()&&(this._user_progress_bar=new UserProgressBar(this))},getsUserProgressBar:function(){return!this._dont_load_user_progress_bar&&(this.onOwnProfilePage()||this.onHomePage()||!this._attributes.get("progress_bar_opt_out"))&&this._attributes.get("gets_progress_bar")},showProgressBarCompletionMessage:function(){return this._attributes.get("show_progress_completion_message")},
onOwnProfilePage:function(){return this.isAuthenticated()&&"/accounts/"+this.username().toLowerCase()==window.location.pathname.toLowerCase()},onHomePage:function(){return"/"===window.location.pathname},isKlientProgressBar:function(){return this._attributes.get("is_klient_progress_bar")},progressBarPercentPerStep:function(){return this._attributes.get("progress_bar_percent_per_step")},availableProgressBarSteps:function(){return this._attributes.get("available_progress_bar_steps")},progressBarPercentComplete:function(){return this._attributes.get("progress_bar_percent_complete")},
pullUserData:function(){var a=this,b="/accounts/"+this.username()+"/info.json";new Ajax.Request(b,{method:"get",onSuccess:function(b){a.updateAttributes(b.responseJSON)}})},addAttributesObserver:function(a){this._attribute_observer_handler.add(a)},addOnAuthenticatedObserver:function(a){this._on_authenticated_handler.add(a)},addRunWhenAuthenticatedObserver:function(a){this.isAuthenticated()?function(){a(this)}.bind(this).runWhenDomLoaded(!0):this.addOnAuthenticatedObserver(a)},addGameAttributesObserver:function(a){this._game_attribute_observer_handler.add(a)},
setJustRegisteredOnGamePage:function(){this._just_registered=!0},justRegisteredOnGamePage:function(){return this._just_registered},resetAttributes:function(a){this._attributes=$H();this.updateAttributes(a)},setKlientAuthToken:function(a){this._klient_auth_token=a},updateAttributes:function(a){var b=$.jStorage.get(ActiveUser.USER_DATA_LS_KEY),c=this._attributes.get("username");b&&(b.version>a.version||b.generated_at>a.generated_at)&&(b.split_treatments=$H(a.split_treatments).merge(b.split_treatments).toObject(),
a=b);this._attributes.update(a);this._attribute_observer_handler.handle(this);a.username&&a.username!=c&&this.usernameUpdated();try{$.jStorage.set(ActiveUser.USER_DATA_LS_KEY,this._attributes.toObject())}catch(d){}this.updateNativeAppAttributes()},isNativeAppUser:function(){return!!window.kongNativeApp},sendNativeAppMessage:function(a,b){this.isNativeAppUser()&&kongNativeApp.sendMessage(Object.toJSON({opcode:a,params:b}))},closeNativeAppWindow:function(){this.sendNativeAppMessage("close",{})},updateNativeAppAttributes:function(){this.sendNativeAppMessage("user_info",
this._attributes)},updateGameAttributes:function(a){this._game_attributes.update(a);this._game_attribute_observer_handler.handle(active_user)},gameCookieName:function(){if(this._game_id)return"kong_game_"+this._game_id},getAttributes:function(){return this._attributes.toObject()},getGameAttributes:function(){return this._game_attributes.toObject()},username:function(){return this._attributes.get("username")},siteVisitorUID:function(){return Cookie.get("kong_svid")},avatarUrl:function(){var a=this._attributes.get("avatar_url");
return a?a:""},id:function(){return this._attributes.get("id")},facebook_uid:function(){return this._attributes.get("facebook_uid")},chatUsername:function(){return this._attributes.get("chat_username")||this._attributes.get("username")},chatPassword:function(){return this._attributes.get("chat_password")},klientAuthToken:function(){return this._klient_auth_token},gameAuthToken:function(){return this._game_attributes.get("game_auth_token")},userAgent:function(){return this._attributes.get("user_agent")},
userVars:function(){return this._game_attributes.get("user_vars")},userVarsSig:function(){return this._game_attributes.get("user_vars_sig")},specialChatVars:function(){return this._attributes.get("special_chat_vars")},gameplaysCount:function(){return this._attributes.get("gameplays_count")},gameplaysCountForGame:function(){return this._game_attributes.get("gameplays_for_game")||0},gameRequiresFlash:function(){return this._game_attributes.get("requires_flash")},showFlashWarning:function(a){return!a&&
this.gameRequiresFlash()},ratingsCount:function(){return this._attributes.get("ratings_count")},gameplaysCountFromCookie:function(){try{return parseInt(Cookie.get(Holodeck.KONG_GAMEPLAYS_COOKIE_NAME)||1,10)}catch(a){return 0}},duelingGroup:function(){var a=this.specialChatVars();return a&&(a=a.dueling_quest_data)?a.dueling_quest_slug||"":""},points:function(){return this._attributes.get("points")},pointsAway:function(){return this._attributes.get("points_away")},friendsOnlineCount:function(){return this._attributes.get("friends_online_count")},
friendsOnlineNames:function(){return this._attributes.get("friends_online_names")},unreadShoutsCount:function(){return this._attributes.get("unread_shouts_count")},unreadWhispersCount:function(){return this._attributes.get("unread_whispers_count")},unreadGameMessagesCount:function(){return this._attributes.get("unread_game_messages_count")},pointsForLastLevel:function(){return this._attributes.get("points_for_last_level")},pointsAfterLastLevel:function(){return active_user.points()-active_user.pointsForLastLevel()},
level:function(){return this._attributes.get("level")},lastLevelupAt:function(){var a=this._attributes.get("last_levelup_at");return a?new Date(a):void 0},recentLevelup:function(){return this.lastLevelupAt()>new Date((new Date).getTime()-864E5)},senderNameOrEmail:function(){return this._attributes.get("sender_name_or_email")},featureEnabled:function(a){var b=this.documentLocationSearchQuery()[a];return"false"!==b&&(this._game_attributes.get(a)||"true"===b)},webSocketsEnabled:function(){return"false"!==
this.documentLocationSearchQuery().websockets_enabled},flashPostMessageEnabled:function(){return!1},forceSSLIframe:function(){return this.featureEnabled("force_ssl_iframe")},sharedContentApiEnabled:function(){return this._game_attributes.get("shared_content_api")},mtxApiEnabled:function(){return this._game_attributes.get("mtx_api")},chatApiEnabled:function(){return this._game_attributes.get("chat_api")},usernameUpdated:function(){var a=this;(function(){a.isAuthenticated()&&a._on_authenticated_handler.handle(a)}).runWhenDomLoaded(!0)},
isAuthenticated:function(){return!(!this.username()||/^Guest/.match(this.username()))},isAdmin:function(){return this.isAuthenticated()&&this._attributes.get("admin")},isPremium:function(){return!(this.isAdmin()&&Cookie.get("admin_premium_off"))&&this.isAuthenticated()&&this._attributes.get("premium")},inTopKredGracePeriod:function(){return this.isAuthenticated()?"non-buyer"!=this.kredBuyerType()?!0:5>=this.gameplaysCountForGame():!1},premiumizeUpsellNode:function(a,b,c){this.isPremium()||a.addClassName("clickable").observe("click",
function(a){lightbox.prototype.initializePremiumMembershipPurchase(b,c);Event.stop(a);return!1});return a},isDeveloperOfGame:function(){return document.location.pathname.split("/")[2].toLowerCase()==this.username().toLowerCase()},isDeveloper:function(){return this.isAuthenticated()&&this._attributes.get("developer")},isChatModerator:function(){return this.isAuthenticated()&&this._attributes.get("moderator")},isSuperChatModerator:function(){return this.isAuthenticated()&&this._attributes.get("super_chat_moderator")},
isCurator:function(){return this.isAuthenticated()&&this._attributes.get("curator")},isForumModerator:function(){return this.isAuthenticated()&&this._attributes.get("forum_moderator")},getsAdminBar:function(){return this._load_toolbar?this.isChatModerator()||this.isCurator()||this.isForumModerator():!1},silencedUntil:function(){var a=this._attributes.get("silenced_until");return a?new Date(a):void 0},isSilenced:function(){var a=this.silencedUntil();return!!(a&&a>new Date)},silencedMessage:function(){return ActiveUser.SILENCED_TEMPLATE.evaluate({until:TimeInWordsHelper.distanceInWords(new Date,
this.silencedUntil())})},populateUserSpecificLinks:function(a){var b=this.username();(a?a.select("a"):$$("a.user_specific")).each(function(a){a.href=a.href.replace("Guest",b).replace("KongregateHolodeckTemplateUsername",b)})},fetchChipsGrant:function(){if(this._eligible_for_chip_grant){var a=0,b="/accounts/"+this.username()+"/user_blocks_grant",c=function(){new Ajax.Request(b,{method:"get",onSuccess:function(b){a+=1;b.responseJSON&&b.responseJSON.user_chip_grant?window.ModalService.createOrOpenModal({key:["chips_grant"],
content:b.responseJSON.user_chip_grant.modal_content}):10>a&&setTimeout(c,3E3)}})}.bind(this);setTimeout(c,3E3)}},addCapturedSelector:function(a,b){this._captured_inline_selectors.push(a);var c=this,d=function(a){var d=a.onclick;d&&(a.onclick=c.capturedSelectorWrapper.bindAsEventListener(c,d.bind(a),b))};$$(a).each(function(a){a.match("a, input[type=button]")?d(a):a.getElementsBySelector("a, input[type=button]").each(d);a.addClassName("lbOn")})},capturedSelectorWrapper:function(a,b,c){var d="function"==
typeof b;if(this.isAuthenticated()){if(d)return b(a)}else return this._redirect_capture?this.redirectToLogin():this.activateInlineLogin({},c),"function"==typeof b&&this.saveCapturedFunction(b.curry(a)),void 0!==a.preventDefault&&Event.stop(a),!1},activateInlineLogin:function(a,b){a||(a={});a=$H(a);var c="/accounts/new/behind_login";this._holodeck&&this._holodeck.recordAnalyticsEvent("Lightbox","Signin");this._game_id&&a.set("game_id",this._game_id);0<a.size()&&(c=c+"?"+a.toQueryString());b?lightbox.prototype.initializeKongregateLightboxFromAjax(c,
{afterStaticContentLoad:function(){lightbox.prototype.toggleRegistration();active_user.focusFormField("username")}}):lightbox.prototype.initializeKongregateLightboxFromAjax(c,{done_class_name:"lightbox_login",afterStaticContentLoad:function(){active_user.focusFormField("username")}})},focusFormField:function(a){var b=$(a);b&&setTimeout(function(){b.focus()},0)},activateKredPurchase:function(a){this.isAuthenticated()&&lightbox.prototype.initializeKredPurchase(a)},activatePasswordRecovery:function(){this.isGamePage()?
this.activateInlineLogin({recover:!0}):document.location="/session/new?recover=true"},redirectToLogin:function(){top.location=this._new_session_url},debugLevel:function(){this._debug_level||(this._debug_level=this.documentLocationSearchQuery().debug_level||2);return this._debug_level},documentLocationSearchQuery:function(){this._document_location_search_query||(this._document_location_search_query=document.location.search.parseQuery());return this._document_location_search_query},seenSharedContentWelcomeKey:function(){return ActiveUser.SEEN_SHARED_CONTENT_WELCOME_LS_KEY+
"_"+this.gameId()},seenSharedContentWelcome:function(){return!!$.jStorage.get(this.seenSharedContentWelcomeKey())},setSeenSharedContentWelcome:function(a){a?$.jStorage.set(this.seenSharedContentWelcomeKey(),a):$.jStorage.deleteKey(this.seenSharedContentWelcomeKey())},saveCapturedFunction:function(a){this._capturedFunction=a},runCapturedFunction:function(){"function"==typeof this._capturedFunction&&this._capturedFunction.defer();this._capturedFunction=null},gameId:function(){return this._game_id},
gamePermalink:function(){return this._game_attributes.get("game_permalink")},setAnalyticsInfo:function(a,b){b[a]?(Kongregate.Log.debug("Analytics information available, environment: "+a),this._analytics_info=b[a]):(Kongregate.Log.debug("No analytics information available for environment: "+a),this._analytics_info=null)},analyticsInfo:function(){return this._analytics_info},setGame:function(a,b,c){this._game_id=a;this._game_resource_path=b;c&&(this.updateGameAttributes(c),Cookie.erase(this.gameCookieName(),
this.gameCookiePath()))},gamePath:function(){if(!this._game_path){var a=document.location.pathname.match(/(.*)\/$/);this._game_path=a?a[1]:document.location.pathname}return this._game_path},gameResourcePath:function(){return this._game_resource_path},gameCookiePath:function(){this._game_cookie_path||(this._game_cookie_path=this.gamePath().match(/(.*)\/.*/)[1]);return this._game_cookie_path},referrerUrl:function(a){if(!this.isAuthenticated())return a;var b=a.match(/\?/)?"&":"?";return a+b+"referrer="+
encodeURIComponent(this.username())},gameType:function(){return this._game_attributes.get("game_type")},gameHasAlternateFile:function(){return this._game_attributes.get("has_alternate_file")},gameName:function(){return this._game_attributes.get("game_name")},allowedToRateGame:function(){if(this.shouldCheckForUnityPlugin()){var a=!1;unityObject.detectUnity(function(b){a="installed"==b||"running"==b});return a}return!0},shouldCheckForUnityPlugin:function(){return"unity"!=this.gameType()?!1:["Chrome",
"Mozilla","Edge"].include(this.userAgent().browser)?!this.gameHasAlternateFile():!0},accountUrl:function(){return"/accounts/"+this.username()},isGamePage:function(){return!!this._game_page},domain:function(){return this._domain},singleCDNDomain:function(){return this._single_cdn_domain},bareCDNhost:function(){return this._single_cdn_domain.replace(/^cdn\d\./,"")},trustedDomain:function(){return this._trusted_domain},isMobileUserAgent:function(){return this._attributes.get("mobile_user_agent")},countryCode:function(){return this.valueOfSearchParameter("force_country_code")||
this._attributes.get("country_code")},inEuConsentCountry:function(){return this._attributes.get("in_eu_consent_country")},ageOfConsent:function(){return this._attributes.get("age_of_consent")},acceptedPrivacyPolicy:function(){return this._attributes.get("accepted_privacy_policy")},showPolicyBar:function(){this.isAuthenticated()?this.acceptedPrivacyPolicy()&&Cookie.set("kong_guest_pp","true",1E4,"/"):Cookie.get("kong_guest_pp")||($j(".policy-bar__btn").click(function(a){a.preventDefault();Cookie.set("kong_guest_pp",
"true",1E4,"/");$j(".policy-bar").hide();return!1}),$j(".policy-bar").show())},loadAdminToolbar:function(){this.getsAdminBar()&&new Ajax.Updater({success:"admin_links_placeholder"},ActiveUser.ADMIN_LOAD_TOOLS_PATH,{method:"get",evalScripts:!0})},recordTreatments:function(a){a&&this._attributes.get("treatments")&&this._attributes.get("treatments").each(function(b){b.analytics_slot&&a.setCustomVariable(b.analytics_slot,b.group_permalink,b.treatment_permalink,2)})},valueOfSearchParameter:function(a){return location.search.parseQuery()[a]},
occasionallyShowRegistrationLightbox:function(){this.getsRegistrationLightbox()&&this.activateInlineLogin({},!0)},animationThrowdownSteam:function(){return ActiveUser.ANIMATION_THROWDOWN_GAME_ID==this.gameId()},getsRegistrationLightbox:function(){if(this.animationThrowdownSteam()&&!this.isAuthenticated())return!0;var a=this.gameplaysCount()%7;return!this.isAuthenticated()&&1<=this.gameplaysCount()&&1===a},lightUpBadgeOfTheDayOverlay:function(){var a=this._attributes.get("botd_badge_id");a&&(this.createCSS(".badge_of_the_day_overlay span.botd_badge_id_"+
a,"display:block"),this.createCSS(".badge_blocks.badge_id_"+a,"display:block"))},createCSS:function(a,b){if(!this._dynamic_style_ele){var c=$$("head")[0];var d=new Element("style",{type:"text/css",media:"screen"});c.appendChild(d)}this._dynamic_style_ele||(!Prototype.Browser.IE||Prototype.Browser.IE9||Prototype.Browser.IE10?this._dynamic_style_ele=d:(d=document.styleSheets)&&0<d.length&&(this._dynamic_style_ele=d[d.length-1]));!Prototype.Browser.IE||Prototype.Browser.IE9||Prototype.Browser.IE10?this._dynamic_style_ele&&
"undefined"!=typeof document.createTextNode&&this._dynamic_style_ele.appendChild(document.createTextNode(a+" {"+b+"}")):this._dynamic_style_ele&&"object"==typeof this._dynamic_style_ele.addRule&&this._dynamic_style_ele.addRule(a,b)},ignoreBounceMessage:function(a,b){$(a).up(".sitemessage").hide();new Ajax.Request(b)},shoutForGame:function(a,b){a="/accounts/"+this.username()+"/permissions_for_game.json?game_id="+a;new Ajax.Request(a,{method:"get",onSuccess:function(a){json=a.responseJSON;allow=null!==
json&&json.always_allow_shouts;b(allow)}})},kredBuyerType:function(){return this._attributes.get("kred_buyer_type")},isFacebookConnected:function(){return!!this._attributes.get("facebook_uid")},facebookAccessTokenNeedsUpdate:function(){return!!this._attributes.get("access_token_needs_update")},facebookStatus:function(){return this._attributes.get("facebook_status")},currentLocale:function(){return this._attributes.get("current_locale")},currentLocaleIsDefault:function(){return this._attributes.get("current_locale_is_default")},
currentPrefferedLocale:function(){return this._attributes.get("current_preffered_locale")},hasGoogleADayForToday:function(){return this.isAuthenticated()?!!this._attributes.get("gad_earned"):!1},getSplitTreatmentPermalink:function(a,b,c){this._splitTreatmentPermalinks[a]?b(this._splitTreatmentPermalinks[a]):new Ajax.Request("/site_visitor_split_treatments/"+a,{method:"get",onSuccess:function(c){b(c.responseText);active_user._splitTreatmentPermalinks[a]=c.responseText;Cookie.set("splitTreatmentPermalinks",
Object.toJSON(active_user._splitTreatmentPermalinks))},onFailure:c})},favoritesCount:function(){return this._attributes.get("favorites_count")},playLatersCount:function(){return this._attributes.get("play_laters_count")},underage:function(){return this._attributes.get("underage")},src:function(){return this._attributes.get("src")},crazyEggSplitTreatment:function(){return this._attributes.get("crazy_egg_split_treatment")},showFacebookRegistrationTab:function(){return this._attributes.get("show_facebook_registration")||
!1},gameSplitTreatments:function(a){var b=[];$H(this.split_treatments).each(function(c){c.key.substring(0,a.length)===a&&b.push(c.key+","+c.value)});return 0===b.size()?"none":b.join("|")},inCloseLinkTest:function(){return"no_skiplink"==this.split_treatments["143905321_reboot_no_bumper_skip_button"]},kongpanionInfo:function(){return this._attributes.get("kongpanion")},botdsThisWeek:function(){return this.justRegisteredOnGamePage()&&1==this._attributes.get("botds_this_week")?0:this._attributes.get("botds_this_week")||
0},shinyThreshold:function(){return this._attributes.get("shiny_threshold")},kredsBalance:function(){return this._attributes.get("kreds_balance")},chipsBalance:function(){return this._attributes.get("chips_balance")},areCloudSavesEnabled:function(){var a=this._attributes.get("cloud_saves_enabled");"undefined"===typeof a&&(a=!1);return a},hideRateThisGameTab:function(){return this.animationThrowdownSteam()||this._attributes.get("hide_rate_this_game_tab")},getsNoTranslations:function(){return"no_translations"==
this.split_treatments["104962302_show_non_translated_site"]},defaultToOptOut:function(){return"unchecked_checkbox"==this.split_treatments["158398427_unchecked_opt_in_checkbox"]},showFeatureRollItemSplits:function(){var a=this.split_treatments.feature_roll;$j.each(a,function(b){$j("."+a[b]).show()})}};var COMPILED=!0,goog=goog||{};goog.global=this;goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;
goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var b=a;(b=b.substring(0,b.lastIndexOf(".")))&&!goog.getObjectByName(b);)goog.implicitNamespaces_[b]=!0}goog.exportPath_(a)};goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};
COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={});goog.exportPath_=function(a,b,c){a=a.split(".");c=c||goog.global;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&goog.isDef(b)?c[d]=b:c=c[d]?c[d]:c[d]={}};goog.getObjectByName=function(a,b){a=a.split(".");b=b||goog.global;for(var c;c=a.shift();)if(goog.isDefAndNotNull(b[c]))b=b[c];else return null;return b};
goog.globalize=function(a,b){b=b||goog.global;for(var c in a)b[c]=a[c]};goog.addDependency=function(a,b,c){if(!COMPILED){var d;a=a.replace(/\\/g,"/");for(var e=goog.dependencies_,f=0;d=b[f];f++)e.nameToPath[d]=a,a in e.pathToNames||(e.pathToNames[a]={}),e.pathToNames[a][d]=!0;for(d=0;b=c[d];d++)a in e.requires||(e.requires[a]={}),e.requires[a][b]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var b=goog.getPathFromDeps_(a);if(b){goog.included_[b]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.global.CLOSURE_NO_DEPS=!0;goog.nullFunction=function(){};goog.identityFunction=function(a,b){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];
!COMPILED&&goog.ENABLE_DEBUG_LOADER&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),b=a.length-1;0<=b;--b){var c=a[b].src,d=c.lastIndexOf("?");d=
-1==d?c.length:d;if("base.js"==c.substr(d-7,7)){goog.basePath=c.substr(0,d-7);break}}},goog.importScript_=function(a){var b=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&b(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){if(goog.inHtmlDocument_()){var b=goog.global.document;if("complete"==b.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}b.write('<script type="text/javascript" src="'+
a+'">\x3c/script>');return!0}return!1},goog.writeScripts_=function(){function a(e){if(!(e in d.written)){if(!(e in d.visited)&&(d.visited[e]=!0,e in d.requires))for(var f in d.requires[e])if(!goog.isProvided_(f))if(f in d.nameToPath)a(d.nameToPath[f]);else throw Error("Undefined nameToPath for "+f);e in c||(c[e]=!0,b.push(e))}}var b=[],c={},d=goog.dependencies_,e;for(e in goog.included_)d.written[e]||a(e);for(e=0;e<b.length;e++)if(b[e])goog.importScript_(goog.basePath+b[e]);else throw Error("Undefined script input");
},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.isDef=function(a){return void 0!==a};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();b="array"==b?[]:{};for(var c in a)b[c]=goog.cloneObject(a[c]);return b}return a};goog.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}};goog.mixin=function(a,b){for(var c in b)a[c]=b[c]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,c=b.createElement("script");c.type="text/javascript";c.defer=!1;c.appendChild(b.createTextNode(a));b.body.appendChild(c);
b.body.removeChild(c)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,b){var c=function(a){return goog.cssNameMapping_[a]||a},d=function(a){a=a.split("-");for(var b=[],d=0;d<a.length;d++)b.push(c(a[d]));return b.join("-")};d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?c:d:function(a){return a};return b?a+"-"+d(b):d(a)};goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b){b=b||{};for(var c in b){var d=(""+b[c]).replace(/\$/g,"$$$$");a=a.replace(new RegExp("\\{\\$"+c+"\\}","gi"),d)}return a};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(a,b,c){goog.exportPath_(a,b,c)};goog.exportProperty=function(a,b,c){a[b]=c};
goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a};
goog.base=function(a,b,c){var d=arguments.callee.caller;if(d.superClass_)return d.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var e=Array.prototype.slice.call(arguments,2),f=!1,h=a.constructor;h;h=h.superClass_&&h.superClass_.constructor)if(h.prototype[b]===d)f=!0;else if(f)return h.prototype[b].apply(a,e);if(a[b]===d)return a.constructor.prototype[b].apply(a,e);throw Error("goog.base called from a method of one name to a method of a different name");};
goog.scope=function(a){a.call(goog.global)};var webfont={DomHelper:function(a,b){this.mainWindow_=a;this.loadWindow_=b||a;this.document_=this.loadWindow_.document;this.supportForStyle_=void 0}};webfont.DomHelper.prototype.createElement=function(a,b,c){a=this.document_.createElement(a);if(b)for(var d in b)b.hasOwnProperty(d)&&("style"==d?this.setStyle(a,b[d]):a.setAttribute(d,b[d]));c&&a.appendChild(this.document_.createTextNode(c));return a};
webfont.DomHelper.prototype.insertInto=function(a,b){a=this.document_.getElementsByTagName(a)[0];a||(a=document.documentElement);return a&&a.lastChild?(a.insertBefore(b,a.lastChild),!0):!1};webfont.DomHelper.prototype.whenBodyExists=function(a){var b=function(){document.body?a():setTimeout(b,0)};b()};webfont.DomHelper.prototype.removeElement=function(a){return a.parentNode?(a.parentNode.removeChild(a),!0):!1};
webfont.DomHelper.prototype.createCssLink=function(a){return this.createElement("link",{rel:"stylesheet",href:a})};webfont.DomHelper.prototype.createScriptSrc=function(a){return this.createElement("script",{src:a})};webfont.DomHelper.prototype.appendClassName=function(a,b){for(var c=a.className.split(/\s+/),d=0,e=c.length;d<e;d++)if(c[d]==b)return;c.push(b);a.className=c.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")};
webfont.DomHelper.prototype.removeClassName=function(a,b){for(var c=a.className.split(/\s+/),d=[],e=0,f=c.length;e<f;e++)c[e]!=b&&d.push(c[e]);a.className=d.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")};webfont.DomHelper.prototype.hasClassName=function(a,b){a=a.className.split(/\s+/);for(var c=0,d=a.length;c<d;c++)if(a[c]==b)return!0;return!1};webfont.DomHelper.prototype.setStyle=function(a,b){this.hasSupportForStyle_()?a.setAttribute("style",b):a.style.cssText=b};
webfont.DomHelper.prototype.hasSupportForStyle_=function(){if(void 0===this.supportForStyle_){var a=this.document_.createElement("p");a.innerHTML='<a style="top:1px;">w</a>';this.supportForStyle_=/top/.test(a.getElementsByTagName("a")[0].getAttribute("style"))}return this.supportForStyle_};webfont.DomHelper.prototype.getMainWindow=function(){return this.mainWindow_};webfont.DomHelper.prototype.getLoadWindow=function(){return this.loadWindow_};
webfont.DomHelper.prototype.getProtocol=function(){var a=this.loadWindow_.location.protocol;"about:"==a&&(a=this.mainWindow_.location.protocol);return"https:"==a?"https:":"http:"};webfont.BrowserInfo=function(a,b,c){this.webfontSupport_=a;this.webKitFallbackBug_=b;this.webKitMetricsBug_=c};webfont.BrowserInfo.prototype.hasWebFontSupport=function(){return this.webfontSupport_};webfont.BrowserInfo.prototype.hasWebKitFallbackBug=function(){return this.webKitFallbackBug_};
webfont.BrowserInfo.prototype.hasWebKitMetricsBug=function(){return this.webKitMetricsBug_};webfont.UserAgent=function(a,b,c,d,e,f,h,l){this.name_=a;this.version_=b;this.engine_=c;this.engineVersion_=d;this.platform_=e;this.platformVersion_=f;this.documentMode_=h;this.browserInfo_=l};webfont.UserAgent.prototype.getName=function(){return this.name_};webfont.UserAgent.prototype.getVersion=function(){return this.version_};webfont.UserAgent.prototype.getEngine=function(){return this.engine_};
webfont.UserAgent.prototype.getEngineVersion=function(){return this.engineVersion_};webfont.UserAgent.prototype.getPlatform=function(){return this.platform_};webfont.UserAgent.prototype.getPlatformVersion=function(){return this.platformVersion_};webfont.UserAgent.prototype.getDocumentMode=function(){return this.documentMode_};webfont.UserAgent.prototype.getBrowserInfo=function(){return this.browserInfo_};webfont.UserAgentParser=function(a,b){this.userAgent_=a;this.doc_=b};
webfont.UserAgentParser.UNKNOWN="Unknown";webfont.UserAgentParser.BUILTIN_BROWSER="BuiltinBrowser";webfont.UserAgentParser.UNKNOWN_USER_AGENT=new webfont.UserAgent(webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,void 0,new webfont.BrowserInfo(!1,!1,!1));
webfont.UserAgentParser.prototype.parse=function(){return this.isIe_()?this.parseIeUserAgentString_():this.isOpera_()?this.parseOperaUserAgentString_():this.isWebKit_()?this.parseWebKitUserAgentString_():this.isGecko_()?this.parseGeckoUserAgentString_():webfont.UserAgentParser.UNKNOWN_USER_AGENT};
webfont.UserAgentParser.prototype.getPlatform_=function(){var a=this.getMatchingGroup_(this.userAgent_,/(iPod|iPad|iPhone|Android|Windows Phone|BB\d{2}|BlackBerry)/,1);if(""!=a)return/BB\d{2}/.test(a)&&(a="BlackBerry"),a;a=this.getMatchingGroup_(this.userAgent_,/(Linux|Mac_PowerPC|Macintosh|Windows|CrOS)/,1);return""!=a?("Mac_PowerPC"==a&&(a="Macintosh"),a):webfont.UserAgentParser.UNKNOWN};
webfont.UserAgentParser.prototype.getPlatformVersion_=function(){var a=this.getMatchingGroup_(this.userAgent_,/(OS X|Windows NT|Android|CrOS) ([^;)]+)/,2);return a||(a=this.getMatchingGroup_(this.userAgent_,/Windows Phone( OS)? ([^;)]+)/,2))||(a=this.getMatchingGroup_(this.userAgent_,/(iPhone )?OS ([\d_]+)/,2))||(a=this.getMatchingGroup_(this.userAgent_,/Linux ([i\d]+)/,1))?a:(a=this.getMatchingGroup_(this.userAgent_,/(BB\d{2}|BlackBerry).*?Version\/([^\s]*)/,2))?a:webfont.UserAgentParser.UNKNOWN};
webfont.UserAgentParser.prototype.isIe_=function(){return-1!=this.userAgent_.indexOf("MSIE")};
webfont.UserAgentParser.prototype.parseIeUserAgentString_=function(){var a=this.getPlatform_(),b=this.getPlatformVersion_(),c=this.getMatchingGroup_(this.userAgent_,/(MSIE [\d\w\.]+)/,1);if(""!=c){var d=c.split(" ");c=d[0];d=d[1];var e=this.parseVersion_(d),f=this.parseVersion_(b);e="Windows"==a&&6<=e.major||"Windows Phone"==a&&8<=f.major;return new webfont.UserAgent(c,d,c,d,a,b,this.getDocumentMode_(this.doc_),new webfont.BrowserInfo(e,!1,!1))}return new webfont.UserAgent("MSIE",webfont.UserAgentParser.UNKNOWN,
"MSIE",webfont.UserAgentParser.UNKNOWN,a,b,this.getDocumentMode_(this.doc_),new webfont.BrowserInfo(!1,!1,!1))};webfont.UserAgentParser.prototype.isOpera_=function(){return-1!=this.userAgent_.indexOf("Opera")};
webfont.UserAgentParser.prototype.parseOperaUserAgentString_=function(){var a=webfont.UserAgentParser.UNKNOWN,b=webfont.UserAgentParser.UNKNOWN,c=this.getMatchingGroup_(this.userAgent_,/(Presto\/[\d\w\.]+)/,1);""!=c?(b=c.split("/"),a=b[0],b=b[1]):(-1!=this.userAgent_.indexOf("Gecko")&&(a="Gecko"),c=this.getMatchingGroup_(this.userAgent_,/rv:([^\)]+)/,1),""!=c&&(b=c));if(-1!=this.userAgent_.indexOf("Opera Mini/"))return c=this.getMatchingGroup_(this.userAgent_,/Opera Mini\/([\d\.]+)/,1),""==c&&(c=
webfont.UserAgentParser.UNKNOWN),new webfont.UserAgent("OperaMini",c,a,b,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),new webfont.BrowserInfo(!1,!1,!1));if(-1!=this.userAgent_.indexOf("Version/")){var d=this.getMatchingGroup_(this.userAgent_,/Version\/([\d\.]+)/,1);if(""!=d)return c=this.parseVersion_(d),new webfont.UserAgent("Opera",d,a,b,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),new webfont.BrowserInfo(10<=c.major,!1,!1))}d=
this.getMatchingGroup_(this.userAgent_,/Opera[\/ ]([\d\.]+)/,1);return""!=d?(c=this.parseVersion_(d),new webfont.UserAgent("Opera",d,a,b,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),new webfont.BrowserInfo(10<=c.major,!1,!1))):new webfont.UserAgent("Opera",webfont.UserAgentParser.UNKNOWN,a,b,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),new webfont.BrowserInfo(!1,!1,!1))};webfont.UserAgentParser.prototype.isWebKit_=function(){return/AppleWeb(K|k)it/.test(this.userAgent_)};
webfont.UserAgentParser.prototype.parseWebKitUserAgentString_=function(){var a=this.getPlatform_(),b=this.getPlatformVersion_(),c=this.getMatchingGroup_(this.userAgent_,/AppleWeb(?:K|k)it\/([\d\.\+]+)/,1);""==c&&(c=webfont.UserAgentParser.UNKNOWN);var d=this.parseVersion_(c);var e=this.parseVersion_(b);var f=webfont.UserAgentParser.UNKNOWN;-1!=this.userAgent_.indexOf("Chrome")||-1!=this.userAgent_.indexOf("CrMo")||-1!=this.userAgent_.indexOf("CriOS")?f="Chrome":/Silk\/\d/.test(this.userAgent_)?f=
"Silk":"BlackBerry"==a||"Android"==a?f=webfont.UserAgentParser.BUILTIN_BROWSER:-1!=this.userAgent_.indexOf("Safari")?f="Safari":-1!=this.userAgent_.indexOf("AdobeAIR")&&(f="AdobeAIR");var h=webfont.UserAgentParser.UNKNOWN;f==webfont.UserAgentParser.BUILTIN_BROWSER?h=webfont.UserAgentParser.UNKNOWN:/Silk\/\d/.test(this.userAgent_)?h=this.getMatchingGroup_(this.userAgent_,/Silk\/([\d\._]+)/,1):-1!=this.userAgent_.indexOf("Version/")?h=this.getMatchingGroup_(this.userAgent_,/Version\/([\d\.\w]+)/,1):
"Chrome"==f?h=this.getMatchingGroup_(this.userAgent_,/(Chrome|CrMo|CriOS)\/([\d\.]+)/,2):"AdobeAIR"==f&&(h=this.getMatchingGroup_(this.userAgent_,/AdobeAIR\/([\d\.]+)/,1));"AdobeAIR"==f?(e=this.parseVersion_(h),e=2<e.major||2==e.major&&5<=e.minor):e="BlackBerry"==a?10<=e.major:"Android"==a?2<e.major||2==e.major&&1<e.minor:526<=d.major||525<=d.major&&13<=d.minor;d=536>d.major||536==d.major&&11>d.minor;var l="iPhone"==a||"iPad"==a||"iPod"==a||"Macintosh"==a;return new webfont.UserAgent(f,h,"AppleWebKit",
c,a,b,this.getDocumentMode_(this.doc_),new webfont.BrowserInfo(e,d,l))};webfont.UserAgentParser.prototype.isGecko_=function(){return-1!=this.userAgent_.indexOf("Gecko")};
webfont.UserAgentParser.prototype.parseGeckoUserAgentString_=function(){var a=webfont.UserAgentParser.UNKNOWN,b=webfont.UserAgentParser.UNKNOWN,c=!1;if(-1!=this.userAgent_.indexOf("Firefox")){a="Firefox";var d=this.getMatchingGroup_(this.userAgent_,/Firefox\/([\d\w\.]+)/,1);""!=d&&(c=this.parseVersion_(d),b=d,c=3<=c.major&&5<=c.minor)}else-1!=this.userAgent_.indexOf("Mozilla")&&(a="Mozilla");d=this.getMatchingGroup_(this.userAgent_,/rv:([^\)]+)/,1);""==d?d=webfont.UserAgentParser.UNKNOWN:c||(c=this.parseVersion_(d),
c=1<c.major||1==c.major&&9<c.minor||1==c.major&&9==c.minor&&2<=c.patch||null!=d.match(/1\.9\.1b[123]/)||null!=d.match(/1\.9\.1\.[\d\.]+/));return new webfont.UserAgent(a,b,"Gecko",d,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),new webfont.BrowserInfo(c,!1,!1))};
webfont.UserAgentParser.prototype.parseVersion_=function(a){a=/([0-9]+)(?:\.([0-9]+)(?:\.([0-9]+)?)?)?/.exec(a);var b={};a&&(b.major=parseInt(a[1]||-1,10),b.minor=parseInt(a[2]||-1,10),b.patch=parseInt(a[3]||-1,10));return b};webfont.UserAgentParser.prototype.getMatchingGroup_=function(a,b,c){return(a=a.match(b))&&a[c]?a[c]:""};webfont.UserAgentParser.prototype.getDocumentMode_=function(a){if(a.documentMode)return a.documentMode};webfont.CssClassName=function(a){this.joinChar_=a||webfont.CssClassName.DEFAULT_JOIN_CHAR};
webfont.CssClassName.DEFAULT_JOIN_CHAR="-";webfont.CssClassName.prototype.sanitize=function(a){return a.replace(/[\W_]+/g,"").toLowerCase()};webfont.CssClassName.prototype.build=function(a){for(var b=[],c=0;c<arguments.length;c++)b.push(this.sanitize(arguments[c]));return b.join(this.joinChar_)};webfont.Font=function(a,b){this.name_=a;this.weight_=4;this.style_="n";if(a=(b||"n4").match(/^([nio])([1-9])$/i))this.style_=a[1],this.weight_=parseInt(a[2],10)};webfont.Font.prototype.getName=function(){return this.name_};
webfont.Font.prototype.getCssName=function(){return this.quote_(this.name_)};webfont.Font.prototype.quote_=function(a){var b=[];a=a.split(/,\s*/);for(var c=0;c<a.length;c++){var d=a[c].replace(/['"]/g,"");-1==d.indexOf(" ")?b.push(d):b.push("'"+d+"'")}return b.join(",")};webfont.Font.prototype.getVariation=function(){return this.style_+this.weight_};
webfont.Font.prototype.getCssVariation=function(){var a="normal",b=this.weight_+"00";"o"===this.style_?a="oblique":"i"===this.style_&&(a="italic");return"font-style:"+a+";font-weight:"+b+";"};webfont.Font.parseCssVariation=function(a){var b=4,c="n",d;a&&((d=a.match(/(normal|oblique|italic)/i))&&d[1]&&(c=d[1].substr(0,1).toLowerCase()),(d=a.match(/([1-9]00|normal|bold)/i))&&d[1]&&(/bold/i.test(d[1])?b=7:/[1-9]00/.test(d[1])&&(b=parseInt(d[1].substr(0,1),10))));return c+b};
webfont.EventDispatcher=function(a,b,c,d){this.domHelper_=a;this.htmlElement_=b;this.callbacks_=c;this.namespace_=d||webfont.EventDispatcher.DEFAULT_NAMESPACE;this.cssClassName_=new webfont.CssClassName("-")};webfont.EventDispatcher.DEFAULT_NAMESPACE="wf";webfont.EventDispatcher.LOADING="loading";webfont.EventDispatcher.ACTIVE="active";webfont.EventDispatcher.INACTIVE="inactive";webfont.EventDispatcher.FONT="font";
webfont.EventDispatcher.prototype.dispatchLoading=function(){this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.LOADING));this.dispatch_(webfont.EventDispatcher.LOADING)};
webfont.EventDispatcher.prototype.dispatchFontLoading=function(a){this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,a.getName(),a.getVariation().toString(),webfont.EventDispatcher.LOADING));this.dispatch_(webfont.EventDispatcher.FONT+webfont.EventDispatcher.LOADING,a)};
webfont.EventDispatcher.prototype.dispatchFontActive=function(a){this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,a.getName(),a.getVariation().toString(),webfont.EventDispatcher.LOADING));this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,a.getName(),a.getVariation().toString(),webfont.EventDispatcher.INACTIVE));this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,a.getName(),a.getVariation().toString(),
webfont.EventDispatcher.ACTIVE));this.dispatch_(webfont.EventDispatcher.FONT+webfont.EventDispatcher.ACTIVE,a)};
webfont.EventDispatcher.prototype.dispatchFontInactive=function(a){this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,a.getName(),a.getVariation().toString(),webfont.EventDispatcher.LOADING));this.domHelper_.hasClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,a.getName(),a.getVariation().toString(),webfont.EventDispatcher.ACTIVE))||this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,a.getName(),a.getVariation().toString(),
webfont.EventDispatcher.INACTIVE));this.dispatch_(webfont.EventDispatcher.FONT+webfont.EventDispatcher.INACTIVE,a)};
webfont.EventDispatcher.prototype.dispatchInactive=function(){this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.LOADING));this.domHelper_.hasClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.ACTIVE))||this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.INACTIVE));this.dispatch_(webfont.EventDispatcher.INACTIVE)};
webfont.EventDispatcher.prototype.dispatchActive=function(){this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.LOADING));this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.INACTIVE));this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.ACTIVE));this.dispatch_(webfont.EventDispatcher.ACTIVE)};
webfont.EventDispatcher.prototype.dispatch_=function(a,b){if(this.callbacks_[a])if(b)this.callbacks_[a](b.getName(),b.getVariation());else this.callbacks_[a]()};webfont.FontModule=function(){};webfont.FontModule.prototype.supportUserAgent=function(a,b){};webfont.FontModule.prototype.load=function(a){};webfont.FontModuleLoader=function(){this.modules_={}};webfont.FontModuleLoader.prototype.addModuleFactory=function(a,b){this.modules_[a]=b};
webfont.FontModuleLoader.prototype.getModules=function(a,b){var c=[],d;for(d in a)if(a.hasOwnProperty(d)){var e=this.modules_[d];e&&c.push(e(a[d],b))}return c};webfont.FontRuler=function(a,b){this.domHelper_=a;this.fontTestString_=b;this.el_=this.domHelper_.createElement("span",{"aria-hidden":"true"},this.fontTestString_)};webfont.FontRuler.prototype.setFont=function(a){this.domHelper_.setStyle(this.el_,this.computeStyleString_(a))};
webfont.FontRuler.prototype.insert=function(){this.domHelper_.insertInto("body",this.el_)};webfont.FontRuler.prototype.computeStyleString_=function(a){return"position:absolute;top:-999px;left:-999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+a.getCssName()+";"+a.getCssVariation()};webfont.FontRuler.prototype.getWidth=function(){return this.el_.offsetWidth};webfont.FontRuler.prototype.remove=function(){this.domHelper_.removeElement(this.el_)};
webfont.FontWatchRunner=function(a,b,c,d,e,f,h,l){this.activeCallback_=a;this.inactiveCallback_=b;this.domHelper_=c;this.font_=d;this.fontTestString_=l||webfont.FontWatchRunner.DEFAULT_TEST_STRING;this.browserInfo_=e;this.lastResortWidths_={};this.timeout_=f||5E3;this.metricCompatibleFonts_=h||null;this.fontRulerB_=this.fontRulerA_=null;this.setupLastResortWidths_()};webfont.FontWatchRunner.LastResortFonts={SERIF:"serif",SANS_SERIF:"sans-serif",MONOSPACE:"monospace"};
webfont.FontWatchRunner.DEFAULT_TEST_STRING="BESbswy";webfont.FontWatchRunner.prototype.setupLastResortWidths_=function(){var a=new webfont.FontRuler(this.domHelper_,this.fontTestString_);a.insert();for(var b in webfont.FontWatchRunner.LastResortFonts)webfont.FontWatchRunner.LastResortFonts.hasOwnProperty(b)&&(a.setFont(new webfont.Font(webfont.FontWatchRunner.LastResortFonts[b],this.font_.getVariation())),this.lastResortWidths_[webfont.FontWatchRunner.LastResortFonts[b]]=a.getWidth());a.remove()};
webfont.FontWatchRunner.prototype.start=function(){this.fontRulerA_=new webfont.FontRuler(this.domHelper_,this.fontTestString_);this.fontRulerA_.insert();this.fontRulerB_=new webfont.FontRuler(this.domHelper_,this.fontTestString_);this.fontRulerB_.insert();this.started_=goog.now();this.fontRulerA_.setFont(new webfont.Font(this.font_.getName()+","+webfont.FontWatchRunner.LastResortFonts.SERIF,this.font_.getVariation()));this.fontRulerB_.setFont(new webfont.Font(this.font_.getName()+","+webfont.FontWatchRunner.LastResortFonts.SANS_SERIF,
this.font_.getVariation()));this.check_()};webfont.FontWatchRunner.prototype.widthMatches_=function(a,b){return a===this.lastResortWidths_[b]};webfont.FontWatchRunner.prototype.widthsMatchLastResortWidths_=function(a,b){for(var c in webfont.FontWatchRunner.LastResortFonts)if(webfont.FontWatchRunner.LastResortFonts.hasOwnProperty(c)&&this.widthMatches_(a,webfont.FontWatchRunner.LastResortFonts[c])&&this.widthMatches_(b,webfont.FontWatchRunner.LastResortFonts[c]))return!0;return!1};
webfont.FontWatchRunner.prototype.hasTimedOut_=function(){return goog.now()-this.started_>=this.timeout_};webfont.FontWatchRunner.prototype.isFallbackFont_=function(a,b){return this.widthMatches_(a,webfont.FontWatchRunner.LastResortFonts.SERIF)&&this.widthMatches_(b,webfont.FontWatchRunner.LastResortFonts.SANS_SERIF)};webfont.FontWatchRunner.prototype.isLastResortFont_=function(a,b){return this.browserInfo_.hasWebKitFallbackBug()&&this.widthsMatchLastResortWidths_(a,b)};
webfont.FontWatchRunner.prototype.isMetricCompatibleFont_=function(){return null===this.metricCompatibleFonts_||this.metricCompatibleFonts_.hasOwnProperty(this.font_.getName())};
webfont.FontWatchRunner.prototype.check_=function(){var a=this.fontRulerA_.getWidth(),b=this.fontRulerB_.getWidth();this.isFallbackFont_(a,b)||this.isLastResortFont_(a,b)?this.hasTimedOut_()?this.isLastResortFont_(a,b)&&this.isMetricCompatibleFont_()?this.finish_(this.activeCallback_):this.finish_(this.inactiveCallback_):this.asyncCheck_():this.finish_(this.activeCallback_)};webfont.FontWatchRunner.prototype.asyncCheck_=function(){setTimeout(goog.bind(function(){this.check_()},this),25)};
webfont.FontWatchRunner.prototype.finish_=function(a){this.fontRulerA_.remove();this.fontRulerB_.remove();a(this.font_)};webfont.FontWatcher=function(a,b,c,d){this.domHelper_=b;this.eventDispatcher_=c;this.currentlyWatched_=0;this.success_=this.last_=!1;this.timeout_=d;this.browserInfo_=a.getBrowserInfo()};
webfont.FontWatcher.prototype.watch=function(a,b,c,d){var e=a.length;if(0===e&&d)this.eventDispatcher_.dispatchInactive();else for(this.currentlyWatched_+=e,d&&(this.last_=d),d=0;d<e;d++){var f=a[d],h=b[f.getName()];this.eventDispatcher_.dispatchFontLoading(f);var l=goog.bind(this.fontActive_,this),m=goog.bind(this.fontInactive_,this);(new c(l,m,this.domHelper_,f,this.browserInfo_,this.timeout_,null,h)).start()}};
webfont.FontWatcher.prototype.fontActive_=function(a){this.eventDispatcher_.dispatchFontActive(a);this.success_=!0;this.decreaseCurrentlyWatched_()};webfont.FontWatcher.prototype.fontInactive_=function(a){this.eventDispatcher_.dispatchFontInactive(a);this.decreaseCurrentlyWatched_()};webfont.FontWatcher.prototype.decreaseCurrentlyWatched_=function(){0==--this.currentlyWatched_&&this.last_&&(this.success_?this.eventDispatcher_.dispatchActive():this.eventDispatcher_.dispatchInactive())};
webfont.WebFont=function(a,b,c){this.mainWindow_=a;this.fontModuleLoader_=b;this.userAgent_=c;this.moduleFailedLoading_=this.moduleLoading_=0};webfont.WebFont.prototype.addModule=function(a,b){this.fontModuleLoader_.addModuleFactory(a,b)};
webfont.WebFont.prototype.load=function(a){var b=a.context||this.mainWindow_;this.domHelper_=new webfont.DomHelper(this.mainWindow_,b);b=new webfont.EventDispatcher(this.domHelper_,b.document.documentElement,a);this.userAgent_.getBrowserInfo().hasWebFontSupport()?this.load_(b,a):b.dispatchInactive()};
webfont.WebFont.prototype.isModuleSupportingUserAgent_=function(a,b,c,d){var e=a.getFontWatchRunnerCtor?a.getFontWatchRunnerCtor():webfont.FontWatchRunner,f=this;d?a.load(function(a,d){f.onModuleReady_(b,c,e,a,d)}):(a=0==--this.moduleLoading_,this.moduleFailedLoading_--,a&&(0==this.moduleFailedLoading_?b.dispatchInactive():b.dispatchLoading()),c.watch([],{},e,a))};
webfont.WebFont.prototype.onModuleReady_=function(a,b,c,d,e){var f=0==--this.moduleLoading_;f&&a.dispatchLoading();setTimeout(function(){b.watch(d,e||{},c,f)},0)};
webfont.WebFont.prototype.load_=function(a,b){var c=this.fontModuleLoader_.getModules(b,this.domHelper_);b=b.timeout;this.moduleFailedLoading_=this.moduleLoading_=c.length;b=new webfont.FontWatcher(this.userAgent_,this.domHelper_,a,b);for(var d=0,e=c.length;d<e;d++){var f=c[d];f.supportUserAgent(this.userAgent_,goog.bind(this.isModuleSupportingUserAgent_,this,f,a,b))}};
var GLOBAL_NAME="WebFont",globalNamespaceObject=window[GLOBAL_NAME]=function(){var a=(new webfont.UserAgentParser(navigator.userAgent,document)).parse(),b=new webfont.FontModuleLoader;return new webfont.WebFont(window,b,a)}();globalNamespaceObject.load=globalNamespaceObject.load;
webfont.LastResortWebKitFontWatchRunner=function(a,b,c,d,e,f,h,l){webfont.FontWatchRunner.call(this,a,b,c,d,e,f,h,l);this.webKitLastResortFontWidths_=this.setUpWebKitLastResortFontWidths_();this.webKitLastResortWidthChange_=!1;this.lastObservedWidthA_=this.lastResortWidths_[webfont.FontWatchRunner.LastResortFonts.SERIF];this.lastObservedWidthB_=this.lastResortWidths_[webfont.FontWatchRunner.LastResortFonts.SANS_SERIF]};goog.inherits(webfont.LastResortWebKitFontWatchRunner,webfont.FontWatchRunner);
webfont.LastResortWebKitFontWatchRunner.METRICS_COMPATIBLE_FONTS={Arimo:!0,Cousine:!0,Tinos:!0};
webfont.LastResortWebKitFontWatchRunner.prototype.setUpWebKitLastResortFontWidths_=function(){var a=["Times New Roman","Arial","Times","Sans","Serif"],b=this.font_.getVariation(),c=a.length,d={},e=new webfont.FontRuler(this.domHelper_,this.fontTestString_);e.insert();e.setFont(new webfont.Font(a[0],b));d[e.getWidth()]=!0;for(var f=1;f<c;f++){var h=a[f];e.setFont(new webfont.Font(h,b));d[e.getWidth()]=!0;"4"!=b.toString().charAt(1)&&(e.setFont(new webfont.Font(h,b.charAt(0)+"4")),d[e.getWidth()]=!0)}e.remove();
return d};
webfont.LastResortWebKitFontWatchRunner.prototype.check_=function(){var a=this.fontRulerA_.getWidth(),b=this.fontRulerB_.getWidth();!this.webKitLastResortWidthChange_&&a==b&&this.webKitLastResortFontWidths_[a]&&(this.webKitLastResortFontWidths_={},this.webKitLastResortWidthChange_=this.webKitLastResortFontWidths_[a]=!0);this.lastObservedWidthA_==a&&this.lastObservedWidthB_==b||this.webKitLastResortFontWidths_[a]||this.webKitLastResortFontWidths_[b]?this.hasTimedOut_()?this.webKitLastResortFontWidths_[a]&&this.webKitLastResortFontWidths_[b]&&
webfont.LastResortWebKitFontWatchRunner.METRICS_COMPATIBLE_FONTS[this.font_.getName()]?this.finish_(this.activeCallback_):this.finish_(this.inactiveCallback_):this.asyncCheck_():this.finish_(this.activeCallback_)};webfont.FontApiUrlBuilder=function(a,b,c){this.apiUrl_=a?a:b+webfont.FontApiUrlBuilder.DEFAULT_API_URL;this.fontFamilies_=[];this.subsets_=[];this.text_=c||""};webfont.FontApiUrlBuilder.DEFAULT_API_URL="//fonts.googleapis.com/css";webfont.FontApiUrlBuilder.prototype.setFontFamilies=function(a){this.parseFontFamilies_(a)};
webfont.FontApiUrlBuilder.prototype.parseFontFamilies_=function(a){for(var b=a.length,c=0;c<b;c++){var d=a[c].split(":");3==d.length&&this.subsets_.push(d.pop());var e="";2==d.length&&""!=d[1]&&(e=":");this.fontFamilies_.push(d.join(e))}};webfont.FontApiUrlBuilder.prototype.webSafe=function(a){return a.replace(/ /g,"+")};
webfont.FontApiUrlBuilder.prototype.build=function(){if(0==this.fontFamilies_.length)throw Error("No fonts to load !");if(-1!=this.apiUrl_.indexOf("kit="))return this.apiUrl_;for(var a=this.fontFamilies_.length,b=[],c=0;c<a;c++)b.push(this.webSafe(this.fontFamilies_[c]));a=this.apiUrl_+"?family="+b.join("%7C");0<this.subsets_.length&&(a+="&subset="+this.subsets_.join(","));0<this.text_.length&&(a+="&text="+encodeURIComponent(this.text_));return a};
webfont.FontApiParser=function(a){this.fontFamilies_=a;this.parsedFonts_=[];this.fontTestStrings_={}};webfont.FontApiParser.INT_FONTS={latin:webfont.FontWatchRunner.DEFAULT_TEST_STRING,cyrillic:"&#1081;&#1103;&#1046;",greek:"&#945;&#946;&#931;",khmer:"&#x1780;&#x1781;&#x1782;",Hanuman:"&#x1780;&#x1781;&#x1782;"};
webfont.FontApiParser.WEIGHTS={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"};webfont.FontApiParser.STYLES={i:"i",italic:"i",n:"n",normal:"n"};webfont.FontApiParser.VARIATION_MATCH=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;
webfont.FontApiParser.prototype.parse=function(){for(var a=this.fontFamilies_.length,b=0;b<a;b++){var c=this.fontFamilies_[b].split(":"),d=c[0].replace(/\+/g," "),e=["n4"];if(2<=c.length){var f=this.parseVariations_(c[1]);0<f.length&&(e=f);3==c.length&&(c=this.parseSubsets_(c[2]),0<c.length&&(c=webfont.FontApiParser.INT_FONTS[c[0]])&&(this.fontTestStrings_[d]=c))}this.fontTestStrings_[d]||(c=webfont.FontApiParser.INT_FONTS[d])&&(this.fontTestStrings_[d]=c);for(c=0;c<e.length;c+=1)this.parsedFonts_.push(new webfont.Font(d,
e[c]))}};webfont.FontApiParser.prototype.generateFontVariationDescription_=function(a){if(!a.match(/^[\w]+$/))return"";a=a.toLowerCase();var b=webfont.FontApiParser.VARIATION_MATCH.exec(a);if(null==b)return"";a=this.normalizeStyle_(b[2]);b=this.normalizeWeight_(b[1]);return[a,b].join("")};webfont.FontApiParser.prototype.normalizeStyle_=function(a){return null==a||""==a?"n":webfont.FontApiParser.STYLES[a]};
webfont.FontApiParser.prototype.normalizeWeight_=function(a){if(null==a||""==a)return"4";var b=webfont.FontApiParser.WEIGHTS[a];return b?b:isNaN(a)?"4":a.substr(0,1)};webfont.FontApiParser.prototype.parseVariations_=function(a){var b=[];if(!a)return b;a=a.split(",");for(var c=a.length,d=0;d<c;d++){var e=this.generateFontVariationDescription_(a[d]);e&&b.push(e)}return b};webfont.FontApiParser.prototype.parseSubsets_=function(a){var b=[];return a?a.split(","):b};
webfont.FontApiParser.prototype.getFonts=function(){return this.parsedFonts_};webfont.FontApiParser.prototype.getFontTestStrings=function(){return this.fontTestStrings_};webfont.GoogleFontApi=function(a,b,c){this.userAgent_=a;this.domHelper_=b;this.configuration_=c};webfont.GoogleFontApi.NAME="google";webfont.GoogleFontApi.prototype.supportUserAgent=function(a,b){b(a.getBrowserInfo().hasWebFontSupport())};
webfont.GoogleFontApi.prototype.getFontWatchRunnerCtor=function(){return"AppleWebKit"==this.userAgent_.getEngine()?webfont.LastResortWebKitFontWatchRunner:webfont.FontWatchRunner};webfont.GoogleFontApi.prototype.load=function(a){var b=this.domHelper_;"MSIE"==this.userAgent_.getName()&&1!=this.configuration_.blocking?b.whenBodyExists(goog.bind(this.insertLink_,this,a)):this.insertLink_(a)};
webfont.GoogleFontApi.prototype.insertLink_=function(a){var b=this.domHelper_,c=new webfont.FontApiUrlBuilder(this.configuration_.api,b.getProtocol(),this.configuration_.text),d=this.configuration_.families;c.setFontFamilies(d);d=new webfont.FontApiParser(d);d.parse();b.insertInto("head",b.createCssLink(c.build()));a(d.getFonts(),d.getFontTestStrings())};
globalNamespaceObject.addModule(webfont.GoogleFontApi.NAME,function(a,b){var c=(new webfont.UserAgentParser(navigator.userAgent,document)).parse();return new webfont.GoogleFontApi(c,b,a)});webfont.AscenderScript=function(a,b){this.domHelper_=a;this.configuration_=b};webfont.AscenderScript.NAME="ascender";webfont.AscenderScript.VARIATIONS={regular:"n4",bold:"n7",italic:"i4",bolditalic:"i7",r:"n4",b:"n7",i:"i4",bi:"i7"};webfont.AscenderScript.prototype.supportUserAgent=function(a,b){return b(a.getBrowserInfo().hasWebFontSupport())};
webfont.AscenderScript.prototype.load=function(a){var b=this.configuration_.key,c=this.domHelper_.getProtocol();this.domHelper_.insertInto("head",this.domHelper_.createCssLink(c+"//webfonts.fontslive.com/css/"+b+".css"));b=this.parseFamiliesAndVariations(this.configuration_.families);a(b)};webfont.AscenderScript.prototype.parseFamiliesAndVariations=function(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push.apply(b,this.parseFamilyAndVariations(a[c]));return b};
webfont.AscenderScript.prototype.parseFamilyAndVariations=function(a){var b=a.split(":");a=b[0];if(b[1]){b=this.parseVariations(b[1]);for(var c=[],d=0;d<b.length;d+=1)c.push(new webfont.Font(a,b[d]));return c}return[new webfont.Font(a)]};webfont.AscenderScript.prototype.parseVariations=function(a){a=a.split(",");for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];if(e){var f=webfont.AscenderScript.VARIATIONS[e];b.push(f?f:e)}}return b};
globalNamespaceObject.addModule(webfont.AscenderScript.NAME,function(a,b){return new webfont.AscenderScript(b,a)});webfont.MonotypeScript=function(a,b,c){this.userAgent_=a;this.domHelper_=b;this.configuration_=c;this.fonts_=[]};webfont.MonotypeScript.NAME="monotype";webfont.MonotypeScript.HOOK="__mti_fntLst";webfont.MonotypeScript.SCRIPTID="__MonotypeAPIScript__";
webfont.MonotypeScript.prototype.supportUserAgent=function(a,b){var c=this,d=c.configuration_.projectId,e=c.configuration_.version;if(d){var f=c.domHelper_.createElement("script");f.id=webfont.MonotypeScript.SCRIPTID+d;var h=this.domHelper_.getLoadWindow(),l=!1;f.onload=f.onreadystatechange=function(){if(!(l||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)){l=!0;if(h[webfont.MonotypeScript.HOOK+d]){var e=h[webfont.MonotypeScript.HOOK+d]();if(e)for(var n=0;n<e.length;n++)c.fonts_.push(new webfont.Font(e[n].fontfamily))}b(a.getBrowserInfo().hasWebFontSupport());
f.onload=f.onreadystatechange=null}};f.src=c.getScriptSrc(d,e);this.domHelper_.insertInto("head",f)}else b(!0)};webfont.MonotypeScript.prototype.getScriptSrc=function(a,b){var c=this.domHelper_.getProtocol(),d=(this.configuration_.api||"fast.fonts.com/jsapi").replace(/^.*http(s?):(\/\/)?/,"");return c+"//"+d+"/"+a+".js"+(b?"?v="+b:"")};webfont.MonotypeScript.prototype.load=function(a){a(this.fonts_)};
globalNamespaceObject.addModule(webfont.MonotypeScript.NAME,function(a,b){var c=(new webfont.UserAgentParser(navigator.userAgent,document)).parse();return new webfont.MonotypeScript(c,b,a)});webfont.TypekitScript=function(a,b){this.domHelper_=a;this.configuration_=b;this.fonts_=[]};webfont.TypekitScript.NAME="typekit";webfont.TypekitScript.HOOK="__webfonttypekitmodule__";
webfont.TypekitScript.prototype.getScriptSrc=function(a){var b=this.domHelper_.getProtocol();return(this.configuration_.api||b+"//use.typekit.net")+"/"+a+".js"};
webfont.TypekitScript.prototype.supportUserAgent=function(a,b){var c=this.configuration_.id,d=this.configuration_,e=this.domHelper_.getLoadWindow(),f=this;c?(e[webfont.TypekitScript.HOOK]||(e[webfont.TypekitScript.HOOK]={}),e[webfont.TypekitScript.HOOK][c]=function(c){c(a,d,function(a,c,d){for(var e=0;e<c.length;e+=1){var h=d[c[e]];if(h)for(var l=0;l<h.length;l+=1)f.fonts_.push(new webfont.Font(c[e],h[l]));else f.fonts_.push(new webfont.Font(c[e]))}b(a)})},c=this.domHelper_.createScriptSrc(this.getScriptSrc(c)),
this.domHelper_.insertInto("head",c)):b(!0)};webfont.TypekitScript.prototype.load=function(a){a(this.fonts_)};globalNamespaceObject.addModule(webfont.TypekitScript.NAME,function(a,b){return new webfont.TypekitScript(b,a)});webfont.CustomCss=function(a,b){this.domHelper_=a;this.configuration_=b};webfont.CustomCss.NAME="custom";
webfont.CustomCss.prototype.load=function(a){var b,c=this.configuration_.urls||[],d=this.configuration_.families||[];var e=0;for(b=c.length;e<b;e++)this.domHelper_.insertInto("head",this.domHelper_.createCssLink(c[e]));c=[];e=0;for(b=d.length;e<b;e++){var f=d[e].split(":");if(f[1])for(var h=f[1].split(","),l=0;l<h.length;l+=1)c.push(new webfont.Font(f[0],h[l]));else c.push(new webfont.Font(f[0]))}a(c)};webfont.CustomCss.prototype.supportUserAgent=function(a,b){return b(a.getBrowserInfo().hasWebFontSupport())};
globalNamespaceObject.addModule(webfont.CustomCss.NAME,function(a,b){return new webfont.CustomCss(b,a)});webfont.FontdeckScript=function(a,b){this.domHelper_=a;this.configuration_=b;this.fonts_=[]};webfont.FontdeckScript.NAME="fontdeck";webfont.FontdeckScript.HOOK="__webfontfontdeckmodule__";webfont.FontdeckScript.API="//f.fontdeck.com/s/css/js/";
webfont.FontdeckScript.prototype.getScriptSrc=function(a){var b=this.domHelper_.getProtocol(),c=this.domHelper_.getLoadWindow().location.hostname||this.domHelper_.getMainWindow().location.hostname;return b+(this.configuration_.api||webfont.FontdeckScript.API)+c+"/"+a+".js"};
webfont.FontdeckScript.prototype.supportUserAgent=function(a,b){a=this.configuration_.id;var c=this.domHelper_.getLoadWindow(),d=this;a?(c[webfont.FontdeckScript.HOOK]||(c[webfont.FontdeckScript.HOOK]={}),c[webfont.FontdeckScript.HOOK][a]=function(a,c){for(var e=0,f=c.fonts.length;e<f;++e){var m=c.fonts[e];d.fonts_.push(new webfont.Font(m.name,webfont.Font.parseCssVariation("font-weight:"+m.weight+";font-style:"+m.style)))}b(a)},a=this.domHelper_.createScriptSrc(this.getScriptSrc(a)),this.domHelper_.insertInto("head",
a)):b(!0)};webfont.FontdeckScript.prototype.load=function(a){a(this.fonts_)};globalNamespaceObject.addModule(webfont.FontdeckScript.NAME,function(a,b){return new webfont.FontdeckScript(b,a)});window.WebFontConfig&&globalNamespaceObject.load(window.WebFontConfig);function FlashMessages(a){this.initialize(a)}FlashMessages.DISPLAY_TEMPLATE=new Template('<div class="sitemessage">#{message}</div>');FlashMessages.COOKIE_NAME="kong_flash_messages";
FlashMessages.prototype={initialize:function(a){this._data={};Cookie.accept()&&(this._messages_node=$("global"),this._target_node=$("flash_messages_target"),this._insertMessages())},data:function(){this._getDataFromCookie();return this._data},_getDataFromCookie:function(){var a=Cookie.get(FlashMessages.COOKIE_NAME);a&&(a=a.evalJSON(),this._data?Object.extend(this._data,a):this._data=a);this._clearCookie()},_insertMessages:function(){var a=this.data().messages;if(a){var b=null;this._target_node?(this._messages_node.remove(),
b=this._target_node):this._messages_node&&(b=this._messages_node);if(b){b.innerHTML=a.map(function(a){return FlashMessages.DISPLAY_TEMPLATE.evaluate({message:a})}).join();try{active_user.showingBlueBar()}catch(c){}}}},_clearCookie:function(){Cookie.erase(FlashMessages.COOKIE_NAME,"/")}};
var KongAds=function(){function a(a){return a.replace(/[^a-z0-9-+_]+/gi,"_").substr(0,10)}function b(b,c){var d=[],e=[],l=a(b);if(c instanceof Array){for(b=c.length;b--;)e[b]=a(c[b]);d.push([l,e])}else d.push([l,a(c)]);return d}function c(a){this.initialize(a)}c.prototype={initialize:function(a){this._network_id=a.networkId;this._publisher_id=a.publisherId;this._rendering_mode=a.renderingMode;this._slots={};this._refreshAds=a.refreshAds;this._slotnamesToRefresh=[];this._targetingParams={}},defineAd:function(a,
b,c){var d=this,e="/"+this._network_id+"/"+this._publisher_id+"/"+a;googletag.cmd.push(function(){d._slots[a]=googletag.defineSlot(e,[b,c],a+"-ad-slot").addService(googletag.pubads())});return this},setTargeting:function(){var a=arguments,c=this;googletag.cmd.push(function(){var d=googletag.pubads();var e=[];if(1==a.length)for(var l in a[0])e=e.concat(b(l,a[0][l]));else 2==a.length&&(e=e.concat(b(a[0],a[1])));for(l=e.length;l--;)c._targetingParams[e[l][0]]=e[l][1],d.setTargeting(e[l][0],e[l][1])});
return this},targetingParams:function(){return this._targetingParams},displayAd:function(a){googletag.cmd.push(function(){googletag.display(a+"-ad-slot")});return this},requestAds:function(){if(document.location.search.match(/username=/)||document.referrer.match(/username=/))return this;googletag.cmd.push(function(){var a=googletag.pubads();a[renderingMode]();a.enableSingleRequest();googletag.enableServices()});if(this._refreshAds){var a=this;setInterval(function(){a.refreshSlots()},KongAds.REFRESH_INTERVAL)}return this},
refreshSlots:function(){if(0!==this._slotnamesToRefresh.length){var a=this,b=$j.map(this._slotnamesToRefresh,function(b){return a.getSlot(b)});if(0<b.length)try{googletag.pubads().refresh(b),"undefined"!=typeof metricTracker&&metricTracker.trackEvent("AdRefresh",window.location.pathname,Object.toJSON(this._slotnamesToRefresh)),this._slotnamesToRefresh=[]}catch(f){"undefined"!=typeof console&&console.error("Ad refresh threw error: "+f.message)}}},addRefreshableSlot:function(a){this._slotnamesToRefresh.push(a)},
getSlot:function(a){return this._slots[a]}};return{KongDFPAds:c}}();KongAds.REFRESH_INTERVAL=12E4;var KongDFPAds=KongAds.KongDFPAds;
function PostMessageHandler(a){function b(a){var b;e.find(function(c){return b=c(a)});b&&b()}function c(a){b.defer(a.evalJSON())}function d(a){if(a.origin==window.location.protocol+"//"+window.location.host)try{c(a.data)}catch(h){}}var e=[];window.attachEvent?window.attachEvent("onmessage",d):window.addEventListener("message",d,!1);return{addCallback:function(a){e.push(a)},getHandlers:function(){return e},runCallbackForUnparsedPayload:c}}
function AgeGate(a,b){a&&b?this.initialize(a,b):this.initialize(null,a)}AgeGate.MONTHS="January February March April May June July August September October November December".split(" ");
AgeGate.prototype={initialize:function(a,b){var c=this;this._cookie_name=b.cookie_name||"age_gate";this._required_age=b.required_age;this._age_met=!1;if(this._use_form=void 0===b.use_form?!0:b.use_form)this._element=$(a),this._button_text=b.button_text||"Go";this._onSuccess=(b.onSuccess||function(){}).wrap(function(a){c._age_met=!0;Cookie.set(c._cookie_name,"YES");return a()});this._onFailure=(b.onFailure||function(){}).wrap(function(a){Cookie.set(c._cookie_name,"NO");return a()});this._onError=b.onError||
function(){};this.preflight()||this._age_met||(this._use_form?this.writeForm():this._onFailure())},preflight:function(){var a=Cookie.get(this._cookie_name);return"YES"==a?(this._onSuccess(),!0):"NO"==a?(this._onFailure(),!0):!1},writeForm:function(){var a=this,b="",c=0;b='<form action="#"><dl><dt><label>Date of Birth</label></dt><dd id="date"><select id="user_month" name="user_month"><option value=""></option>';for(c=0;c<AgeGate.MONTHS.length;c++)b+='<option value="'+c+'">'+AgeGate.MONTHS[c]+"</option>";
b+='</select><select id="user_day" name="user_day"><option value=""></option>';for(c=1;31>=c;c++)b+='<option value="'+c+'">'+c+"</option>";b+='</select><select id="user_year" name="user_year"><option value=""></option>';for(c=2005;1908<=c;c--)b+='<option value="'+c+'">'+c+"</option>";b=b+"</select></dd></dl>"+('<input type="submit" value="'+this._button_text+'" />');this._element.innerHTML+=b+"</form>";(function(){a._element.immediateDescendants()[0].onsubmit=function(){a.checkAge(this);return!1}}).defer()},
checkAge:function(a){var b=Number(a.user_month.getValue()),c=Number(a.user_day.getValue());a=Number(a.user_year.getValue());isNaN(b)||0===c||0===a?this._onError():(b=new Date(a+this._required_age,b,c),0>(new Date).getTime()-b.getTime()?this._onFailure():this._onSuccess())}};
var AsyncLoader={load:function(a,b,c){var d=document;switch(a){case "js":var e=d.createElement("script");e.type="text/javascript";e.async=!0;e.src=b;break;case "css":e=d.createElement("link");e.href=b;e.rel="stylesheet";break;default:return}if(c){var f=!1;e.onload=e.onreadystatechange=function(a){f||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(f=!0,c(a),e.onload=e.onreadystatechange=null)}}a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(e,a)}};
function BrowserNag(){var a=this;$j(document).on("click",".browser-notice--hide a",function(){a.hide();return!1});"hide"!==Cookie.get("browser_upgrade_notice")&&this.show()}BrowserNag.initialize=function(){BrowserNag.instance=new BrowserNag};
BrowserNag.prototype={show:function(){$j(".browser-notice").show();$j(".browser-notice--overlay").show();$j("#game")&&$j("#game").css({top:"-10000px",left:"-10000px"})},hide:function(){Cookie.set("browser_upgrade_notice","hide",7);$j(".browser-notice").hide();$j(".browser-notice--overlay").hide();$j("#game")&&$j("#game").css({top:"",left:""})}};
Kongregate.PostMessage={addMessageListener:function(a,b){if(a.document.addEventListener)try{a.document.addEventListener.call(a,"message",b,!1)}catch(c){Kongregate.Log.debug("addEventListener failed, using iframe addEventListener: "+c),Kongregate.PostMessage.createIframeEventListener(a,b)}else a.attachEvent?a.attachEvent("onmessage",b):Kongregate.Log.error("Could not add event listener, neither addEventListener or attachEvent found!");return b},removeMessageListener:function(a,b){a.removeEventListener?
a.removeEventListener("message",b):a.detachEvent&&a.detachEvent("onmessage",b)},supportsObjects:function(){var a=document.createElement("iframe"),b=!0;a.src="about:blank";document.body.appendChild(a);try{a.contentWindow.postMessage({toString:function(){b=!1;return""}},"*")}catch(c){}document.body.removeChild(a);return b},parseMessage:function(a){return"string"===typeof a&&"{"===a.charAt(0)?JSON.parse(a):"object"===typeof a?a:null},createIframeEventListener:function(a,b){var c=document.createElement("iframe");
c.src="about:blank";document.head.appendChild(c);c.contentWindow.addEventListener.call(a,"message",b,!1);document.head.removeChild(c)}};var slice=Array.prototype.slice;
Evented={on:function(a,b,c){this.__callbacks||(this.__callbacks={});this.__callbacks[a]||(this.__callbacks[a]=[]);if(c){var d=slice.call(arguments,3);d.unshift(b);d=Function.prototype.bind.apply(b[c],d)}else d=b;this.__callbacks[a].push(d)},trigger:function(a){var b=slice.call(arguments,1);this.__callbacks&&this.__callbacks[a]&&$j.each(this.__callbacks[a],function(a,d){d.apply(null,b)})}};function CrossFrameDataStore(a){this.initialize(a)}CrossFrameDataStore.MESSAGE_TYPE="kongregate:cross-frame-data-store";
CrossFrameDataStore.LIGHTBOX_NAME="kongregateLightbox";CrossFrameDataStore.update=function(a,b,c){a.postMessage(JSON.stringify({type:CrossFrameDataStore.MESSAGE_TYPE,name:b,data:c}),"*")};CrossFrameDataStore.updateLightbox=function(a){var b=Kongregate.Utils.findKongregateWindow();CrossFrameDataStore.update(b,CrossFrameDataStore.LIGHTBOX_NAME,a)};CrossFrameDataStore.closeLightbox=function(){CrossFrameDataStore.updateLightbox({close:!0})};
CrossFrameDataStore.prototype={initialize:function(a){this.domain=a.domain;this.name=a.name;this.window=a.window||window;this.clear();this.messageListener=Kongregate.PostMessage.addMessageListener(this.window,this.onMessage.bind(this))},clear:function(){this.data={}},shutdown:function(){Kongregate.PostMessage.removeMessageListener(this.window,this.messageListener);this.__callbacks={}},onMessage:function(a){var b=a.origin||a.originalEvent.origin;if(b==="http://"+this.domain||b==="https://"+this.domain)try{var c=
a.data,d=Kongregate.PostMessage.parseMessage(c);d&&d.type===CrossFrameDataStore.MESSAGE_TYPE&&this.processMessage(d)}catch(e){Kongregate.Log.warn("Error parsing message",c,e)}},processMessage:function(a){a.name===this.name&&(Kongregate.Log.debug("Updating cross frame data store "+name,a.data),$j.extend(this.data,a.data),this.trigger("change",this.data))}};$j.extend(CrossFrameDataStore.prototype,Evented);Date.now||(Date.now=function(){return(new Date).getTime()});DynamicFrameTarget=function(a){this.initialize(a)};
DynamicFrameTarget.prototype={initialize:function(a){this.name="dynamic_frame_"+ +new Date;this.frame=new Element("iframe",{name:this.name,id:this.name});$(document.body).insert(this.frame);this.frame.setStyle({display:"none"});a.form.target=this.name;var b=window.location.protocol.sub(":","");b=new Element("input",{type:"hidden",name:"source_protocol",value:b});a.form.appendChild(b);var c=this;b=function(){if(this.contentDocument)var a=this.contentDocument;else this.contentWindow?a=this.contentWindow.document:
window.frames[this.name]?a=window.frames[iframe.name].document:c.frame.contentWindow.document&&(a=c.frame.contentWindow.document);a&&0<a.body.innerHTML.length&&(a=a.body,(a=String((0<a.childElementCount?a.children[0]:a).innerHTML))&&!a.blank()&&c.callback(a.evalJSON()))};this.frame.attachEvent?this.frame.attachEvent("onload",b):this.frame.onload=b;this.callback=a.callback?a.callback:function(b){b.success?a.success&&a.success(b):a.failure&&a.failure(b)}}};DynamicFrameTarget.subclasses=[];
FeedHandler=Class.create({_feedType:"self",_feedContainerName:"feed_items_container",_feedContainer:null,_feedItemIds:[],_offset:0,_pageSize:20,_morePath:null,_destroyPath:null,_blinking:!1,initialize:function(a,b,c,d,e){this._feedType=a;this._feedContainerName=b;this._pageSize=c;this._morePath=d;this._destroyPath=e;this._self_disabling={};$(document).observe("click",this.clickHandler.bindAsEventListener(this))},setOffset:function(a){this._offset=a},addFeedItemIds:function(a){this._feedItemIds=this._feedItemIds.concat(a||
[])},updateFeedInfo:function(a,b){this.setOffset(a);this.addFeedItemIds(b);this.setFirstFeedItemClass()},container:function(){this._feedContainer||(this._feedContainer=$(this._feedContainerName));return this._feedContainer},indicator:function(){return this.container().select("#more_feed_items_indicator").first()},showMoreElement:function(){return this.container().select("#show_more_feed_items_label").first()},automaticallyFetchMore:function(){null!==this._morePath.match(/mini_feed_items/)?15>$$(".mini_item").length&&
this.requestNextPage():15>$$(".feed_item").length&&this.requestNextPage()},setFirstFeedItemClass:function(){this.container().select(".first_feed_item").each(function(a){a.removeClassName("first_feed_item")});var a=this.container().select(".feed_item").first();a&&a.addClassName("first_feed_item")},insertMoreShoutComments:function(a){var b=a.message_id;a.new_url?($("show_more_comments_link_"+b).href=a.new_url,$("show_more_comments_link_"+b).show()):$("show_more_comments_link_"+b).hide();$("shout_indicator_"+
b).hide();$("shout_short_comments_"+b).hide();$("shout_more_comments_"+b).insert({top:a.content})},requestNextPage:function(){var a=this.indicator(),b=this;a&&!a.visible()&&(a.show(),this.showMoreElement().hide(),new Ajax.Request(this._morePath,{parameters:{feed_type:this._feedType,offset:this._offset,num:this._pageSize,excluded_ids:this._feedItemIds.join(","),excluded_followed_users:$$(".js_followed_username").map(function(a){return a.innerHTML}).uniq().join(","),excluded_forum_users:$$(".js_forum_post_user").map(function(a){return a.innerHTML}).uniq().join(",")},
method:"get",onSuccess:function(a){b.container().select("#additional_feed_items").first().remove();b.container().insert(a.responseText);b.setFirstFeedItemClass()},onFailure:function(a){b.indicator().hide();b.showMoreElement().show()}}))},requestNextPageIfMoreItemsNeeded:function(){1500>this.container().getHeight()&&this.requestNextPage()},removeFeedItems:function(a){a instanceof Array&&!(0>=a.length)&&(new Effect.DropOut("feed_item_"+a[0]),new Ajax.Request(this._destroyPath,{method:"post",parameters:{ids:a.join(","),
context:this._feedType},onSuccess:function(){},onFailure:function(){}}))},unfollowUser:function(a,b){new Effect.DropOut("feed_item_"+b[0]);new Ajax.Request("/accounts/"+active_user.username()+"/friends/"+a+".json",{method:"put",parameters:{unfriend_from:"feed"},onSuccess:function(){},onFailure:function(){}})},blockGame:function(a,b,c){new Effect.DropOut("feed_item_"+c);new Ajax.Request("/games/"+b+"/"+a+"/blocks",{method:"post",parameters:{user_game_permissions:{allow_something:!1}},onSuccess:function(){},
onFailure:function(){}})},isMiniFeed:function(){return null!==this._morePath.match(/mini_feed_items/)},feedItemElement:function(a){return this.isMiniFeed()?$("mini_item_"+a):$("feed_item_"+a)},observeUnlike:function(a){a=this.feedItemElement(a).down(".like_link");null!==a&&(a.observe("mouseenter",function(){this.down(".like_text").update("Unlike")}),a.observe("mouseleave",function(){this.down(".like_text").update("Liked")}))},likeFeedItem:function(a){var b=this;this._self_disabling[a]||(this._self_disabling[a]=
!0,new Ajax.Request("/user_likes",{method:"post",parameters:{feed_item_id:a},onSuccess:function(c){var d=null;b.isMiniFeed()?(d=$("mini_item_"+a),d.down(".like_link").removeClassName("feed_like"),d.down(".like_link").addClassName("feed_unlike")):(d=$("feed_item_"+a),d.down(".like_text").update("Liked"));d.down(".like_link").onclick=function(){feedHandler.unlikeFeedItem(a);return!1};b._self_disabling[a]=null;b.observeUnlike(a);d.down(".like_count").update("("+c.responseJSON.count+")")},onFailure:function(){b._self_disabling[a]=
null}}))},unlikeFeedItem:function(a){var b=this;this._self_disabling[a]||(this._self_disabling[a]=!0,new Ajax.Request("/user_likes",{method:"delete",parameters:{feed_item_id:a},onSuccess:function(c){var d=null;d=b.isMiniFeed()?$("mini_item_"+a):$("feed_item_"+a);d.down(".like_link").onclick=function(){feedHandler.likeFeedItem(a);return!1};b._self_disabling[a]=null;d.down(".like_text").update("Like");d.down(".like_link").stopObserving("mouseenter");d.down(".like_link").stopObserving("mouseleave");
b.isMiniFeed()?(d.down(".like_link").removeClassName("feed_unlike"),d.down(".like_link").addClassName("feed_like")):d.down(".like_count").update("("+c.responseJSON.count+")")},onFailure:function(){b._self_disabling[a]=null}}))},clickHandler:function(a){var b=a.element();if(this.isMiniFeed()){if(a=b.hasClassName("mini_item")?b:b.up(".mini_item"))if(a=a.id.sub("mini_item_",""))b=(b=Cookie.get("feed_item_clicks"))?b.evalJSON():{},b.mini=b.mini||[],b.mini=b.mini.concat([a]),Cookie.set("feed_item_clicks",
Object.toJSON(b))}else if(a=b.hasClassName("feed_item")?b:b.up(".feed_item")){var c=b.up("a");if("A"==b.nodeName||c)b="A"==b.nodeName?b.href:c.href,a=a.id.sub("feed_item_",""),b&&!b.match(/#$/)&&(b=(b=Cookie.get("feed_item_clicks"))?b.evalJSON():{},b[this._feedType]=b[this._feedType]||[],b[this._feedType]=b[this._feedType].concat([a]),Cookie.set("feed_item_clicks",Object.toJSON(b)))}}});function FollowToggleButton(a){this.initialize(a)}
FollowToggleButton.prototype={initialize:function(a){this._indicatorTag=a},mouseOver:function(a){a=Event.findElement(a);a.removeClassName("btn_alt");a.update("Unfriend")},mouseOut:function(a){a=Event.findElement(a);a.addClassName("btn_alt");a.update("Friend")},toggle:function(a){a=Event.findElement(a);a.update(this._indicatorTag);a.onmouseover="";a.onmouseout=""}};
WebFont.load({timeout:2E3,google:{families:["Open+Sans:300italic,400italic,600italic,300,400,600&subset=latin,latin-ext"]},inactive:function(){WebFont.load({custom:{families:["Open Sans"],urls:["/stylesheets/open_sans.css"]}});WebFont.load({custom:{families:["Source Sans Pro"],urls:["/stylesheets/source_sans_pro.css"]}})}});
WebFont.load({timeout:2E3,google:{families:["Source+Sans+Pro:200,400,600,700,400italic,600italic,700italic&subset=latin,latin-ext"]},inactive:function(){WebFont.load({custom:{families:["Open Sans"],urls:["/stylesheets/open_sans.css"]}});WebFont.load({custom:{families:["Source Sans Pro"],urls:["/stylesheets/source_sans_pro.css"]}})}});
(function(){function a(a,c,d){Kongregate.Log[a]=function(){try{if("undefined"!==typeof active_user&&void 0===Kongregate.Log.debugLevel&&(Kongregate.Log.debugLevel=active_user.debugLevel()),0===c||Kongregate.Log.debugLevel>=c)console[d]?Function.prototype.apply.call(console[d],console,arguments):console.log(arguments)}catch(e){}}}Kongregate.Log={};a("spam",5,"log");a("debug",4,"log");a("info",3,"info");a("warn",2,"warn");a("error",1,"error");a("always",0,"log")})();
function stretch(){var a=$j(".main_navigation").offset();if(a){a=a.left;var b=$j("body").width();$j(".main_nav_menu").css("left",-1*a);$j(".main_nav_menu").css("width",b)}}
$j(function(){$j(".main_navigation").addClass("js-nav");stretch();$j(".main_nav_item").mouseover(function(){Shim.lock();stretch();game_title_auto_completer&&game_title_auto_completer.hide()});$j(".main_nav_item").mouseout(function(){Shim.unlock()});$j(window).resize(function(){stretch()});Prototype.Browser.IE9||Prototype.Browser.IE8?($j("body").addClass("no-cssanimation"),$j("body").addClass("no-flexbox"),$j(".main_nav_menu").each(function(){var a=$j(this),b=a.height();a.data("height",b+"px")}),$j(".main_nav_item").hover(function(){var a=
$j(this).find(".main_nav_menu"),b=a.data("height");a.css("height","0px").css("display","block");a.animate({height:b},{duration:120,queue:!1,complete:function(){Shim.shimElement(a[0])}})},function(){$j(this).find(".main_nav_menu").animate({height:"0px"},{duration:120,queue:!1,complete:function(){Shim.hide()}})})):(Prototype.Browser.IE10||/windows/.test(navigator.userAgent.toLowerCase()))&&$j(".main_nav_menu").bind("transitionend",function(){var a=$j(this);0<a.height()?Shim.shimElement(a[0]):Shim.hide()})});
var NativeApp=function(){var a={isInstalled:function(b){return a.isNativeApp()?kongNativeApp.isInstalled(b):!1},isNativeApp:function(){return"undefined"!=typeof kongNativeApp},downloadGame:function(b){a.isNativeApp()?window.open(b):window.location=b},launchGame:function(b){a.isNativeApp()&&kongNativeApp.sendMessage(JSON.stringify({opcode:"launch_game",params:{game_id:b}}))},browseGames:function(){a.isNativeApp()?window.location="/games/index_native?installed="+kongNativeApp.getInstalledGameIds():
window.location="/games/index_native"}};return a}();
Kongregate.navigationData=function(a,b){$j.extend(!0,b,{user:{username:a.username(),level:a.level(),points:a.points(),points_away:a.pointsAway(),friends_online_count:a.friendsOnlineCount(),has_friends_online:0<a.friendsOnlineCount(),unread_shouts_count:a.unreadShoutsCount(),unread_whispers_count:a.unreadWhispersCount(),unread_game_messages_count:a.unreadGameMessagesCount(),total_message_count:a.unreadShoutsCount()+a.unreadWhispersCount()+a.unreadGameMessagesCount(),kreds_balance:a.kredsBalance(),
moderator:a.isChatModerator(),authenticated:a.isAuthenticated(),next_level:a.level()+1,is_max_level:75==a.level(),progress_bar_width:a.pointsAfterLastLevel()/(a.pointsAway()+a.pointsAfterLastLevel())*100,facebook_connected:a.isFacebookConnected(),has_chips:null!==a.chipsBalance(),chips_balance:a.chipsBalance()}});b.games.recommended&&$j.each(b.games.recommended,function(){$j.extend(this,{metric_category:"Recommended"})});b.games.recently_played&&$j.each(b.games.recently_played,function(){$j.extend(this,
{metric_category:"Recently_Played"})});b.games.playlist&&$j.each(b.games.playlist,function(){$j.extend(this,{metric_category:"Playlist"})});return b};var PaymentHelpText={showHelpText:function(a,b){var c=$("help_wrapper");b=$(b);""!==a&&null!==a&&"error_msg"!=b.className&&(b.appendChild(c),$("help_text").innerHTML=a,c.show())},hideHelpText:function(){$("help_wrapper").hide()}};
Array.prototype.filter||(Array.prototype.filter=function(a){if(void 0===this||null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!==typeof a)throw new TypeError;for(var d=[],e=2<=arguments.length?arguments[1]:void 0,f=0;f<c;f++)if(f in b){var h=b[f];a.call(e,h,f,b)&&d.push(h)}return d});
Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c,d;if(null===this)throw new TypeError(" this is null or not defined");var e=Object(this),f=e.length>>>0;if("function"!==typeof a)throw new TypeError(a+" is not a function");1<arguments.length&&(c=b);for(d=0;d<f;){if(d in e){var h=e[d];a.call(c,h,d,e)}d++}});
Array.prototype.includes||(Array.prototype.includes=function(a,b){var c=Object(this),d=parseInt(c.length)||0;if(0===d)return!1;b=parseInt(b)||0;0<=b||(b=d+b,0>b&&(b=0));for(var e;b<d;){e=c[b];if(a===e||a!==a&&e!==e)return!0;b++}return!1});
Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),d=c.length;return function(e){if("function"!==typeof e&&("object"!==typeof e||null===e))throw new TypeError("Object.keys called on non-object");var f=[],h;for(h in e)a.call(e,h)&&f.push(h);if(b)for(h=0;h<d;h++)a.call(e,c[h])&&f.push(c[h]);return f}}());
window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(a,b){b=b||window;for(var c=0;c<this.length;c++)a.call(b,this[c],c,this)});
Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(a){a=(this.document||this.ownerDocument).querySelectorAll(a);for(var b=a.length;0<=--b&&a.item(b)!==this;);return-1<b});
TimeInWordsHelper={distanceInWords:function(a,b,c){a=a.getTime();b=b.getTime();b=Math.round(Math.abs(a-b)/1E3);a=Math.round(b/60);return 1>=a?c?5>b?"less than 5 seconds":10>b?"less than 10 seconds":20>b?"less than 20 seconds":40>b?"half a minute":60>b?"less than a minute":"1 minute":0===a?"less than a minute":"1 minute":45>a?a+" minutes":90>a?"1 hour":1440>a?Math.round(a/60)+" hours":2880>a?"1 day":43200>a?Math.round(a/1440)+" days":86400>a?"about 1 month":525600>a?Math.round(a/43200)+" months":1051200>
a?"about 1 year":"over "+Math.round(a/525600)+" years"},distanceInWordsFromNow:function(a,b){return TimeInWordsHelper.distanceInWords(new Date,a,b)}};UserStatus=function(){this.initialize()};
(function(){var a=function(){try{$("welcome_box_sign_in_button").restore()}catch(b){}try{$("sessions_new_form_spinner").restore()}catch(b){}};UserStatus.prototype={initialize:function(){this.delayed_response=null;this.triggerGoogleTagDelayed()},destination:function(a){var b=$$("link[rel=destination]")[0];if(b)return b.href;if(a.destination_uri)return a.destination_uri},handleSignup:function(a){a.success?this.accountCreationSuccess(a):this.accountCreationFailure(a)},facebookSignInSuccess:function(a){active_user.isAuthenticated()&&
a.new_facebook_connection?this.existingUserConnected():a.existing_user?this.setActiveUser(a):this.accountCreationSuccess(a)},existingUserConnected:function(){new FacebookFriendFinder(function(a){try{lightbox.prototype.shutdown()}catch(c){}lightbox.prototype.initializeKongregateLightboxFromAjax("/facebook_connection/confirm",{done_class_name:0<a.friends.length?"wide":"fb_confirm_narrow",afterStaticContentLoad:function(){0<a.friends.length?a.displayFriendForm("/account"+active_user.username()+"/friends/create_many",
$("facebook_friends"),function(){try{lightbox.prototype.shutdown()}catch(c){}}):$("facebook_friends_wrapper").hide();lightbox.prototype.addOnCloseCallback(function(){active_user.isGamePage()?$$(".facebook_nav_item").invoke("hide"):window.location.reload()})}})})},accountCreationSuccess:function(a){if(a.game){active_user.setJustRegisteredOnGamePage();if(a.from_facebook){try{lightbox.prototype.shutdown()}catch(c){}lightbox.prototype.initializeKongregateLightboxFromAjax(a.full_finalize_form_facebook_connection_url,
{done_class_name:"lightbox_login"});this.delayed_response=a}else this.setActiveUser(a,!0),lightbox.prototype.showConfirmation();active_user.isGamePage()&&this.googleTagRegistration()}else if(a.from_facebook){this.delayed_response=a;try{lightbox.prototype.shutdown()}catch(c){}lightbox.prototype.initializeKongregateLightboxFromAjax(a.full_finalize_form_facebook_connection_url,{done_class_name:"lightbox_login"})}else this.setupJustRegisteredCookie(),a=this.destination(a),lightbox.prototype.showConfirmation(a)},
triggerGoogleTagDelayed:function(){null!==Cookie.get("just_registered")&&(Cookie.erase("just_registered","/"),setTimeout(this.googleTagRegistration.bind(this),0))},googleTagRegistration:function(){var a=active_user.src()?"_"+active_user.src():"";dataLayer.push({event:"registration"+a})},accountCreationFailure:function(a){"undefined"!=typeof tracking_code_service&&tracking_code_service.reportTrackingCode();a.banned?a.from_lightbox?$("lightbox_email_register").replace(a.content):window.location.href=
a.banned_url:a.ip_limit_reached?a.from_lightbox?parent.lightbox_registration_form_validator.showIpLimitMessage():parent.registration_form_validator.showIpLimitMessage():a.from_lightbox?parent.lightbox_registration_form_validator.updateErrorMessages(a.errors,a.email_address):a.errors&&parent.registration_form_validator.updateErrorMessages(a.errors,a.email_address)},sessionStatus:function(b){window.frames.secure_login_frame&&(window.frames.secure_login_frame.location.href="about:blank");if(Cookie.accept())if(b.authenticated)if(b.game)user_status.setActiveUser(b);
else{try{$("welcome_box_sign_in_button").disable()}catch(c){}window.location.href=user_status.destination(b)}else b.ban_id?window.location.href=b.banned_url:b.mfa_content?(b.from_lightbox?lightbox.prototype.updateWithContent(b.mfa_content):lightbox.prototype.initializeKongregateLightboxFromContent(b.mfa_content,{done_class_name:"lightbox_login"}),a()):"/session/new"==window.location.pathname?window.location.href="https://"+window.location.hostname+"/session/new":(b.from_lightbox&&$("lightboxlogin").replace(b.content),
a(),b.native_app||active_user.activateInlineLogin());else window.location.href="http://"+window.location.hostname+"/session/new"},finalizeCompletion:function(a){response=a&&a.response?a.response:this.delayed_response;this.setActiveUser(response,!0);try{lightbox.prototype.shutdown()}catch(d){}lightbox.prototype.initializeKongregateLightboxFromAjax("/accounts/new/confirmation");if(!active_user.isGamePage()||!0===response.user_blocked_from_game){var b=this.destination(response);lightbox.prototype.addOnCloseCallback(function(){b?
window.location.href=this.destination(response):window.location.reload()})}},finalizeFailure:function(a){$("lightbox").visible()||holodeck.isShowingSignupTab()?($j.each(a.errors,function(b){$j("#user_"+b+"_error_block").html(a.errors[b])}),$("facebook_signup_submit_button").restore()):this.setActiveUser(this.delayed_response)},showFriendFinderForm:function(a,c){var b="/accounts/"+c.username+"/friends/create_many",e=function(){c.new_facebook_connection=!1;this.setActiveUser(c)}.bind(this);try{lightbox.prototype.shutdownWithoutCallbacks()}catch(f){}lightbox.prototype.initializeKongregateLightboxFromContent('<div id="facebook_friends"></div>',
{done_class_name:"lightbox_login",afterStaticContentLoad:function(){a.displayFriendForm(b,$("facebook_friends"),function(){try{lightbox.prototype.shutdown()}catch(f){}});lightbox.prototype.addOnCloseCallback(e)}})},setupWelcomeMessageCookie:function(a){if(a=Cookie.get("temp_flash_message"))Cookie.set(FlashMessages.COOKIE_NAME,Object.toJSON({messages:[a]})),Cookie.erase("temp_flash_message","/")},setupJustRegisteredCookie:function(){Cookie.set("just_registered","true",10,"/")},setActiveUser:function(a,
c){if(a&&a.new_facebook_connection)new FacebookFriendFinder(function(b){0<b.friends.length&&$("facebook_friends")?this.showFriendFinderForm(b,a):(a.new_facebook_connection=!1,this.setActiveUser(a,c))}.bind(this));else{try{c||CrossFrameDataStore.closeLightbox(),"undefined"!=typeof tracking_code_service&&tracking_code_service.reportTrackingCode()}catch(d){}if(active_user.isGamePage()&&!0!==a.user_blocked_from_game)active_user.updateAttributes(a.user_data_hash),active_user.acceptedPrivacyPolicy()||window.location.reload(),
Navigation.loadContent(Kongregate.navigationData(active_user,a.nav_data_hash)),Navigation.fixMyKong(),window.holodeck?(holodeck.switchUser(a.chat_username,a.chat_password,a.user_chat_hash,a.game_auth_token,a.user_id,!0),holodeck.closeSignupTab(),holodeck.closeSigninTab(),holodeck.rebootstrapChat(),GameMetricsUpdater.update(),a.default_nag&&holodeck.updateDefaultChatNag(a.default_nag),active_user.runCapturedFunction(),holodeck.redoPromptSavedSharedContent(),holodeck.redoShowSharedContentsIndex(),holodeck.loadAdminControls(active_user),
a.has_pending_collaborators&&holodeck.loadCollaborators(),holodeck.loadDiscussions(),holodeck.prepareAvatarTab()):(active_user.runCapturedFunction(),GameMetricsUpdater.update());else if(this.setupWelcomeMessageCookie(a),this.setupJustRegisteredCookie(),!c)try{this.destination(a)&&!a.from_facebook?window.location.href=this.destination(a):window.location.reload()}catch(d){window.location.reload()}}}}})();var user_status=new UserStatus;WebAnalytics=function(a){this.initialize(a)};
WebAnalytics.prototype={initialize:function(a){},trackEvent:function(a,b,c,d,e){},trackPageView:function(a){},setCustomVariable:function(a,b,c,d){},setCustomVisitorVariable:function(a,b,c){},setCustomSessionVariable:function(a,b,c){},setCustomPageVariable:function(a,b,c){}};GoogleAnalytics=function(a){WebAnalytics.call(this,a)};GoogleAnalytics.prototype=new WebAnalytics;GoogleAnalytics.prototype.constructor=GoogleAnalytics;
GoogleAnalytics.prototype={asyncTrackerName:"",initialize:function(a){var b=document.createElement("script");b.type="text/javascript";b.async=!0;b.src="https://ssl.google-analytics.com/ga.js";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c);window._gaq=window._gaq||[];window.MAX_EVENT_TIME=6E4;a.createAsyncTracker?window._gaq.push(function(){this.asyncTrackerName=a.createAsyncTracker.name;window._gaq._createAsyncTracker(a.analyticsCode,this.asyncTrackerName)}):window._gaq.push(["_setAccount",
a.analyticsCode]);window._gaq.push(["_gat._anonymizeIp"]);a.setDomain&&window._gaq.push(["_setDomainName","none"]);a.trackPageView&&this.trackPageView()},trackEvent:function(a,b,c,d,e){window._gaq.push([this._determineEventName("_trackEvent"),a,b,c,d,e])},trackPageView:function(a){window._gaq.push([this._determineEventName("_trackPageview"),a])},setCustomVariable:function(a,b,c,d){window._gaq.push([this._determineEventName("_setCustomVar"),a,b,c,d])},setCustomVisitorVariable:function(a,b,c){this.setCustomVariable(a,
b,c,1)},setCustomSessionVariable:function(a,b,c){this.setCustomVariable(a,b,c,2)},setCustomPageVariable:function(a,b,c){this.setCustomVariable(a,b,c,3)},_determineEventName:function(a){return this.asyncTrackerName+a}};MetricTracker=function(a){this.initialize(a)};
MetricTracker.prototype={trackers:[],maxEventTime:0,initialize:function(a){a.maxEventTime&&(this.maxEventTime=a.maxEventTime);jQuery(document).on("click","[data-metric-tracker]",function(){var a=jQuery(this).data("metric-tracker").split("-");metricTracker.handleMetricTrackerAttr(a)});a.googleAnalytics&&this.trackers.push(new GoogleAnalytics(a.googleAnalytics));a.webAnalytics&&this.trackers.push(new WebAnalytics(a.webAnalytics))},trackClick:function(a,b,c,d){this.trackEvent(a,"Click",b,c,d)},trackEvent:function(a,
b,c,d,e){jQuery.each(this.trackers,function(f,h){h.trackEvent(a,b,c,d,e)})},trackTimedEvent:function(a,b,c){0<c&&c<this.maxEventTime&&jQuery.each(this.trackers,function(d,e){e.trackEvent("LoadTime",a,b,c)})},trackPageView:function(a){jQuery.each(this.trackers,function(b,c){c.trackPageView(a)})},setCustomVariable:function(a,b,c,d){jQuery.each(this.trackers,function(e,f){f.setCustomVariable(a,b,c,d)})},setCustomVisitorVariable:function(a,b,c){jQuery.each(this.trackers,function(d,e){e.setCustomVisitorVariable(a,
b,c)})},setCustomSessionVariable:function(a,b,c){jQuery.each(this.trackers,function(d,e){e.setCustomSessionVariable(a,b,c)})},setCustomPageVariable:function(a,b,c){jQuery.each(this.trackers,function(d,e){e.setCustomPageVariable(a,b,c)})},handleMetricTrackerAttr:function(a){var b=a[2],c=a.slice(3,a.length);jQuery.each(c,function(a,b){c[a]=b.replace(/_/g," ")});switch(b){case "tc":this.trackClick(c[0],c[1],c[2],c[3]);break;case "te":this.trackEvent(c[0],c[1],c[2],c[3],c[4]);break;case "tpv":this.trackPageView(c[0]);
break;case "scv":this.setCustomVariable(c[0],c[1],c[2],c[3]);break;case "scvv":this.setCustomVisitorVariable(c[0],c[1],c[2]);break;case "scsv":this.setCustomSessionVariable(c[0],c[1],c[2]);break;case "scpv":this.setCustomPageVariable(c[0],c[1],c[2])}}};
(function(a){function b(){var b=a.crypto||a.msCrypto;if(!f&&b&&b.getRandomValues)try{var c=new Uint8Array(16);m=f=function(){b.getRandomValues(c);return c};f()}catch(G){}if(!f){var d=Array(16);h=f=function(){for(var a=0,b;16>a;a++)0===(a&3)&&(b=4294967296*Math.random()),d[a]=b>>>((a&3)<<3)&255;return d};"undefined"!==typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}}function c(){if("function"===typeof require)try{var a=require("crypto").randomBytes;
l=f=a&&function(){return a(16)};f()}catch(u){}}function d(a,b){b=b||0;var c=z;return c[a[b++]]+c[a[b++]]+c[a[b++]]+c[a[b++]]+"-"+c[a[b++]]+c[a[b++]]+"-"+c[a[b++]]+c[a[b++]]+"-"+c[a[b++]]+c[a[b++]]+"-"+c[a[b++]]+c[a[b++]]+c[a[b++]]+c[a[b++]]+c[a[b++]]+c[a[b++]]}function e(a,b,c){c=b&&c||0;"string"===typeof a&&(b="binary"===a?new n(16):null,a=null);a=a||{};a=a.random||(a.rng||f)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(b)for(var e=0;16>e;e++)b[c+e]=a[e];return b||d(a)}var f,h,l,m;a?b():c();for(var n="function"===
typeof Buffer?Buffer:Array,z=[],C={},x=0;256>x;x++)z[x]=(x+256).toString(16).substr(1),C[z[x]]=x;x=f();var F=[x[0]|1,x[1],x[2],x[3],x[4],x[5]],t=(x[6]<<8|x[7])&16383,D=0,q=0;e.v1=function(a,b,c){c=b&&c||0;var e=b||[];a=a||{};var f=null!=a.clockseq?a.clockseq:t,h=null!=a.msecs?a.msecs:(new Date).getTime(),l=null!=a.nsecs?a.nsecs:q+1,m=h-D+(l-q)/1E4;0>m&&null==a.clockseq&&(f=f+1&16383);(0>m||h>D)&&null==a.nsecs&&(l=0);if(1E4<=l)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");D=h;q=l;
t=f;h+=122192928E5;l=(1E4*(h&268435455)+l)%4294967296;e[c++]=l>>>24&255;e[c++]=l>>>16&255;e[c++]=l>>>8&255;e[c++]=l&255;h=h/4294967296*1E4&268435455;e[c++]=h>>>8&255;e[c++]=h&255;e[c++]=h>>>24&15|16;e[c++]=h>>>16&255;e[c++]=f>>>8|128;e[c++]=f&255;a=a.node||F;for(f=0;6>f;f++)e[c+f]=a[f];return b?b:d(e)};e.v4=e;e.parse=function(a,b,c){var d=b&&c||0,e=0;b=b||[];for(a.toLowerCase().replace(/[0-9a-f]{2}/g,function(a){16>e&&(b[d+e++]=C[a])});16>e;)b[d+e++]=0;return b};e.unparse=d;e.BufferClass=n;e._rng=
f;e._mathRNG=h;e._nodeRNG=l;e._whatwgRNG=m;if("undefined"!==typeof module&&module.exports)module.exports=e;else if("function"===typeof define&&define.amd)define(function(){return e});else{var w=a.uuid;e.noConflict=function(){a.uuid=w;return e};a.uuid=e}})("undefined"!==typeof window?window:null);
